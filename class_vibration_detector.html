<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Visual Vibration Tracking: Класс VibrationDetector</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Visual Vibration Tracking<span id="projectnumber">&#160;0.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Создано системой Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Поиск');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Загрузка...</div>
<div class="SRStatus" id="Searching">Поиск...</div>
<div class="SRStatus" id="NoMatches">Не найдено</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Открытые члены</a> &#124;
<a href="#pri-types">Закрытые типы</a> &#124;
<a href="#pri-methods">Закрытые члены</a> &#124;
<a href="#pri-static-methods">Закрытые статические члены</a> &#124;
<a href="#pri-attribs">Закрытые данные</a> &#124;
<a href="class_vibration_detector-members.html">Полный список членов класса</a>  </div>
  <div class="headertitle"><div class="title">Класс VibrationDetector</div></div>
</div><!--header-->
<div class="contents">

<p>Класс для создания объектов-детекторов вибрации  
 <a href="class_vibration_detector.html#details">Подробнее...</a></p>

<p><code>#include &lt;<a class="el" href="vibration__detector_8h_source.html">vibration_detector.h</a>&gt;</code></p>
<div class="dynheader">
Граф связей класса VibrationDetector:</div>
<div class="dyncontent">
<div class="center"><img src="class_vibration_detector__coll__graph.png" border="0" usemap="#a_vibration_detector_coll__map" alt="Collaboration graph"/></div>
<map name="a_vibration_detector_coll__map" id="a_vibration_detector_coll__map">
<area shape="rect" title="Класс для создания объектов&#45;детекторов вибрации" alt="" coords="5,93,128,119"/>
<area shape="rect" href="class_frame_handler.html" title="Класс для чтения и сохранения кадров видео, а также различной их обработки" alt="" coords="15,5,118,31"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">см. легенду</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Открытые члены</h2></td></tr>
<tr class="memitem:a5118f744911132e7683580dde4e25c0d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vibration_detector.html#a5118f744911132e7683580dde4e25c0d">VibrationDetector</a> (std::string input_file_name, std::string output_file_name, std::string window_name)</td></tr>
<tr class="memdesc:a5118f744911132e7683580dde4e25c0d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Конструктор класса  <a href="class_vibration_detector.html#a5118f744911132e7683580dde4e25c0d">Подробнее...</a><br /></td></tr>
<tr class="separator:a5118f744911132e7683580dde4e25c0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae93a14aa147af694a90c012f16efc924"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vibration_detector.html#ae93a14aa147af694a90c012f16efc924">ExecuteVibrationDetection</a> ()</td></tr>
<tr class="memdesc:ae93a14aa147af694a90c012f16efc924"><td class="mdescLeft">&#160;</td><td class="mdescRight">Выполняет детекцию вибрации  <a href="class_vibration_detector.html#ae93a14aa147af694a90c012f16efc924">Подробнее...</a><br /></td></tr>
<tr class="separator:ae93a14aa147af694a90c012f16efc924"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-types" name="pri-types"></a>
Закрытые типы</h2></td></tr>
<tr class="memitem:abbd492ca1a716ff2e2dc81d745adedd0"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vibration_detector.html#abbd492ca1a716ff2e2dc81d745adedd0">main_mode</a> { <b>DEFAULT</b>
, <b>SELECTINGROI</b>
, <b>PAUSE</b>
 }</td></tr>
<tr class="separator:abbd492ca1a716ff2e2dc81d745adedd0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a920ba9204ea3ca918470b242e2d22a9c"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vibration_detector.html#a920ba9204ea3ca918470b242e2d22a9c">colored_point_mode</a> { <b>COLORING_DEFAULT</b>
, <b>COLORING_BASED_ON_FREQUENCY</b>
, <b>COLORING_BASED_ON_AMPLITUDE</b>
 }</td></tr>
<tr class="separator:a920ba9204ea3ca918470b242e2d22a9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Закрытые члены</h2></td></tr>
<tr class="memitem:af1da28823c948acc115fc862378b62d8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vibration_detector.html#af1da28823c948acc115fc862378b62d8">ServeTheQueues</a> ()</td></tr>
<tr class="memdesc:af1da28823c948acc115fc862378b62d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Обслуживает очереди на удаление и создание. Необходимо для того, чтобы не нарушить нумерацию точек во время выполнения основного цикла  <a href="class_vibration_detector.html#af1da28823c948acc115fc862378b62d8">Подробнее...</a><br /></td></tr>
<tr class="separator:af1da28823c948acc115fc862378b62d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a176e5b0d0ca409c6cfcacdeca13240de"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vibration_detector.html#a176e5b0d0ca409c6cfcacdeca13240de">CreateNewPoint</a> (Point2f mouse_coordinates)</td></tr>
<tr class="memdesc:a176e5b0d0ca409c6cfcacdeca13240de"><td class="mdescLeft">&#160;</td><td class="mdescRight">Создаем "обычную" точку  <a href="class_vibration_detector.html#a176e5b0d0ca409c6cfcacdeca13240de">Подробнее...</a><br /></td></tr>
<tr class="separator:a176e5b0d0ca409c6cfcacdeca13240de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa43b85f7a90ea3021b63608b378a81f4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vibration_detector.html#aa43b85f7a90ea3021b63608b378a81f4">LeftClickHandler</a> (Point2f mouse_coordinates)</td></tr>
<tr class="memdesc:aa43b85f7a90ea3021b63608b378a81f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Обработчик левых кликов  <a href="class_vibration_detector.html#aa43b85f7a90ea3021b63608b378a81f4">Подробнее...</a><br /></td></tr>
<tr class="separator:aa43b85f7a90ea3021b63608b378a81f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a725d87ae6c09ef9f18c95f8490086478"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vibration_detector.html#a725d87ae6c09ef9f18c95f8490086478">CreateNewColoredPoint</a> (Point2f mouse_coordinates)</td></tr>
<tr class="memdesc:a725d87ae6c09ef9f18c95f8490086478"><td class="mdescLeft">&#160;</td><td class="mdescRight">Обработчик "цветных" точек  <a href="class_vibration_detector.html#a725d87ae6c09ef9f18c95f8490086478">Подробнее...</a><br /></td></tr>
<tr class="separator:a725d87ae6c09ef9f18c95f8490086478"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c1ef9b4b8a5a8f2159398a05571c410"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vibration_detector.html#a6c1ef9b4b8a5a8f2159398a05571c410">DeletePoints</a> (Point2i mouse_coordinates)</td></tr>
<tr class="memdesc:a6c1ef9b4b8a5a8f2159398a05571c410"><td class="mdescLeft">&#160;</td><td class="mdescRight">Удаляем объект "обычную" точку  <a href="class_vibration_detector.html#a6c1ef9b4b8a5a8f2159398a05571c410">Подробнее...</a><br /></td></tr>
<tr class="separator:a6c1ef9b4b8a5a8f2159398a05571c410"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0f3c59d611f15ff9505429bcf2e45b7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vibration_detector.html#ab0f3c59d611f15ff9505429bcf2e45b7">DeleteColoredPoints</a> ()</td></tr>
<tr class="memdesc:ab0f3c59d611f15ff9505429bcf2e45b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Удаляем объекты "цветная" точка  <a href="class_vibration_detector.html#ab0f3c59d611f15ff9505429bcf2e45b7">Подробнее...</a><br /></td></tr>
<tr class="separator:ab0f3c59d611f15ff9505429bcf2e45b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba1212595904b3a3d4f1ef8ebef89d87"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vibration_detector.html#aba1212595904b3a3d4f1ef8ebef89d87">FindAndDeleteUncofidentPoints</a> ()</td></tr>
<tr class="memdesc:aba1212595904b3a3d4f1ef8ebef89d87"><td class="mdescLeft">&#160;</td><td class="mdescRight">Удаляет "цветные" и "обычные" точки, если уровень доверия к нми слишком низкий  <a href="class_vibration_detector.html#aba1212595904b3a3d4f1ef8ebef89d87">Подробнее...</a><br /></td></tr>
<tr class="separator:aba1212595904b3a3d4f1ef8ebef89d87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b586f40cc32c90aef3467d2c906758a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vibration_detector.html#a7b586f40cc32c90aef3467d2c906758a">DetectEvent</a> (int event, int x, int y, int flags)</td></tr>
<tr class="memdesc:a7b586f40cc32c90aef3467d2c906758a"><td class="mdescLeft">&#160;</td><td class="mdescRight">callback functions for detecting the click  <a href="class_vibration_detector.html#a7b586f40cc32c90aef3467d2c906758a">Подробнее...</a><br /></td></tr>
<tr class="separator:a7b586f40cc32c90aef3467d2c906758a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21af0947bd97bcb37db8625516efcd9c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vibration_detector.html#a21af0947bd97bcb37db8625516efcd9c">DefaultModeHandler</a> (int event, int x, int y)</td></tr>
<tr class="memdesc:a21af0947bd97bcb37db8625516efcd9c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Обычный режим  <a href="class_vibration_detector.html#a21af0947bd97bcb37db8625516efcd9c">Подробнее...</a><br /></td></tr>
<tr class="separator:a21af0947bd97bcb37db8625516efcd9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30c131133b8faa624d16839036c2a046"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vibration_detector.html#a30c131133b8faa624d16839036c2a046">RoiSelectionModeHandler</a> (int event, int x, int y)</td></tr>
<tr class="memdesc:a30c131133b8faa624d16839036c2a046"><td class="mdescLeft">&#160;</td><td class="mdescRight">Режим выделения региона интереса  <a href="class_vibration_detector.html#a30c131133b8faa624d16839036c2a046">Подробнее...</a><br /></td></tr>
<tr class="separator:a30c131133b8faa624d16839036c2a046"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2fadec69d259a03125901ad988e7137"><td class="memItemLeft" align="right" valign="top">Mat&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vibration_detector.html#ae2fadec69d259a03125901ad988e7137">MakeWarpedFrame</a> (Mat frame, std::vector&lt; Point2i &gt; warping_figure)</td></tr>
<tr class="memdesc:ae2fadec69d259a03125901ad988e7137"><td class="mdescLeft">&#160;</td><td class="mdescRight">Удаляет перспективные искажения  <a href="class_vibration_detector.html#ae2fadec69d259a03125901ad988e7137">Подробнее...</a><br /></td></tr>
<tr class="separator:ae2fadec69d259a03125901ad988e7137"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81f38d7f3d0599b01186a122d68d09ee"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vibration_detector.html#a81f38d7f3d0599b01186a122d68d09ee">TrackAndCalc</a> ()</td></tr>
<tr class="memdesc:a81f38d7f3d0599b01186a122d68d09ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Трекает точки алгоритмом Лукаса-Канаде и вызывает БПФ  <a href="class_vibration_detector.html#a81f38d7f3d0599b01186a122d68d09ee">Подробнее...</a><br /></td></tr>
<tr class="separator:a81f38d7f3d0599b01186a122d68d09ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58f70fe74fee9f702773a0d2ab18643a"><td class="memItemLeft" align="right" valign="top">std::vector&lt; Point2f &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vibration_detector.html#a58f70fe74fee9f702773a0d2ab18643a">FindGoodFeatures</a> (Mat frame, Rect roi)</td></tr>
<tr class="memdesc:a58f70fe74fee9f702773a0d2ab18643a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Находит подходящие для трекинга точки на изображении  <a href="class_vibration_detector.html#a58f70fe74fee9f702773a0d2ab18643a">Подробнее...</a><br /></td></tr>
<tr class="separator:a58f70fe74fee9f702773a0d2ab18643a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad99686383d8b80d106ae486a085b092c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vibration_detector.html#ad99686383d8b80d106ae486a085b092c">DrawDebugLkWinRectangle</a> (Mat &amp;frame)</td></tr>
<tr class="memdesc:ad99686383d8b80d106ae486a085b092c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Рисует точки и выводит данные  <a href="class_vibration_detector.html#ad99686383d8b80d106ae486a085b092c">Подробнее...</a><br /></td></tr>
<tr class="separator:ad99686383d8b80d106ae486a085b092c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8741b76c24a08ec2ce54ff9d934ce76"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vibration_detector.html#ad8741b76c24a08ec2ce54ff9d934ce76">DrawAndOutput</a> (Mat &amp;frame)</td></tr>
<tr class="memdesc:ad8741b76c24a08ec2ce54ff9d934ce76"><td class="mdescLeft">&#160;</td><td class="mdescRight">Масштабирует, рисует и выводит на экран обработанный кадр с точками  <a href="class_vibration_detector.html#ad8741b76c24a08ec2ce54ff9d934ce76">Подробнее...</a><br /></td></tr>
<tr class="separator:ad8741b76c24a08ec2ce54ff9d934ce76"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-static-methods" name="pri-static-methods"></a>
Закрытые статические члены</h2></td></tr>
<tr class="memitem:a3596d10b3b4e68b7c4151631fbb7aeb1"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vibration_detector.html#a3596d10b3b4e68b7c4151631fbb7aeb1">OnMouse</a> (int event, int x, int y, int flags, void *userdata)</td></tr>
<tr class="memdesc:a3596d10b3b4e68b7c4151631fbb7aeb1"><td class="mdescLeft">&#160;</td><td class="mdescRight">callback functions for detecting the click  <a href="class_vibration_detector.html#a3596d10b3b4e68b7c4151631fbb7aeb1">Подробнее...</a><br /></td></tr>
<tr class="separator:a3596d10b3b4e68b7c4151631fbb7aeb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Закрытые данные</h2></td></tr>
<tr class="memitem:a57b58c6da673cafcca839e5f48d9045c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_frame_handler.html">FrameHandler</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vibration_detector.html#a57b58c6da673cafcca839e5f48d9045c">frame_handler</a></td></tr>
<tr class="memdesc:a57b58c6da673cafcca839e5f48d9045c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Фреймпроцессор  <a href="class_vibration_detector.html#a57b58c6da673cafcca839e5f48d9045c">Подробнее...</a><br /></td></tr>
<tr class="separator:a57b58c6da673cafcca839e5f48d9045c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0fa5fb784f1db6bdb7a9d9e5d608bb3"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vibration_detector.html#ab0fa5fb784f1db6bdb7a9d9e5d608bb3">running_</a></td></tr>
<tr class="memdesc:ab0fa5fb784f1db6bdb7a9d9e5d608bb3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Флаг запущенного основного алгоритма  <a href="class_vibration_detector.html#ab0fa5fb784f1db6bdb7a9d9e5d608bb3">Подробнее...</a><br /></td></tr>
<tr class="separator:ab0fa5fb784f1db6bdb7a9d9e5d608bb3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c0d42618889da70c073056ba3e4065c"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vibration_detector.html#a5c0d42618889da70c073056ba3e4065c">res_mp_</a></td></tr>
<tr class="memdesc:a5c0d42618889da70c073056ba3e4065c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Коэффициент автоскейла размеров окна в зависимости от разрешения исходного видео  <a href="class_vibration_detector.html#a5c0d42618889da70c073056ba3e4065c">Подробнее...</a><br /></td></tr>
<tr class="separator:a5c0d42618889da70c073056ba3e4065c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7093e56d2391aceaeb9d9cbd389eaaf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vibration_detector.html#af7093e56d2391aceaeb9d9cbd389eaaf">point_id_</a></td></tr>
<tr class="memdesc:af7093e56d2391aceaeb9d9cbd389eaaf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Псевдо-id (порядковывй номер точки)  <a href="class_vibration_detector.html#af7093e56d2391aceaeb9d9cbd389eaaf">Подробнее...</a><br /></td></tr>
<tr class="separator:af7093e56d2391aceaeb9d9cbd389eaaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69f64f7b483a4295abd6e5a48ab161ff"><td class="memItemLeft" align="right" valign="top">Point&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vibration_detector.html#a69f64f7b483a4295abd6e5a48ab161ff">last_mouse_position_</a></td></tr>
<tr class="memdesc:a69f64f7b483a4295abd6e5a48ab161ff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Последняя позиция курсора в главном окне  <a href="class_vibration_detector.html#a69f64f7b483a4295abd6e5a48ab161ff">Подробнее...</a><br /></td></tr>
<tr class="separator:a69f64f7b483a4295abd6e5a48ab161ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3748489d876505deab724e16cf1e767"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vibration_detector.html#ad3748489d876505deab724e16cf1e767">current_mode_</a></td></tr>
<tr class="memdesc:ad3748489d876505deab724e16cf1e767"><td class="mdescLeft">&#160;</td><td class="mdescRight">Основной режим работы (enum main_mode)  <a href="class_vibration_detector.html#ad3748489d876505deab724e16cf1e767">Подробнее...</a><br /></td></tr>
<tr class="separator:ad3748489d876505deab724e16cf1e767"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49b64f3fe433f06af9444e8059d0cbc6"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vibration_detector.html#a49b64f3fe433f06af9444e8059d0cbc6">fullscreen_</a></td></tr>
<tr class="memdesc:a49b64f3fe433f06af9444e8059d0cbc6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Флаг для полноэкранного режима  <a href="class_vibration_detector.html#a49b64f3fe433f06af9444e8059d0cbc6">Подробнее...</a><br /></td></tr>
<tr class="separator:a49b64f3fe433f06af9444e8059d0cbc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51842be0abc4ac57d3e07bbb7ff33d8e"><td class="memItemLeft" align="right" valign="top">std::vector&lt; Point2i &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vibration_detector.html#a51842be0abc4ac57d3e07bbb7ff33d8e">l_click_queue_</a></td></tr>
<tr class="memdesc:a51842be0abc4ac57d3e07bbb7ff33d8e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Очередь на создание "обычных" точек  <a href="class_vibration_detector.html#a51842be0abc4ac57d3e07bbb7ff33d8e">Подробнее...</a><br /></td></tr>
<tr class="separator:a51842be0abc4ac57d3e07bbb7ff33d8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48e1f58a28d451445a23ea6575ef9b38"><td class="memItemLeft" align="right" valign="top">std::vector&lt; Point2f &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vibration_detector.html#a48e1f58a28d451445a23ea6575ef9b38">c_point_queue_</a></td></tr>
<tr class="memdesc:a48e1f58a28d451445a23ea6575ef9b38"><td class="mdescLeft">&#160;</td><td class="mdescRight">Очередь на создание "цветных" точек  <a href="class_vibration_detector.html#a48e1f58a28d451445a23ea6575ef9b38">Подробнее...</a><br /></td></tr>
<tr class="separator:a48e1f58a28d451445a23ea6575ef9b38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a290fb09835aef1220fc44485e0f391de"><td class="memItemLeft" align="right" valign="top">std::vector&lt; Point2i &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vibration_detector.html#a290fb09835aef1220fc44485e0f391de">delete_queue_</a></td></tr>
<tr class="memdesc:a290fb09835aef1220fc44485e0f391de"><td class="mdescLeft">&#160;</td><td class="mdescRight">Очередь на удаление точек  <a href="class_vibration_detector.html#a290fb09835aef1220fc44485e0f391de">Подробнее...</a><br /></td></tr>
<tr class="separator:a290fb09835aef1220fc44485e0f391de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0cdb940eece1b90795717d39cbac187d"><td class="memItemLeft" align="right" valign="top">std::vector&lt; Point2i &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vibration_detector.html#a0cdb940eece1b90795717d39cbac187d">histograms_queue_</a></td></tr>
<tr class="memdesc:a0cdb940eece1b90795717d39cbac187d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Очередь на отрисовку гистограм  <a href="class_vibration_detector.html#a0cdb940eece1b90795717d39cbac187d">Подробнее...</a><br /></td></tr>
<tr class="separator:a0cdb940eece1b90795717d39cbac187d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5085a389a0ff26924331ab5022eea1af"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="class_lonely_point_handler.html">LonelyPointHandler</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vibration_detector.html#a5085a389a0ff26924331ab5022eea1af">vec_lonely_point_handlers_</a></td></tr>
<tr class="memdesc:a5085a389a0ff26924331ab5022eea1af"><td class="mdescLeft">&#160;</td><td class="mdescRight">Вектор обработчиков "одиноких" точек  <a href="class_vibration_detector.html#a5085a389a0ff26924331ab5022eea1af">Подробнее...</a><br /></td></tr>
<tr class="separator:a5085a389a0ff26924331ab5022eea1af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add86750dfd1683f09410d3fe3822a950"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="class_colored_point_handler.html">ColoredPointHandler</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vibration_detector.html#add86750dfd1683f09410d3fe3822a950">vec_colored_point_handlers_</a></td></tr>
<tr class="memdesc:add86750dfd1683f09410d3fe3822a950"><td class="mdescLeft">&#160;</td><td class="mdescRight">Вектор обработчиков "цветных" точек  <a href="class_vibration_detector.html#add86750dfd1683f09410d3fe3822a950">Подробнее...</a><br /></td></tr>
<tr class="separator:add86750dfd1683f09410d3fe3822a950"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a418071707b1348281ef2a434c42de26e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vibration_detector.html#a418071707b1348281ef2a434c42de26e">sensivity_in_percents_</a></td></tr>
<tr class="memdesc:a418071707b1348281ef2a434c42de26e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Чувствительность при трекинге вибрации  <a href="class_vibration_detector.html#a418071707b1348281ef2a434c42de26e">Подробнее...</a><br /></td></tr>
<tr class="separator:a418071707b1348281ef2a434c42de26e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c823c70560e24ce3e8484ae25440357"><td class="memItemLeft" align="right" valign="top">Mat&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vibration_detector.html#a3c823c70560e24ce3e8484ae25440357">current_tracking_frame_</a></td></tr>
<tr class="memdesc:a3c823c70560e24ce3e8484ae25440357"><td class="mdescLeft">&#160;</td><td class="mdescRight">Текущий Mat-instance только что найденного кадра из видео  <a href="class_vibration_detector.html#a3c823c70560e24ce3e8484ae25440357">Подробнее...</a><br /></td></tr>
<tr class="separator:a3c823c70560e24ce3e8484ae25440357"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace1d4e3045fea22507c11b44cc6fb920"><td class="memItemLeft" align="right" valign="top">Mat&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vibration_detector.html#ace1d4e3045fea22507c11b44cc6fb920">frame_to_be_shown_</a></td></tr>
<tr class="memdesc:ace1d4e3045fea22507c11b44cc6fb920"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mat-instance, который будет показан в окне  <a href="class_vibration_detector.html#ace1d4e3045fea22507c11b44cc6fb920">Подробнее...</a><br /></td></tr>
<tr class="separator:ace1d4e3045fea22507c11b44cc6fb920"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41634272ca48ff33bf21b39d11559eaa"><td class="memItemLeft" align="right" valign="top">Mat&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vibration_detector.html#a41634272ca48ff33bf21b39d11559eaa">grad_scale_</a></td></tr>
<tr class="memdesc:a41634272ca48ff33bf21b39d11559eaa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Изображение цветной шкалы внизу экрана  <a href="class_vibration_detector.html#a41634272ca48ff33bf21b39d11559eaa">Подробнее...</a><br /></td></tr>
<tr class="separator:a41634272ca48ff33bf21b39d11559eaa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af75ebe29dd6955ae7a249c4c854c2657"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vibration_detector.html#af75ebe29dd6955ae7a249c4c854c2657">colored_point_mode_</a></td></tr>
<tr class="memdesc:af75ebe29dd6955ae7a249c4c854c2657"><td class="mdescLeft">&#160;</td><td class="mdescRight">Текущий режим подсветки точек при выбранном регионе интереса (по амплитуде/по частоте)  <a href="class_vibration_detector.html#af75ebe29dd6955ae7a249c4c854c2657">Подробнее...</a><br /></td></tr>
<tr class="separator:af75ebe29dd6955ae7a249c4c854c2657"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aacb53723f4a18df998738d0d54c5290b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vibration_detector.html#aacb53723f4a18df998738d0d54c5290b">roi_selecting_</a></td></tr>
<tr class="memdesc:aacb53723f4a18df998738d0d54c5290b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Флаг, показывающий происходит ли в данный момент выделение ROI.  <a href="class_vibration_detector.html#aacb53723f4a18df998738d0d54c5290b">Подробнее...</a><br /></td></tr>
<tr class="separator:aacb53723f4a18df998738d0d54c5290b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd9f8f38bcde73bb14c9cf643f270d36"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vibration_detector.html#afd9f8f38bcde73bb14c9cf643f270d36">roi_selected_</a></td></tr>
<tr class="memdesc:afd9f8f38bcde73bb14c9cf643f270d36"><td class="mdescLeft">&#160;</td><td class="mdescRight">Флаг, показывающий был ли выделен ROI или нет  <a href="class_vibration_detector.html#afd9f8f38bcde73bb14c9cf643f270d36">Подробнее...</a><br /></td></tr>
<tr class="separator:afd9f8f38bcde73bb14c9cf643f270d36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef49bdadca0536214393e22addf4ce04"><td class="memItemLeft" align="right" valign="top">Point2i&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vibration_detector.html#aef49bdadca0536214393e22addf4ce04">tl_click_coords_</a></td></tr>
<tr class="memdesc:aef49bdadca0536214393e22addf4ce04"><td class="mdescLeft">&#160;</td><td class="mdescRight">Координаты первой точки прямоугольник (top left, bottom left, top right, bottom right - смотря "в какую сторону" выделять ROI с помощью мыши (курсора))  <a href="class_vibration_detector.html#aef49bdadca0536214393e22addf4ce04">Подробнее...</a><br /></td></tr>
<tr class="separator:aef49bdadca0536214393e22addf4ce04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f9772794a4f76bb0503a9f046d65b72"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vibration_detector.html#a5f9772794a4f76bb0503a9f046d65b72">input_file_name_</a></td></tr>
<tr class="memdesc:a5f9772794a4f76bb0503a9f046d65b72"><td class="mdescLeft">&#160;</td><td class="mdescRight">Имя (путь) входного видео  <a href="class_vibration_detector.html#a5f9772794a4f76bb0503a9f046d65b72">Подробнее...</a><br /></td></tr>
<tr class="separator:a5f9772794a4f76bb0503a9f046d65b72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e4bada48fc235b2c02ad07fcec6fdd1"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vibration_detector.html#a7e4bada48fc235b2c02ad07fcec6fdd1">output_file_name_</a></td></tr>
<tr class="memdesc:a7e4bada48fc235b2c02ad07fcec6fdd1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Имя (путь) видео, в котором будет результат детектинга  <a href="class_vibration_detector.html#a7e4bada48fc235b2c02ad07fcec6fdd1">Подробнее...</a><br /></td></tr>
<tr class="separator:a7e4bada48fc235b2c02ad07fcec6fdd1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adda01acf92ced4b8bfa5880bb475ce55"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vibration_detector.html#adda01acf92ced4b8bfa5880bb475ce55">output_csv_file_name_</a></td></tr>
<tr class="memdesc:adda01acf92ced4b8bfa5880bb475ce55"><td class="mdescLeft">&#160;</td><td class="mdescRight">Имя (путь) файла для хранения метаданных  <a href="class_vibration_detector.html#adda01acf92ced4b8bfa5880bb475ce55">Подробнее...</a><br /></td></tr>
<tr class="separator:adda01acf92ced4b8bfa5880bb475ce55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1dddb74ae6ef1b1f5cb4b66e2a352509"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vibration_detector.html#a1dddb74ae6ef1b1f5cb4b66e2a352509">window_name_</a></td></tr>
<tr class="memdesc:a1dddb74ae6ef1b1f5cb4b66e2a352509"><td class="mdescLeft">&#160;</td><td class="mdescRight">Имя главного окна  <a href="class_vibration_detector.html#a1dddb74ae6ef1b1f5cb4b66e2a352509">Подробнее...</a><br /></td></tr>
<tr class="separator:a1dddb74ae6ef1b1f5cb4b66e2a352509"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b8ea35de43e2702a889f8def948ece4"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vibration_detector.html#a3b8ea35de43e2702a889f8def948ece4">warping_figure_selecting_</a></td></tr>
<tr class="memdesc:a3b8ea35de43e2702a889f8def948ece4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Флаг, показывающий, происходит ли в данный момент выделение фигуры (эта возможность отключена временно)  <a href="class_vibration_detector.html#a3b8ea35de43e2702a889f8def948ece4">Подробнее...</a><br /></td></tr>
<tr class="separator:a3b8ea35de43e2702a889f8def948ece4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a901927a4199f5bf914675f19cae9a651"><td class="memItemLeft" align="right" valign="top">std::vector&lt; Point &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vibration_detector.html#a901927a4199f5bf914675f19cae9a651">warping_figure_</a></td></tr>
<tr class="memdesc:a901927a4199f5bf914675f19cae9a651"><td class="mdescLeft">&#160;</td><td class="mdescRight">Координаты фигуры для исправления перспективы  <a href="class_vibration_detector.html#a901927a4199f5bf914675f19cae9a651">Подробнее...</a><br /></td></tr>
<tr class="separator:a901927a4199f5bf914675f19cae9a651"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c524b0b7ab0348fe4fb6018f64b4dcf"><td class="memItemLeft" align="right" valign="top">Mat&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vibration_detector.html#a3c524b0b7ab0348fe4fb6018f64b4dcf">prev_img_gray_</a></td></tr>
<tr class="memdesc:a3c524b0b7ab0348fe4fb6018f64b4dcf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Предыдущий кадр видео в грейскейл и с небольшим блюром (<a class="el" href="class_frame_handler.html#a4bd1108adbbd4c21c4c3233efa8c8d1e" title="Возвращает серый кадр с блюром">FrameHandler::MakeGrayFrame()</a>)  <a href="class_vibration_detector.html#a3c524b0b7ab0348fe4fb6018f64b4dcf">Подробнее...</a><br /></td></tr>
<tr class="separator:a3c524b0b7ab0348fe4fb6018f64b4dcf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a016d906a3746e6d61b9468c7127a717f"><td class="memItemLeft" align="right" valign="top">Mat&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vibration_detector.html#a016d906a3746e6d61b9468c7127a717f">next_img_gray_</a></td></tr>
<tr class="memdesc:a016d906a3746e6d61b9468c7127a717f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Следующий (или текущий после "предыдущего" - смотря как удобнее для понимания) кадр видео в грейскейл и с небольшим блюром (<a class="el" href="class_frame_handler.html#a4bd1108adbbd4c21c4c3233efa8c8d1e" title="Возвращает серый кадр с блюром">FrameHandler::MakeGrayFrame()</a>)  <a href="class_vibration_detector.html#a016d906a3746e6d61b9468c7127a717f">Подробнее...</a><br /></td></tr>
<tr class="separator:a016d906a3746e6d61b9468c7127a717f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc8267e01dbf92e742db792c530e490a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vibration_detector.html#abc8267e01dbf92e742db792c530e490a">lk_win_size_</a></td></tr>
<tr class="memdesc:abc8267e01dbf92e742db792c530e490a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Размер окна для алгоритма Лукаса-Канаде  <a href="class_vibration_detector.html#abc8267e01dbf92e742db792c530e490a">Подробнее...</a><br /></td></tr>
<tr class="separator:abc8267e01dbf92e742db792c530e490a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a3692c7dd7a78cbc9af4d070d71264a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vibration_detector.html#a2a3692c7dd7a78cbc9af4d070d71264a">level_amount_</a></td></tr>
<tr class="memdesc:a2a3692c7dd7a78cbc9af4d070d71264a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Количество слоев пирамиды изображений в алгоритме Л-К  <a href="class_vibration_detector.html#a2a3692c7dd7a78cbc9af4d070d71264a">Подробнее...</a><br /></td></tr>
<tr class="separator:a2a3692c7dd7a78cbc9af4d070d71264a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a779ca47185d36d5fe0cf216c1cb9f48e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vibration_detector.html#a779ca47185d36d5fe0cf216c1cb9f48e">fps_</a></td></tr>
<tr class="memdesc:a779ca47185d36d5fe0cf216c1cb9f48e"><td class="mdescLeft">&#160;</td><td class="mdescRight">ФПС входного видео (две ширины полосы частот вибрации, которые можно отследить)  <a href="class_vibration_detector.html#a779ca47185d36d5fe0cf216c1cb9f48e">Подробнее...</a><br /></td></tr>
<tr class="separator:a779ca47185d36d5fe0cf216c1cb9f48e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cf6c4a052388d4fb17ec01815bc0bbe"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_vibration_detector.html#a4cf6c4a052388d4fb17ec01815bc0bbe">frame_time_</a></td></tr>
<tr class="memdesc:a4cf6c4a052388d4fb17ec01815bc0bbe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Текущее время кадра в мс (таймкод)  <a href="class_vibration_detector.html#a4cf6c4a052388d4fb17ec01815bc0bbe">Подробнее...</a><br /></td></tr>
<tr class="separator:a4cf6c4a052388d4fb17ec01815bc0bbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Подробное описание</h2>
<div class="textblock"><p >Класс для создания объектов-детекторов вибрации </p>
<p >Объект класса является основной единицей в программе. Внутри себя создает объекты различных классов, описанных в заголовочных файлах проекта. См. </p>

<p class="definition">См. определение в файле <a class="el" href="vibration__detector_8h_source.html">vibration_detector.h</a> строка <a class="el" href="vibration__detector_8h_source.html#l00027">27</a></p>
</div><h2 class="groupheader">Перечисления</h2>
<a id="a920ba9204ea3ca918470b242e2d22a9c" name="a920ba9204ea3ca918470b242e2d22a9c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a920ba9204ea3ca918470b242e2d22a9c">&#9670;&#160;</a></span>colored_point_mode</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="class_vibration_detector.html#a920ba9204ea3ca918470b242e2d22a9c">VibrationDetector::colored_point_mode</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >енум, описывающий режимы подсветки цветных точек </p>

<p class="definition">См. определение в файле <a class="el" href="vibration__detector_8h_source.html">vibration_detector.h</a> строка <a class="el" href="vibration__detector_8h_source.html#l00041">41</a></p>
<div class="fragment"><div class="line"><span class="lineno">   42</span>    {</div>
<div class="line"><span class="lineno">   43</span>        COLORING_DEFAULT,</div>
<div class="line"><span class="lineno">   44</span>        COLORING_BASED_ON_FREQUENCY,</div>
<div class="line"><span class="lineno">   45</span>        COLORING_BASED_ON_AMPLITUDE</div>
<div class="line"><span class="lineno">   46</span>    };</div>
</div><!-- fragment -->
</div>
</div>
<a id="abbd492ca1a716ff2e2dc81d745adedd0" name="abbd492ca1a716ff2e2dc81d745adedd0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abbd492ca1a716ff2e2dc81d745adedd0">&#9670;&#160;</a></span>main_mode</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="class_vibration_detector.html#abbd492ca1a716ff2e2dc81d745adedd0">VibrationDetector::main_mode</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >перечисление, описывающее глобальные режимы (дефолтный, режим выбирания региона интереса и пауза) </p>

<p class="definition">См. определение в файле <a class="el" href="vibration__detector_8h_source.html">vibration_detector.h</a> строка <a class="el" href="vibration__detector_8h_source.html#l00032">32</a></p>
<div class="fragment"><div class="line"><span class="lineno">   33</span>    {</div>
<div class="line"><span class="lineno">   34</span>        DEFAULT,</div>
<div class="line"><span class="lineno">   35</span>        SELECTINGROI,</div>
<div class="line"><span class="lineno">   36</span>        PAUSE</div>
<div class="line"><span class="lineno">   37</span>    };</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Конструктор(ы)</h2>
<a id="a5118f744911132e7683580dde4e25c0d" name="a5118f744911132e7683580dde4e25c0d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5118f744911132e7683580dde4e25c0d">&#9670;&#160;</a></span>VibrationDetector()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VibrationDetector::VibrationDetector </td>
          <td>(</td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>input_file_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>output_file_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string&#160;</td>
          <td class="paramname"><em>window_name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Конструктор класса </p>

<p class="definition">См. определение в файле <a class="el" href="vibration__detector_8cpp_source.html">vibration_detector.cpp</a> строка <a class="el" href="vibration__detector_8cpp_source.html#l00003">3</a></p>
<div class="fragment"><div class="line"><span class="lineno">    3</span>                                                                                                                 :</div>
<div class="line"><span class="lineno">    4</span>    <a class="code hl_variable" href="class_vibration_detector.html#a5f9772794a4f76bb0503a9f046d65b72">input_file_name_</a>{ input_file_name },</div>
<div class="line"><span class="lineno">    5</span>    <a class="code hl_variable" href="class_vibration_detector.html#a7e4bada48fc235b2c02ad07fcec6fdd1">output_file_name_</a>{ output_file_name },</div>
<div class="line"><span class="lineno">    6</span>    <a class="code hl_variable" href="class_vibration_detector.html#a1dddb74ae6ef1b1f5cb4b66e2a352509">window_name_</a>{ window_name },</div>
<div class="line"><span class="lineno">    7</span>    <a class="code hl_variable" href="class_vibration_detector.html#a3b8ea35de43e2702a889f8def948ece4">warping_figure_selecting_</a>{ <span class="keyword">false</span> },</div>
<div class="line"><span class="lineno">    8</span>    <a class="code hl_variable" href="class_vibration_detector.html#af75ebe29dd6955ae7a249c4c854c2657">colored_point_mode_</a>{ COLORING_BASED_ON_FREQUENCY },</div>
<div class="line"><span class="lineno">    9</span>    <a class="code hl_variable" href="class_vibration_detector.html#a418071707b1348281ef2a434c42de26e">sensivity_in_percents_</a>{ 1 },</div>
<div class="line"><span class="lineno">   10</span>    <a class="code hl_variable" href="class_vibration_detector.html#aacb53723f4a18df998738d0d54c5290b">roi_selecting_</a>{ <span class="keyword">false</span> },</div>
<div class="line"><span class="lineno">   11</span>    <a class="code hl_variable" href="class_vibration_detector.html#af7093e56d2391aceaeb9d9cbd389eaaf">point_id_</a>{ 0 },</div>
<div class="line"><span class="lineno">   12</span>    <a class="code hl_variable" href="class_vibration_detector.html#ad3748489d876505deab724e16cf1e767">current_mode_</a>{ DEFAULT },</div>
<div class="line"><span class="lineno">   13</span>    <a class="code hl_variable" href="class_vibration_detector.html#a49b64f3fe433f06af9444e8059d0cbc6">fullscreen_</a>{ <span class="keyword">false</span> }</div>
<div class="line"><span class="lineno">   14</span>{</div>
<div class="line"><span class="lineno">   15</span>    <a class="code hl_variable" href="class_vibration_detector.html#afd9f8f38bcde73bb14c9cf643f270d36">roi_selected_</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">   16</span>    <a class="code hl_variable" href="class_vibration_detector.html#abc8267e01dbf92e742db792c530e490a">lk_win_size_</a> = 40;</div>
<div class="line"><span class="lineno">   17</span>    <a class="code hl_variable" href="class_vibration_detector.html#a2a3692c7dd7a78cbc9af4d070d71264a">level_amount_</a> = 1;</div>
<div class="line"><span class="lineno">   18</span> </div>
<div class="line"><span class="lineno">   19</span>    <a class="code hl_variable" href="class_vibration_detector.html#a57b58c6da673cafcca839e5f48d9045c">frame_handler</a> = <span class="keyword">new</span> <a class="code hl_class" href="class_frame_handler.html">FrameHandler</a>(<a class="code hl_variable" href="class_vibration_detector.html#a5f9772794a4f76bb0503a9f046d65b72">input_file_name_</a>, <a class="code hl_variable" href="class_vibration_detector.html#a7e4bada48fc235b2c02ad07fcec6fdd1">output_file_name_</a>, MAIN_WINDOW_NAME);</div>
<div class="line"><span class="lineno">   20</span> </div>
<div class="line"><span class="lineno">   21</span>    <a class="code hl_variable" href="class_vibration_detector.html#a5c0d42618889da70c073056ba3e4065c">res_mp_</a> = <a class="code hl_variable" href="class_vibration_detector.html#a57b58c6da673cafcca839e5f48d9045c">frame_handler</a>-&gt;<a class="code hl_function" href="class_frame_handler.html#ae37c57501fea114483f4ea51da37d08a">GetTextResizeFactor</a>();</div>
<div class="line"><span class="lineno">   22</span> </div>
<div class="line"><span class="lineno">   23</span>    <a class="code hl_variable" href="class_vibration_detector.html#adda01acf92ced4b8bfa5880bb475ce55">output_csv_file_name_</a> = <a class="code hl_function" href="group___helper_functions.html#ga757c85a4bbcc0f0aa436369ac7ed57e0">HelperFunctions::GenerateCsvFilename</a>();</div>
<div class="line"><span class="lineno">   24</span>}</div>
<div class="ttc" id="aclass_frame_handler_html"><div class="ttname"><a href="class_frame_handler.html">FrameHandler</a></div><div class="ttdoc">Класс для чтения и сохранения кадров видео, а также различной их обработки</div><div class="ttdef"><b>Definition:</b> <a href="frame__handler_8h_source.html#l00028">frame_handler.h:29</a></div></div>
<div class="ttc" id="aclass_frame_handler_html_ae37c57501fea114483f4ea51da37d08a"><div class="ttname"><a href="class_frame_handler.html#ae37c57501fea114483f4ea51da37d08a">FrameHandler::GetTextResizeFactor</a></div><div class="ttdeci">float GetTextResizeFactor()</div><div class="ttdoc">Возвращает коэффициент масштабирования</div><div class="ttdef"><b>Definition:</b> <a href="frame__handler_8cpp_source.html#l00196">frame_handler.cpp:196</a></div></div>
<div class="ttc" id="aclass_vibration_detector_html_a1dddb74ae6ef1b1f5cb4b66e2a352509"><div class="ttname"><a href="class_vibration_detector.html#a1dddb74ae6ef1b1f5cb4b66e2a352509">VibrationDetector::window_name_</a></div><div class="ttdeci">std::string window_name_</div><div class="ttdoc">Имя главного окна</div><div class="ttdef"><b>Definition:</b> <a href="vibration__detector_8h_source.html#l00248">vibration_detector.h:248</a></div></div>
<div class="ttc" id="aclass_vibration_detector_html_a2a3692c7dd7a78cbc9af4d070d71264a"><div class="ttname"><a href="class_vibration_detector.html#a2a3692c7dd7a78cbc9af4d070d71264a">VibrationDetector::level_amount_</a></div><div class="ttdeci">int level_amount_</div><div class="ttdoc">Количество слоев пирамиды изображений в алгоритме Л-К</div><div class="ttdef"><b>Definition:</b> <a href="vibration__detector_8h_source.html#l00274">vibration_detector.h:274</a></div></div>
<div class="ttc" id="aclass_vibration_detector_html_a3b8ea35de43e2702a889f8def948ece4"><div class="ttname"><a href="class_vibration_detector.html#a3b8ea35de43e2702a889f8def948ece4">VibrationDetector::warping_figure_selecting_</a></div><div class="ttdeci">bool warping_figure_selecting_</div><div class="ttdoc">Флаг, показывающий, происходит ли в данный момент выделение фигуры (эта возможность отключена временн...</div><div class="ttdef"><b>Definition:</b> <a href="vibration__detector_8h_source.html#l00253">vibration_detector.h:253</a></div></div>
<div class="ttc" id="aclass_vibration_detector_html_a418071707b1348281ef2a434c42de26e"><div class="ttname"><a href="class_vibration_detector.html#a418071707b1348281ef2a434c42de26e">VibrationDetector::sensivity_in_percents_</a></div><div class="ttdeci">int sensivity_in_percents_</div><div class="ttdoc">Чувствительность при трекинге вибрации</div><div class="ttdef"><b>Definition:</b> <a href="vibration__detector_8h_source.html#l00194">vibration_detector.h:194</a></div></div>
<div class="ttc" id="aclass_vibration_detector_html_a49b64f3fe433f06af9444e8059d0cbc6"><div class="ttname"><a href="class_vibration_detector.html#a49b64f3fe433f06af9444e8059d0cbc6">VibrationDetector::fullscreen_</a></div><div class="ttdeci">bool fullscreen_</div><div class="ttdoc">Флаг для полноэкранного режима</div><div class="ttdef"><b>Definition:</b> <a href="vibration__detector_8h_source.html#l00154">vibration_detector.h:154</a></div></div>
<div class="ttc" id="aclass_vibration_detector_html_a57b58c6da673cafcca839e5f48d9045c"><div class="ttname"><a href="class_vibration_detector.html#a57b58c6da673cafcca839e5f48d9045c">VibrationDetector::frame_handler</a></div><div class="ttdeci">FrameHandler * frame_handler</div><div class="ttdoc">Фреймпроцессор</div><div class="ttdef"><b>Definition:</b> <a href="vibration__detector_8h_source.html#l00129">vibration_detector.h:129</a></div></div>
<div class="ttc" id="aclass_vibration_detector_html_a5c0d42618889da70c073056ba3e4065c"><div class="ttname"><a href="class_vibration_detector.html#a5c0d42618889da70c073056ba3e4065c">VibrationDetector::res_mp_</a></div><div class="ttdeci">float res_mp_</div><div class="ttdoc">Коэффициент автоскейла размеров окна в зависимости от разрешения исходного видео</div><div class="ttdef"><b>Definition:</b> <a href="vibration__detector_8h_source.html#l00138">vibration_detector.h:138</a></div></div>
<div class="ttc" id="aclass_vibration_detector_html_a5f9772794a4f76bb0503a9f046d65b72"><div class="ttname"><a href="class_vibration_detector.html#a5f9772794a4f76bb0503a9f046d65b72">VibrationDetector::input_file_name_</a></div><div class="ttdeci">std::string input_file_name_</div><div class="ttdoc">Имя (путь) входного видео</div><div class="ttdef"><b>Definition:</b> <a href="vibration__detector_8h_source.html#l00235">vibration_detector.h:235</a></div></div>
<div class="ttc" id="aclass_vibration_detector_html_a7e4bada48fc235b2c02ad07fcec6fdd1"><div class="ttname"><a href="class_vibration_detector.html#a7e4bada48fc235b2c02ad07fcec6fdd1">VibrationDetector::output_file_name_</a></div><div class="ttdeci">std::string output_file_name_</div><div class="ttdoc">Имя (путь) видео, в котором будет результат детектинга</div><div class="ttdef"><b>Definition:</b> <a href="vibration__detector_8h_source.html#l00239">vibration_detector.h:239</a></div></div>
<div class="ttc" id="aclass_vibration_detector_html_aacb53723f4a18df998738d0d54c5290b"><div class="ttname"><a href="class_vibration_detector.html#aacb53723f4a18df998738d0d54c5290b">VibrationDetector::roi_selecting_</a></div><div class="ttdeci">bool roi_selecting_</div><div class="ttdoc">Флаг, показывающий происходит ли в данный момент выделение ROI.</div><div class="ttdef"><b>Definition:</b> <a href="vibration__detector_8h_source.html#l00222">vibration_detector.h:222</a></div></div>
<div class="ttc" id="aclass_vibration_detector_html_abc8267e01dbf92e742db792c530e490a"><div class="ttname"><a href="class_vibration_detector.html#abc8267e01dbf92e742db792c530e490a">VibrationDetector::lk_win_size_</a></div><div class="ttdeci">int lk_win_size_</div><div class="ttdoc">Размер окна для алгоритма Лукаса-Канаде</div><div class="ttdef"><b>Definition:</b> <a href="vibration__detector_8h_source.html#l00270">vibration_detector.h:270</a></div></div>
<div class="ttc" id="aclass_vibration_detector_html_ad3748489d876505deab724e16cf1e767"><div class="ttname"><a href="class_vibration_detector.html#ad3748489d876505deab724e16cf1e767">VibrationDetector::current_mode_</a></div><div class="ttdeci">int current_mode_</div><div class="ttdoc">Основной режим работы (enum main_mode)</div><div class="ttdef"><b>Definition:</b> <a href="vibration__detector_8h_source.html#l00150">vibration_detector.h:150</a></div></div>
<div class="ttc" id="aclass_vibration_detector_html_adda01acf92ced4b8bfa5880bb475ce55"><div class="ttname"><a href="class_vibration_detector.html#adda01acf92ced4b8bfa5880bb475ce55">VibrationDetector::output_csv_file_name_</a></div><div class="ttdeci">std::string output_csv_file_name_</div><div class="ttdoc">Имя (путь) файла для хранения метаданных</div><div class="ttdef"><b>Definition:</b> <a href="vibration__detector_8h_source.html#l00244">vibration_detector.h:244</a></div></div>
<div class="ttc" id="aclass_vibration_detector_html_af7093e56d2391aceaeb9d9cbd389eaaf"><div class="ttname"><a href="class_vibration_detector.html#af7093e56d2391aceaeb9d9cbd389eaaf">VibrationDetector::point_id_</a></div><div class="ttdeci">int point_id_</div><div class="ttdoc">Псевдо-id (порядковывй номер точки)</div><div class="ttdef"><b>Definition:</b> <a href="vibration__detector_8h_source.html#l00142">vibration_detector.h:142</a></div></div>
<div class="ttc" id="aclass_vibration_detector_html_af75ebe29dd6955ae7a249c4c854c2657"><div class="ttname"><a href="class_vibration_detector.html#af75ebe29dd6955ae7a249c4c854c2657">VibrationDetector::colored_point_mode_</a></div><div class="ttdeci">int colored_point_mode_</div><div class="ttdoc">Текущий режим подсветки точек при выбранном регионе интереса (по амплитуде/по частоте)</div><div class="ttdef"><b>Definition:</b> <a href="vibration__detector_8h_source.html#l00213">vibration_detector.h:213</a></div></div>
<div class="ttc" id="aclass_vibration_detector_html_afd9f8f38bcde73bb14c9cf643f270d36"><div class="ttname"><a href="class_vibration_detector.html#afd9f8f38bcde73bb14c9cf643f270d36">VibrationDetector::roi_selected_</a></div><div class="ttdeci">bool roi_selected_</div><div class="ttdoc">Флаг, показывающий был ли выделен ROI или нет</div><div class="ttdef"><b>Definition:</b> <a href="vibration__detector_8h_source.html#l00226">vibration_detector.h:226</a></div></div>
<div class="ttc" id="agroup___helper_functions_html_ga757c85a4bbcc0f0aa436369ac7ed57e0"><div class="ttname"><a href="group___helper_functions.html#ga757c85a4bbcc0f0aa436369ac7ed57e0">HelperFunctions::GenerateCsvFilename</a></div><div class="ttdeci">std::string GenerateCsvFilename(std::string additional_text=&quot;&quot;)</div><div class="ttdoc">Генерирует имя CSV файла для сохранения метаданных</div><div class="ttdef"><b>Definition:</b> <a href="helper_8cpp_source.html#l00003">helper.cpp:3</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4d03711478339213420126adc48793d2" name="a4d03711478339213420126adc48793d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d03711478339213420126adc48793d2">&#9670;&#160;</a></span>~VibrationDetector()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">VibrationDetector::~VibrationDetector </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">См. определение в файле <a class="el" href="vibration__detector_8cpp_source.html">vibration_detector.cpp</a> строка <a class="el" href="vibration__detector_8cpp_source.html#l00026">26</a></p>
<div class="fragment"><div class="line"><span class="lineno">   27</span>{</div>
<div class="line"><span class="lineno">   28</span>    <span class="keyword">delete</span> <a class="code hl_variable" href="class_vibration_detector.html#a57b58c6da673cafcca839e5f48d9045c">frame_handler</a>;</div>
<div class="line"><span class="lineno">   29</span>    <a class="code hl_function" href="class_vibration_detector.html#ab0f3c59d611f15ff9505429bcf2e45b7">DeleteColoredPoints</a>();</div>
<div class="line"><span class="lineno">   30</span>    <span class="keywordflow">while</span> (!<a class="code hl_variable" href="class_vibration_detector.html#a5085a389a0ff26924331ab5022eea1af">vec_lonely_point_handlers_</a>.empty())</div>
<div class="line"><span class="lineno">   31</span>    {</div>
<div class="line"><span class="lineno">   32</span>        <span class="keyword">delete</span>(*(std::begin(<a class="code hl_variable" href="class_vibration_detector.html#a5085a389a0ff26924331ab5022eea1af">vec_lonely_point_handlers_</a>)));</div>
<div class="line"><span class="lineno">   33</span>        <span class="comment">// удаляем первую точку (первую в векторе и по сути первую по номеру)</span></div>
<div class="line"><span class="lineno">   34</span>        <a class="code hl_variable" href="class_vibration_detector.html#a5085a389a0ff26924331ab5022eea1af">vec_lonely_point_handlers_</a>.erase(std::begin(<a class="code hl_variable" href="class_vibration_detector.html#a5085a389a0ff26924331ab5022eea1af">vec_lonely_point_handlers_</a>));</div>
<div class="line"><span class="lineno">   35</span>    }</div>
<div class="line"><span class="lineno">   36</span>}</div>
<div class="ttc" id="aclass_vibration_detector_html_a5085a389a0ff26924331ab5022eea1af"><div class="ttname"><a href="class_vibration_detector.html#a5085a389a0ff26924331ab5022eea1af">VibrationDetector::vec_lonely_point_handlers_</a></div><div class="ttdeci">std::vector&lt; LonelyPointHandler * &gt; vec_lonely_point_handlers_</div><div class="ttdoc">Вектор обработчиков &quot;одиноких&quot; точек</div><div class="ttdef"><b>Definition:</b> <a href="vibration__detector_8h_source.html#l00178">vibration_detector.h:178</a></div></div>
<div class="ttc" id="aclass_vibration_detector_html_ab0f3c59d611f15ff9505429bcf2e45b7"><div class="ttname"><a href="class_vibration_detector.html#ab0f3c59d611f15ff9505429bcf2e45b7">VibrationDetector::DeleteColoredPoints</a></div><div class="ttdeci">void DeleteColoredPoints()</div><div class="ttdoc">Удаляем объекты &quot;цветная&quot; точка</div><div class="ttdef"><b>Definition:</b> <a href="vibration__detector_8cpp_source.html#l00177">vibration_detector.cpp:177</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Методы</h2>
<a id="a725d87ae6c09ef9f18c95f8490086478" name="a725d87ae6c09ef9f18c95f8490086478"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a725d87ae6c09ef9f18c95f8490086478">&#9670;&#160;</a></span>CreateNewColoredPoint()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void VibrationDetector::CreateNewColoredPoint </td>
          <td>(</td>
          <td class="paramtype">Point2f&#160;</td>
          <td class="paramname"><em>mouse_coordinates</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Обработчик "цветных" точек </p>

<p class="definition">См. определение в файле <a class="el" href="vibration__detector_8cpp_source.html">vibration_detector.cpp</a> строка <a class="el" href="vibration__detector_8cpp_source.html#l00108">108</a></p>
<div class="fragment"><div class="line"><span class="lineno">  109</span>{</div>
<div class="line"><span class="lineno">  110</span>    <a class="code hl_class" href="class_colored_point_handler.html">ColoredPointHandler</a>* point_handler_ = <span class="keyword">new</span> <a class="code hl_class" href="class_colored_point_handler.html">ColoredPointHandler</a>(mouse_coordinates, <a class="code hl_variable" href="class_vibration_detector.html#a779ca47185d36d5fe0cf216c1cb9f48e">fps_</a>, <a class="code hl_variable" href="class_vibration_detector.html#af7093e56d2391aceaeb9d9cbd389eaaf">point_id_</a>++, <a class="code hl_variable" href="class_vibration_detector.html#a5c0d42618889da70c073056ba3e4065c">res_mp_</a>, <a class="code hl_variable" href="class_vibration_detector.html#adda01acf92ced4b8bfa5880bb475ce55">output_csv_file_name_</a>);</div>
<div class="line"><span class="lineno">  111</span>    <a class="code hl_variable" href="class_vibration_detector.html#add86750dfd1683f09410d3fe3822a950">vec_colored_point_handlers_</a>.push_back(point_handler_);</div>
<div class="line"><span class="lineno">  112</span>}</div>
<div class="ttc" id="aclass_colored_point_handler_html"><div class="ttname"><a href="class_colored_point_handler.html">ColoredPointHandler</a></div><div class="ttdoc">Дочерний (от VibratingPoint) класс. Предназначен для помещения множества цветных точек на кадр и отсл...</div><div class="ttdef"><b>Definition:</b> <a href="colored__point__handler_8h_source.html#l00026">colored_point_handler.h:27</a></div></div>
<div class="ttc" id="aclass_vibration_detector_html_a779ca47185d36d5fe0cf216c1cb9f48e"><div class="ttname"><a href="class_vibration_detector.html#a779ca47185d36d5fe0cf216c1cb9f48e">VibrationDetector::fps_</a></div><div class="ttdeci">int fps_</div><div class="ttdoc">ФПС входного видео (две ширины полосы частот вибрации, которые можно отследить)</div><div class="ttdef"><b>Definition:</b> <a href="vibration__detector_8h_source.html#l00281">vibration_detector.h:281</a></div></div>
<div class="ttc" id="aclass_vibration_detector_html_add86750dfd1683f09410d3fe3822a950"><div class="ttname"><a href="class_vibration_detector.html#add86750dfd1683f09410d3fe3822a950">VibrationDetector::vec_colored_point_handlers_</a></div><div class="ttdeci">std::vector&lt; ColoredPointHandler * &gt; vec_colored_point_handlers_</div><div class="ttdoc">Вектор обработчиков &quot;цветных&quot; точек</div><div class="ttdef"><b>Definition:</b> <a href="vibration__detector_8h_source.html#l00182">vibration_detector.h:182</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a176e5b0d0ca409c6cfcacdeca13240de" name="a176e5b0d0ca409c6cfcacdeca13240de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a176e5b0d0ca409c6cfcacdeca13240de">&#9670;&#160;</a></span>CreateNewPoint()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void VibrationDetector::CreateNewPoint </td>
          <td>(</td>
          <td class="paramtype">Point2f&#160;</td>
          <td class="paramname"><em>mouse_coordinates</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Создаем "обычную" точку </p>

<p class="definition">См. определение в файле <a class="el" href="vibration__detector_8cpp_source.html">vibration_detector.cpp</a> строка <a class="el" href="vibration__detector_8cpp_source.html#l00057">57</a></p>
<div class="fragment"><div class="line"><span class="lineno">   58</span>{</div>
<div class="line"><span class="lineno">   59</span>    <a class="code hl_class" href="class_lonely_point_handler.html">LonelyPointHandler</a>* point_handler_ = <span class="keyword">new</span> <a class="code hl_class" href="class_lonely_point_handler.html">LonelyPointHandler</a>(mouse_coordinates, <a class="code hl_variable" href="class_vibration_detector.html#a779ca47185d36d5fe0cf216c1cb9f48e">fps_</a>, <a class="code hl_variable" href="class_vibration_detector.html#af7093e56d2391aceaeb9d9cbd389eaaf">point_id_</a>++, <a class="code hl_variable" href="class_vibration_detector.html#a5c0d42618889da70c073056ba3e4065c">res_mp_</a>, <a class="code hl_variable" href="class_vibration_detector.html#adda01acf92ced4b8bfa5880bb475ce55">output_csv_file_name_</a>);</div>
<div class="line"><span class="lineno">   60</span>    <a class="code hl_variable" href="class_vibration_detector.html#a5085a389a0ff26924331ab5022eea1af">vec_lonely_point_handlers_</a>.push_back(point_handler_);</div>
<div class="line"><span class="lineno">   61</span>}</div>
<div class="ttc" id="aclass_lonely_point_handler_html"><div class="ttname"><a href="class_lonely_point_handler.html">LonelyPointHandler</a></div><div class="ttdoc">Дочерний (от VibratingPoint) класс. Предназначен для помещения точки на кадр и отслеживания её вибрац...</div><div class="ttdef"><b>Definition:</b> <a href="lonely__point__handler_8h_source.html#l00026">lonely_point_handler.h:27</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a21af0947bd97bcb37db8625516efcd9c" name="a21af0947bd97bcb37db8625516efcd9c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21af0947bd97bcb37db8625516efcd9c">&#9670;&#160;</a></span>DefaultModeHandler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void VibrationDetector::DefaultModeHandler </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>y</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Обычный режим </p>

<p class="definition">См. определение в файле <a class="el" href="vibration__detector_8cpp_source.html">vibration_detector.cpp</a> строка <a class="el" href="vibration__detector_8cpp_source.html#l00245">245</a></p>
<div class="fragment"><div class="line"><span class="lineno">  246</span>{</div>
<div class="line"><span class="lineno">  247</span>    <span class="keywordflow">switch</span> (event)</div>
<div class="line"><span class="lineno">  248</span>    {</div>
<div class="line"><span class="lineno">  249</span>    <span class="keywordflow">case</span> EVENT_LBUTTONDOWN:</div>
<div class="line"><span class="lineno">  250</span>    {</div>
<div class="line"><span class="lineno">  251</span>        <span class="comment">// Проверяем флаги выделения ROI и фигуры для варпа</span></div>
<div class="line"><span class="lineno">  252</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="class_vibration_detector.html#aacb53723f4a18df998738d0d54c5290b">roi_selecting_</a>)</div>
<div class="line"><span class="lineno">  253</span>        {</div>
<div class="line"><span class="lineno">  254</span>            <a class="code hl_variable" href="class_vibration_detector.html#a51842be0abc4ac57d3e07bbb7ff33d8e">l_click_queue_</a>.push_back(Point2i(x, y));</div>
<div class="line"><span class="lineno">  255</span>        }</div>
<div class="line"><span class="lineno">  256</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  257</span>    }</div>
<div class="line"><span class="lineno">  258</span>    <span class="keywordflow">case</span> EVENT_RBUTTONDOWN:</div>
<div class="line"><span class="lineno">  259</span>    {</div>
<div class="line"><span class="lineno">  260</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="class_vibration_detector.html#aacb53723f4a18df998738d0d54c5290b">roi_selecting_</a> &amp;&amp; !<a class="code hl_variable" href="class_vibration_detector.html#a3b8ea35de43e2702a889f8def948ece4">warping_figure_selecting_</a>)</div>
<div class="line"><span class="lineno">  261</span>            <a class="code hl_variable" href="class_vibration_detector.html#a290fb09835aef1220fc44485e0f391de">delete_queue_</a>.push_back(Point2i(x, y));</div>
<div class="line"><span class="lineno">  262</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  263</span>    }</div>
<div class="line"><span class="lineno">  264</span>    <span class="keywordflow">case</span> EVENT_MOUSEMOVE:</div>
<div class="line"><span class="lineno">  265</span>    {</div>
<div class="line"><span class="lineno">  266</span>        <span class="comment">// Координаты последнего перемещения мыши</span></div>
<div class="line"><span class="lineno">  267</span>        <a class="code hl_variable" href="class_vibration_detector.html#a69f64f7b483a4295abd6e5a48ab161ff">last_mouse_position_</a>.x = x;</div>
<div class="line"><span class="lineno">  268</span>        <a class="code hl_variable" href="class_vibration_detector.html#a69f64f7b483a4295abd6e5a48ab161ff">last_mouse_position_</a>.y = y;</div>
<div class="line"><span class="lineno">  269</span>    }</div>
<div class="line"><span class="lineno">  270</span>    }</div>
<div class="line"><span class="lineno">  271</span>}</div>
<div class="ttc" id="aclass_vibration_detector_html_a290fb09835aef1220fc44485e0f391de"><div class="ttname"><a href="class_vibration_detector.html#a290fb09835aef1220fc44485e0f391de">VibrationDetector::delete_queue_</a></div><div class="ttdeci">std::vector&lt; Point2i &gt; delete_queue_</div><div class="ttdoc">Очередь на удаление точек</div><div class="ttdef"><b>Definition:</b> <a href="vibration__detector_8h_source.html#l00170">vibration_detector.h:170</a></div></div>
<div class="ttc" id="aclass_vibration_detector_html_a51842be0abc4ac57d3e07bbb7ff33d8e"><div class="ttname"><a href="class_vibration_detector.html#a51842be0abc4ac57d3e07bbb7ff33d8e">VibrationDetector::l_click_queue_</a></div><div class="ttdeci">std::vector&lt; Point2i &gt; l_click_queue_</div><div class="ttdoc">Очередь на создание &quot;обычных&quot; точек</div><div class="ttdef"><b>Definition:</b> <a href="vibration__detector_8h_source.html#l00162">vibration_detector.h:162</a></div></div>
<div class="ttc" id="aclass_vibration_detector_html_a69f64f7b483a4295abd6e5a48ab161ff"><div class="ttname"><a href="class_vibration_detector.html#a69f64f7b483a4295abd6e5a48ab161ff">VibrationDetector::last_mouse_position_</a></div><div class="ttdeci">Point last_mouse_position_</div><div class="ttdoc">Последняя позиция курсора в главном окне</div><div class="ttdef"><b>Definition:</b> <a href="vibration__detector_8h_source.html#l00146">vibration_detector.h:146</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab0f3c59d611f15ff9505429bcf2e45b7" name="ab0f3c59d611f15ff9505429bcf2e45b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0f3c59d611f15ff9505429bcf2e45b7">&#9670;&#160;</a></span>DeleteColoredPoints()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void VibrationDetector::DeleteColoredPoints </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Удаляем объекты "цветная" точка </p>

<p class="definition">См. определение в файле <a class="el" href="vibration__detector_8cpp_source.html">vibration_detector.cpp</a> строка <a class="el" href="vibration__detector_8cpp_source.html#l00177">177</a></p>
<div class="fragment"><div class="line"><span class="lineno">  178</span>{</div>
<div class="line"><span class="lineno">  179</span>    <span class="comment">// Проходимся по вектору хэндлеров</span></div>
<div class="line"><span class="lineno">  180</span>    <span class="keywordflow">while</span> (!<a class="code hl_variable" href="class_vibration_detector.html#add86750dfd1683f09410d3fe3822a950">vec_colored_point_handlers_</a>.empty())</div>
<div class="line"><span class="lineno">  181</span>    {</div>
<div class="line"><span class="lineno">  182</span>        <span class="keyword">delete</span>(*(std::begin(<a class="code hl_variable" href="class_vibration_detector.html#add86750dfd1683f09410d3fe3822a950">vec_colored_point_handlers_</a>)));</div>
<div class="line"><span class="lineno">  183</span>        <span class="comment">// удаляем первую точку (первую в векторе и по сути первую по номеру)</span></div>
<div class="line"><span class="lineno">  184</span>        <a class="code hl_variable" href="class_vibration_detector.html#add86750dfd1683f09410d3fe3822a950">vec_colored_point_handlers_</a>.erase(std::begin(<a class="code hl_variable" href="class_vibration_detector.html#add86750dfd1683f09410d3fe3822a950">vec_colored_point_handlers_</a>));</div>
<div class="line"><span class="lineno">  185</span>    }</div>
<div class="line"><span class="lineno">  186</span> </div>
<div class="line"><span class="lineno">  187</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_vibration_detector.html#a5085a389a0ff26924331ab5022eea1af">vec_lonely_point_handlers_</a>.empty())</div>
<div class="line"><span class="lineno">  188</span>    {</div>
<div class="line"><span class="lineno">  189</span>        <a class="code hl_variable" href="class_vibrating_point.html#afdefa096df21cf891ae6835a6df4ffc9">VibratingPoint::extremum_amplitude_</a>.first = 0.0;</div>
<div class="line"><span class="lineno">  190</span>        <a class="code hl_variable" href="class_vibrating_point.html#afdefa096df21cf891ae6835a6df4ffc9">VibratingPoint::extremum_amplitude_</a>.second = 500.0;</div>
<div class="line"><span class="lineno">  191</span>    }</div>
<div class="line"><span class="lineno">  192</span>}</div>
<div class="ttc" id="aclass_vibrating_point_html_afdefa096df21cf891ae6835a6df4ffc9"><div class="ttname"><a href="class_vibrating_point.html#afdefa096df21cf891ae6835a6df4ffc9">VibratingPoint::extremum_amplitude_</a></div><div class="ttdeci">static std::pair&lt; double, double &gt; extremum_amplitude_</div><div class="ttdoc">Максимум и минимум амплитуды среди всех VibratingPoint объектов-наследников</div><div class="ttdef"><b>Definition:</b> <a href="vibrating__point_8h_source.html#l00106">vibrating_point.h:106</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6c1ef9b4b8a5a8f2159398a05571c410" name="a6c1ef9b4b8a5a8f2159398a05571c410"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c1ef9b4b8a5a8f2159398a05571c410">&#9670;&#160;</a></span>DeletePoints()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void VibrationDetector::DeletePoints </td>
          <td>(</td>
          <td class="paramtype">Point2i&#160;</td>
          <td class="paramname"><em>mouse_coordinates</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Удаляем объект "обычную" точку </p>

<p class="definition">См. определение в файле <a class="el" href="vibration__detector_8cpp_source.html">vibration_detector.cpp</a> строка <a class="el" href="vibration__detector_8cpp_source.html#l00114">114</a></p>
<div class="fragment"><div class="line"><span class="lineno">  115</span>{</div>
<div class="line"><span class="lineno">  116</span>    <span class="comment">// создаем вектор ID (номеров) для точек, которые удалим</span></div>
<div class="line"><span class="lineno">  117</span>    std::vector&lt;int&gt; lon_point_ids_to_be_deleted_;</div>
<div class="line"><span class="lineno">  118</span>    std::vector&lt;int&gt; col_point_ids_to_be_deleted_;</div>
<div class="line"><span class="lineno">  119</span> </div>
<div class="line"><span class="lineno">  120</span>    <span class="comment">// проходим по всему вектору точек</span></div>
<div class="line"><span class="lineno">  121</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_variable" href="class_vibration_detector.html#a5085a389a0ff26924331ab5022eea1af">vec_lonely_point_handlers_</a>.size(); i++)</div>
<div class="line"><span class="lineno">  122</span>    {</div>
<div class="line"><span class="lineno">  123</span>        <span class="comment">// если произошло пересечение с мышкой, вносим ID (номер) точки в &quot;вектор точек на удаление&quot; или уровень доверия&quot; точки стал слишком маленький, так же удаляем точку</span></div>
<div class="line"><span class="lineno">  124</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_vibration_detector.html#a5085a389a0ff26924331ab5022eea1af">vec_lonely_point_handlers_</a>[i]-&gt;<a class="code hl_function" href="class_vibrating_point.html#a342c75a6ac0f9ab85de1a0dd663eab03">VibratingPoint::IsInteracted</a>(mouse_coordinates))</div>
<div class="line"><span class="lineno">  125</span>        {</div>
<div class="line"><span class="lineno">  126</span>            lon_point_ids_to_be_deleted_.push_back(i);</div>
<div class="line"><span class="lineno">  127</span>        }</div>
<div class="line"><span class="lineno">  128</span>    }</div>
<div class="line"><span class="lineno">  129</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_variable" href="class_vibration_detector.html#add86750dfd1683f09410d3fe3822a950">vec_colored_point_handlers_</a>.size(); i++)</div>
<div class="line"><span class="lineno">  130</span>    {</div>
<div class="line"><span class="lineno">  131</span>        <span class="comment">// если произошло пересечение с мышкой, вносим ID (номер) точки в &quot;вектор точек на удаление&quot; или уровень доверия&quot; точки стал слишком маленький, так же удаляем точку</span></div>
<div class="line"><span class="lineno">  132</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_vibration_detector.html#add86750dfd1683f09410d3fe3822a950">vec_colored_point_handlers_</a>[i]-&gt;<a class="code hl_function" href="class_vibrating_point.html#a342c75a6ac0f9ab85de1a0dd663eab03">VibratingPoint::IsInteracted</a>(mouse_coordinates))</div>
<div class="line"><span class="lineno">  133</span>        {</div>
<div class="line"><span class="lineno">  134</span>            col_point_ids_to_be_deleted_.push_back(i);</div>
<div class="line"><span class="lineno">  135</span>        }</div>
<div class="line"><span class="lineno">  136</span>    }</div>
<div class="line"><span class="lineno">  137</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;DEBUG: deleting &quot;</span> &lt;&lt; lon_point_ids_to_be_deleted_.size() + col_point_ids_to_be_deleted_.size() &lt;&lt; <span class="stringliteral">&quot; point&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  138</span> </div>
<div class="line"><span class="lineno">  139</span>    <span class="comment">// проходимся по вектору точек на удаление</span></div>
<div class="line"><span class="lineno">  140</span>    <span class="keywordflow">while</span> (!lon_point_ids_to_be_deleted_.empty())</div>
<div class="line"><span class="lineno">  141</span>    {</div>
<div class="line"><span class="lineno">  142</span>        <span class="keyword">delete</span>(*(std::begin(<a class="code hl_variable" href="class_vibration_detector.html#a5085a389a0ff26924331ab5022eea1af">vec_lonely_point_handlers_</a>) + lon_point_ids_to_be_deleted_[0]));</div>
<div class="line"><span class="lineno">  143</span>        <span class="comment">// удаляем первую точку (первую в векторе и по сути первую по номеру)</span></div>
<div class="line"><span class="lineno">  144</span>        <a class="code hl_variable" href="class_vibration_detector.html#a5085a389a0ff26924331ab5022eea1af">vec_lonely_point_handlers_</a>.erase(std::begin(<a class="code hl_variable" href="class_vibration_detector.html#a5085a389a0ff26924331ab5022eea1af">vec_lonely_point_handlers_</a>) + lon_point_ids_to_be_deleted_[0]);</div>
<div class="line"><span class="lineno">  145</span>        <span class="comment">// удаляем номер только что удалённой точки из вектора</span></div>
<div class="line"><span class="lineno">  146</span>        lon_point_ids_to_be_deleted_.erase(std::begin(lon_point_ids_to_be_deleted_));</div>
<div class="line"><span class="lineno">  147</span>        <span class="comment">// меняем номера других точек в списке, если там ещё что-то есть</span></div>
<div class="line"><span class="lineno">  148</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; lon_point_ids_to_be_deleted_.size(); i++)</div>
<div class="line"><span class="lineno">  149</span>        {</div>
<div class="line"><span class="lineno">  150</span>            <span class="comment">// уменьшаем номер оставшихся в очереди на удаление точек на один, тк номера в vec_point_handlers сместились на один вниз (влево и тп, как удобнее для понимания :))</span></div>
<div class="line"><span class="lineno">  151</span>            lon_point_ids_to_be_deleted_[i] = lon_point_ids_to_be_deleted_[i] - 1;</div>
<div class="line"><span class="lineno">  152</span>        }</div>
<div class="line"><span class="lineno">  153</span>    }</div>
<div class="line"><span class="lineno">  154</span> </div>
<div class="line"><span class="lineno">  155</span>    <span class="keywordflow">while</span> (!col_point_ids_to_be_deleted_.empty())</div>
<div class="line"><span class="lineno">  156</span>    {</div>
<div class="line"><span class="lineno">  157</span>        <span class="keyword">delete</span>(*(std::begin(<a class="code hl_variable" href="class_vibration_detector.html#add86750dfd1683f09410d3fe3822a950">vec_colored_point_handlers_</a>) + col_point_ids_to_be_deleted_[0]));</div>
<div class="line"><span class="lineno">  158</span>        <span class="comment">// удаляем первую точку (первую в векторе и по сути первую по номеру)</span></div>
<div class="line"><span class="lineno">  159</span>        <a class="code hl_variable" href="class_vibration_detector.html#add86750dfd1683f09410d3fe3822a950">vec_colored_point_handlers_</a>.erase(std::begin(<a class="code hl_variable" href="class_vibration_detector.html#add86750dfd1683f09410d3fe3822a950">vec_colored_point_handlers_</a>) + col_point_ids_to_be_deleted_[0]);</div>
<div class="line"><span class="lineno">  160</span>        <span class="comment">// удаляем номер только что удалённой точки из вектора</span></div>
<div class="line"><span class="lineno">  161</span>        col_point_ids_to_be_deleted_.erase(std::begin(col_point_ids_to_be_deleted_));</div>
<div class="line"><span class="lineno">  162</span>        <span class="comment">// меняем номера других точек в списке, если там ещё что-то есть</span></div>
<div class="line"><span class="lineno">  163</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; col_point_ids_to_be_deleted_.size(); i++)</div>
<div class="line"><span class="lineno">  164</span>        {</div>
<div class="line"><span class="lineno">  165</span>            <span class="comment">// уменьшаем номер оставшихся в очереди на удаление точек на один, тк номера в vec_point_handlers сместились на один вниз (влево и тп, как удобнее для понимания :))</span></div>
<div class="line"><span class="lineno">  166</span>            col_point_ids_to_be_deleted_[i] = col_point_ids_to_be_deleted_[i] - 1;</div>
<div class="line"><span class="lineno">  167</span>        }</div>
<div class="line"><span class="lineno">  168</span>    }</div>
<div class="line"><span class="lineno">  169</span> </div>
<div class="line"><span class="lineno">  170</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_vibration_detector.html#a5085a389a0ff26924331ab5022eea1af">vec_lonely_point_handlers_</a>.empty())</div>
<div class="line"><span class="lineno">  171</span>    {</div>
<div class="line"><span class="lineno">  172</span>        <a class="code hl_variable" href="class_vibrating_point.html#afdefa096df21cf891ae6835a6df4ffc9">VibratingPoint::extremum_amplitude_</a>.first = 0.0;</div>
<div class="line"><span class="lineno">  173</span>        <a class="code hl_variable" href="class_vibrating_point.html#afdefa096df21cf891ae6835a6df4ffc9">VibratingPoint::extremum_amplitude_</a>.second = 500.0;</div>
<div class="line"><span class="lineno">  174</span>    }</div>
<div class="line"><span class="lineno">  175</span>}</div>
<div class="ttc" id="aclass_vibrating_point_html_a342c75a6ac0f9ab85de1a0dd663eab03"><div class="ttname"><a href="class_vibrating_point.html#a342c75a6ac0f9ab85de1a0dd663eab03">VibratingPoint::IsInteracted</a></div><div class="ttdeci">bool IsInteracted(Point2i coordinates)</div><div class="ttdoc">Проверяет точку на наличие взаимодействия с ней (если курсор попал в область взаимодействия точки Vib...</div><div class="ttdef"><b>Definition:</b> <a href="vibrating__point_8cpp_source.html#l00165">vibrating_point.cpp:165</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7b586f40cc32c90aef3467d2c906758a" name="a7b586f40cc32c90aef3467d2c906758a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b586f40cc32c90aef3467d2c906758a">&#9670;&#160;</a></span>DetectEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void VibrationDetector::DetectEvent </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>callback functions for detecting the click </p>

<p class="definition">См. определение в файле <a class="el" href="vibration__detector_8cpp_source.html">vibration_detector.cpp</a> строка <a class="el" href="vibration__detector_8cpp_source.html#l00224">224</a></p>
<div class="fragment"><div class="line"><span class="lineno">  225</span>{</div>
<div class="line"><span class="lineno">  226</span>    <span class="keywordflow">switch</span> (<a class="code hl_variable" href="class_vibration_detector.html#ad3748489d876505deab724e16cf1e767">current_mode_</a>)</div>
<div class="line"><span class="lineno">  227</span>    {</div>
<div class="line"><span class="lineno">  228</span>    <span class="keywordflow">case</span> DEFAULT:</div>
<div class="line"><span class="lineno">  229</span>    {</div>
<div class="line"><span class="lineno">  230</span>        <a class="code hl_function" href="class_vibration_detector.html#a21af0947bd97bcb37db8625516efcd9c">DefaultModeHandler</a>(event, x, y);</div>
<div class="line"><span class="lineno">  231</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  232</span>    }</div>
<div class="line"><span class="lineno">  233</span>    <span class="keywordflow">case</span> SELECTINGROI:</div>
<div class="line"><span class="lineno">  234</span>    {</div>
<div class="line"><span class="lineno">  235</span>        <a class="code hl_function" href="class_vibration_detector.html#a30c131133b8faa624d16839036c2a046">RoiSelectionModeHandler</a>(event, x, y);</div>
<div class="line"><span class="lineno">  236</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  237</span>    }</div>
<div class="line"><span class="lineno">  238</span>    <span class="keywordflow">case</span> PAUSE:</div>
<div class="line"><span class="lineno">  239</span>    {</div>
<div class="line"><span class="lineno">  240</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  241</span>    }</div>
<div class="line"><span class="lineno">  242</span>    }</div>
<div class="line"><span class="lineno">  243</span>}</div>
<div class="ttc" id="aclass_vibration_detector_html_a21af0947bd97bcb37db8625516efcd9c"><div class="ttname"><a href="class_vibration_detector.html#a21af0947bd97bcb37db8625516efcd9c">VibrationDetector::DefaultModeHandler</a></div><div class="ttdeci">void DefaultModeHandler(int event, int x, int y)</div><div class="ttdoc">Обычный режим</div><div class="ttdef"><b>Definition:</b> <a href="vibration__detector_8cpp_source.html#l00245">vibration_detector.cpp:245</a></div></div>
<div class="ttc" id="aclass_vibration_detector_html_a30c131133b8faa624d16839036c2a046"><div class="ttname"><a href="class_vibration_detector.html#a30c131133b8faa624d16839036c2a046">VibrationDetector::RoiSelectionModeHandler</a></div><div class="ttdeci">void RoiSelectionModeHandler(int event, int x, int y)</div><div class="ttdoc">Режим выделения региона интереса</div><div class="ttdef"><b>Definition:</b> <a href="vibration__detector_8cpp_source.html#l00272">vibration_detector.cpp:272</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad8741b76c24a08ec2ce54ff9d934ce76" name="ad8741b76c24a08ec2ce54ff9d934ce76"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8741b76c24a08ec2ce54ff9d934ce76">&#9670;&#160;</a></span>DrawAndOutput()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void VibrationDetector::DrawAndOutput </td>
          <td>(</td>
          <td class="paramtype">Mat &amp;&#160;</td>
          <td class="paramname"><em>frame</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Масштабирует, рисует и выводит на экран обработанный кадр с точками </p>

<p class="definition">См. определение в файле <a class="el" href="vibration__detector_8cpp_source.html">vibration_detector.cpp</a> строка <a class="el" href="vibration__detector_8cpp_source.html#l00465">465</a></p>
<div class="fragment"><div class="line"><span class="lineno">  466</span>{</div>
<div class="line"><span class="lineno">  467</span>    <span class="comment">// Рассматриваем вариант, при котором выбран ROI для цветных (colored) точек</span></div>
<div class="line"><span class="lineno">  468</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_vibration_detector.html#afd9f8f38bcde73bb14c9cf643f270d36">roi_selected_</a>)</div>
<div class="line"><span class="lineno">  469</span>    {</div>
<div class="line"><span class="lineno">  470</span>        <span class="comment">// Перемещение изображение на переднем плане на X единиц (px)</span></div>
<div class="line"><span class="lineno">  471</span>        <span class="keywordtype">int</span> x_translation = frame.cols - <a class="code hl_variable" href="class_vibration_detector.html#a41634272ca48ff33bf21b39d11559eaa">grad_scale_</a>.cols;</div>
<div class="line"><span class="lineno">  472</span>        <span class="comment">// Перемещение изображение на переднем плане на Y единиц (px)</span></div>
<div class="line"><span class="lineno">  473</span>        <span class="keywordtype">int</span> y_translation = frame.rows - <a class="code hl_variable" href="class_vibration_detector.html#a41634272ca48ff33bf21b39d11559eaa">grad_scale_</a>.rows;</div>
<div class="line"><span class="lineno">  474</span>        <span class="comment">// Вектор этого перемещения</span></div>
<div class="line"><span class="lineno">  475</span>        Point2i translation_vector = Point2i(x_translation, y_translation);</div>
<div class="line"><span class="lineno">  476</span>        <span class="comment">// Вставляем градиент на кадр</span></div>
<div class="line"><span class="lineno">  477</span>        frame = <a class="code hl_variable" href="class_vibration_detector.html#a57b58c6da673cafcca839e5f48d9045c">frame_handler</a>-&gt;<a class="code hl_function" href="class_frame_handler.html#a7c33b8ad150344db93c24d29bbabd853">PutFrameOverFrame</a>(<a class="code hl_variable" href="class_vibration_detector.html#a41634272ca48ff33bf21b39d11559eaa">grad_scale_</a>, frame, translation_vector);</div>
<div class="line"><span class="lineno">  478</span>    }</div>
<div class="line"><span class="lineno">  479</span>    <span class="comment">// Масштабируем кадр для вывода на экран и добавляем на него подсказки для пользователя</span></div>
<div class="line"><span class="lineno">  480</span>    frame.copyTo(<a class="code hl_variable" href="class_vibration_detector.html#ace1d4e3045fea22507c11b44cc6fb920">frame_to_be_shown_</a>);</div>
<div class="line"><span class="lineno">  481</span>    <a class="code hl_variable" href="class_vibration_detector.html#ace1d4e3045fea22507c11b44cc6fb920">frame_to_be_shown_</a> = <a class="code hl_variable" href="class_vibration_detector.html#a57b58c6da673cafcca839e5f48d9045c">frame_handler</a>-&gt;<a class="code hl_function" href="class_frame_handler.html#a13af7fdd06b373db04ece2adc6e62d14">AddTips</a>(<a class="code hl_variable" href="class_vibration_detector.html#ace1d4e3045fea22507c11b44cc6fb920">frame_to_be_shown_</a>, <a class="code hl_variable" href="class_vibration_detector.html#ad3748489d876505deab724e16cf1e767">current_mode_</a>);</div>
<div class="line"><span class="lineno">  482</span>    <span class="comment">// Выводим кадр на экран</span></div>
<div class="line"><span class="lineno">  483</span>    <a class="code hl_variable" href="class_vibration_detector.html#a57b58c6da673cafcca839e5f48d9045c">frame_handler</a>-&gt;<a class="code hl_function" href="class_frame_handler.html#a194e20bc41e1d8bb849dc6666f182202">ShowFrame</a>(<a class="code hl_variable" href="class_vibration_detector.html#ace1d4e3045fea22507c11b44cc6fb920">frame_to_be_shown_</a>, <a class="code hl_variable" href="class_vibration_detector.html#a49b64f3fe433f06af9444e8059d0cbc6">fullscreen_</a>);</div>
<div class="line"><span class="lineno">  484</span>}</div>
<div class="ttc" id="aclass_frame_handler_html_a13af7fdd06b373db04ece2adc6e62d14"><div class="ttname"><a href="class_frame_handler.html#a13af7fdd06b373db04ece2adc6e62d14">FrameHandler::AddTips</a></div><div class="ttdeci">Mat AddTips(Mat frame, int mode)</div><div class="ttdoc">Добавляет (отрисовывает) подсказки для пользователя на кадр</div><div class="ttdef"><b>Definition:</b> <a href="frame__handler_8cpp_source.html#l00201">frame_handler.cpp:201</a></div></div>
<div class="ttc" id="aclass_frame_handler_html_a194e20bc41e1d8bb849dc6666f182202"><div class="ttname"><a href="class_frame_handler.html#a194e20bc41e1d8bb849dc6666f182202">FrameHandler::ShowFrame</a></div><div class="ttdeci">void ShowFrame(Mat frame, bool fullscreen)</div><div class="ttdoc">Выводит в главное окно принимаемое изображение</div><div class="ttdef"><b>Definition:</b> <a href="frame__handler_8cpp_source.html#l00046">frame_handler.cpp:46</a></div></div>
<div class="ttc" id="aclass_frame_handler_html_a7c33b8ad150344db93c24d29bbabd853"><div class="ttname"><a href="class_frame_handler.html#a7c33b8ad150344db93c24d29bbabd853">FrameHandler::PutFrameOverFrame</a></div><div class="ttdeci">Mat PutFrameOverFrame(Mat foreground_frame, Mat background_frame, Point2i translation_vector)</div><div class="ttdoc">Накладывает изображение (переднний план) на другое изображение (задний план)</div><div class="ttdef"><b>Definition:</b> <a href="frame__handler_8cpp_source.html#l00087">frame_handler.cpp:87</a></div></div>
<div class="ttc" id="aclass_vibration_detector_html_a41634272ca48ff33bf21b39d11559eaa"><div class="ttname"><a href="class_vibration_detector.html#a41634272ca48ff33bf21b39d11559eaa">VibrationDetector::grad_scale_</a></div><div class="ttdeci">Mat grad_scale_</div><div class="ttdoc">Изображение цветной шкалы внизу экрана</div><div class="ttdef"><b>Definition:</b> <a href="vibration__detector_8h_source.html#l00209">vibration_detector.h:209</a></div></div>
<div class="ttc" id="aclass_vibration_detector_html_ace1d4e3045fea22507c11b44cc6fb920"><div class="ttname"><a href="class_vibration_detector.html#ace1d4e3045fea22507c11b44cc6fb920">VibrationDetector::frame_to_be_shown_</a></div><div class="ttdeci">Mat frame_to_be_shown_</div><div class="ttdoc">Mat-instance, который будет показан в окне</div><div class="ttdef"><b>Definition:</b> <a href="vibration__detector_8h_source.html#l00204">vibration_detector.h:204</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad99686383d8b80d106ae486a085b092c" name="ad99686383d8b80d106ae486a085b092c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad99686383d8b80d106ae486a085b092c">&#9670;&#160;</a></span>DrawDebugLkWinRectangle()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void VibrationDetector::DrawDebugLkWinRectangle </td>
          <td>(</td>
          <td class="paramtype">Mat &amp;&#160;</td>
          <td class="paramname"><em>frame</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Рисует точки и выводит данные </p>

<p class="definition">См. определение в файле <a class="el" href="vibration__detector_8cpp_source.html">vibration_detector.cpp</a> строка <a class="el" href="vibration__detector_8cpp_source.html#l00487">487</a></p>
<div class="fragment"><div class="line"><span class="lineno">  488</span>{</div>
<div class="line"><span class="lineno">  489</span> </div>
<div class="line"><span class="lineno">  490</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_variable" href="class_vibration_detector.html#a5085a389a0ff26924331ab5022eea1af">vec_lonely_point_handlers_</a>.size(); i++)</div>
<div class="line"><span class="lineno">  491</span>    {</div>
<div class="line"><span class="lineno">  492</span>        <span class="comment">// DEBUG</span></div>
<div class="line"><span class="lineno">  493</span>        Rect debug_lk_win_size = Rect(</div>
<div class="line"><span class="lineno">  494</span>            Point2i(<a class="code hl_variable" href="class_vibration_detector.html#a5085a389a0ff26924331ab5022eea1af">vec_lonely_point_handlers_</a>[i]-&gt;GetLastFoundCoordinates().x - <a class="code hl_variable" href="class_vibration_detector.html#abc8267e01dbf92e742db792c530e490a">lk_win_size_</a>, <a class="code hl_variable" href="class_vibration_detector.html#a5085a389a0ff26924331ab5022eea1af">vec_lonely_point_handlers_</a>[i]-&gt;GetLastFoundCoordinates().y - <a class="code hl_variable" href="class_vibration_detector.html#abc8267e01dbf92e742db792c530e490a">lk_win_size_</a>),</div>
<div class="line"><span class="lineno">  495</span>            Point2i(<a class="code hl_variable" href="class_vibration_detector.html#a5085a389a0ff26924331ab5022eea1af">vec_lonely_point_handlers_</a>[i]-&gt;GetLastFoundCoordinates().x + <a class="code hl_variable" href="class_vibration_detector.html#abc8267e01dbf92e742db792c530e490a">lk_win_size_</a>, <a class="code hl_variable" href="class_vibration_detector.html#a5085a389a0ff26924331ab5022eea1af">vec_lonely_point_handlers_</a>[i]-&gt;GetLastFoundCoordinates().y + <a class="code hl_variable" href="class_vibration_detector.html#abc8267e01dbf92e742db792c530e490a">lk_win_size_</a>)</div>
<div class="line"><span class="lineno">  496</span>        );</div>
<div class="line"><span class="lineno">  497</span>        rectangle(frame, debug_lk_win_size, Scalar(0, 0, 255), 1);</div>
<div class="line"><span class="lineno">  498</span>    }</div>
<div class="line"><span class="lineno">  499</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ae93a14aa147af694a90c012f16efc924" name="ae93a14aa147af694a90c012f16efc924"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae93a14aa147af694a90c012f16efc924">&#9670;&#160;</a></span>ExecuteVibrationDetection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VibrationDetector::ExecuteVibrationDetection </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Выполняет детекцию вибрации </p>

<p class="definition">См. определение в файле <a class="el" href="vibration__detector_8cpp_source.html">vibration_detector.cpp</a> строка <a class="el" href="vibration__detector_8cpp_source.html#l00501">501</a></p>
<div class="fragment"><div class="line"><span class="lineno">  502</span>{</div>
<div class="line"><span class="lineno">  504</span>    <a class="code hl_variable" href="class_vibrating_point.html#afdefa096df21cf891ae6835a6df4ffc9">VibratingPoint::extremum_amplitude_</a>.first = 0.0;</div>
<div class="line"><span class="lineno">  505</span>    <a class="code hl_variable" href="class_vibrating_point.html#afdefa096df21cf891ae6835a6df4ffc9">VibratingPoint::extremum_amplitude_</a>.second = 500.0;</div>
<div class="line"><span class="lineno">  507</span> </div>
<div class="line"><span class="lineno">  508</span>    <span class="comment">// reading the first frame of sequence so we can convert it to gray color space</span></div>
<div class="line"><span class="lineno">  509</span>    <a class="code hl_variable" href="class_vibration_detector.html#a57b58c6da673cafcca839e5f48d9045c">frame_handler</a>-&gt;<a class="code hl_function" href="class_frame_handler.html#a3837bca5a13d8e1e4969edf0d831baf3">ReadNextFrame</a>();</div>
<div class="line"><span class="lineno">  510</span>    <a class="code hl_variable" href="class_vibration_detector.html#a3c823c70560e24ce3e8484ae25440357">current_tracking_frame_</a> = <a class="code hl_variable" href="class_vibration_detector.html#a57b58c6da673cafcca839e5f48d9045c">frame_handler</a>-&gt;<a class="code hl_function" href="class_frame_handler.html#a26b5695df6161f00af36210e4d3d78ad">GetCurrentFrame</a>();</div>
<div class="line"><span class="lineno">  511</span> </div>
<div class="line"><span class="lineno">  512</span>    <a class="code hl_variable" href="class_vibration_detector.html#a3c524b0b7ab0348fe4fb6018f64b4dcf">prev_img_gray_</a> = <a class="code hl_variable" href="class_vibration_detector.html#a57b58c6da673cafcca839e5f48d9045c">frame_handler</a>-&gt;<a class="code hl_function" href="class_frame_handler.html#a4bd1108adbbd4c21c4c3233efa8c8d1e">MakeGrayFrame</a>(<a class="code hl_variable" href="class_vibration_detector.html#a3c823c70560e24ce3e8484ae25440357">current_tracking_frame_</a>);</div>
<div class="line"><span class="lineno">  513</span>    <a class="code hl_variable" href="class_vibration_detector.html#a779ca47185d36d5fe0cf216c1cb9f48e">fps_</a> = <a class="code hl_variable" href="class_vibration_detector.html#a57b58c6da673cafcca839e5f48d9045c">frame_handler</a>-&gt;<a class="code hl_function" href="class_frame_handler.html#a7871807bfd918b88272a175aa33ea165">GetInputFps</a>();</div>
<div class="line"><span class="lineno">  514</span> </div>
<div class="line"><span class="lineno">  515</span>    <span class="comment">// Генерируем шкалу</span></div>
<div class="line"><span class="lineno">  516</span>    <a class="code hl_variable" href="class_vibration_detector.html#a41634272ca48ff33bf21b39d11559eaa">grad_scale_</a> = <a class="code hl_variable" href="class_vibration_detector.html#a57b58c6da673cafcca839e5f48d9045c">frame_handler</a>-&gt;<a class="code hl_function" href="class_frame_handler.html#ac586501514225a9e054845c69fe9ccc7">GenerateGradScale</a>(0, <a class="code hl_variable" href="class_vibration_detector.html#a779ca47185d36d5fe0cf216c1cb9f48e">fps_</a> / 2, <a class="code hl_variable" href="class_vibration_detector.html#af75ebe29dd6955ae7a249c4c854c2657">colored_point_mode_</a>);</div>
<div class="line"><span class="lineno">  517</span> </div>
<div class="line"><span class="lineno">  518</span>    <span class="comment">// conditions of exit</span></div>
<div class="line"><span class="lineno">  519</span>    <a class="code hl_variable" href="class_vibration_detector.html#ab0fa5fb784f1db6bdb7a9d9e5d608bb3">running_</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  520</span>    <span class="keywordtype">int</span> current_num_of_frame = 0;</div>
<div class="line"><span class="lineno">  521</span>    <span class="keywordtype">int</span> amount_of_frames = <a class="code hl_variable" href="class_vibration_detector.html#a57b58c6da673cafcca839e5f48d9045c">frame_handler</a>-&gt;<a class="code hl_function" href="class_frame_handler.html#a0a926273fbb3a3901c9a5a75e3380e16">GetAmountOfFrames</a>();</div>
<div class="line"><span class="lineno">  522</span> </div>
<div class="line"><span class="lineno">  523</span>    <span class="comment">// устанавливаем callback handler на основное окно</span></div>
<div class="line"><span class="lineno">  524</span>    setMouseCallback(<a class="code hl_variable" href="class_vibration_detector.html#a57b58c6da673cafcca839e5f48d9045c">frame_handler</a>-&gt;<a class="code hl_function" href="class_frame_handler.html#a115a1da50a8bc1b00d703b6f8c44222b">GetMainWindowName</a>(), <a class="code hl_function" href="class_vibration_detector.html#a3596d10b3b4e68b7c4151631fbb7aeb1">OnMouse</a>, (<span class="keywordtype">void</span>*)<span class="keyword">this</span>);</div>
<div class="line"><span class="lineno">  525</span> </div>
<div class="line"><span class="lineno">  526</span>    <span class="keywordflow">while</span> ((current_num_of_frame &lt; amount_of_frames - 1) &amp;&amp; <a class="code hl_variable" href="class_vibration_detector.html#ab0fa5fb784f1db6bdb7a9d9e5d608bb3">running_</a> == <span class="keyword">true</span>)</div>
<div class="line"><span class="lineno">  527</span>    {</div>
<div class="line"><span class="lineno">  528</span>        current_num_of_frame = <a class="code hl_variable" href="class_vibration_detector.html#a57b58c6da673cafcca839e5f48d9045c">frame_handler</a>-&gt;<a class="code hl_function" href="class_frame_handler.html#a79ab90b6a2ce7ea8fef695a11bef514c">GetCurrentPosOfFrame</a>();</div>
<div class="line"><span class="lineno">  529</span> </div>
<div class="line"><span class="lineno">  530</span>        <span class="comment">// reading next frame and converting it to gray color space</span></div>
<div class="line"><span class="lineno">  531</span>        <a class="code hl_variable" href="class_vibration_detector.html#a57b58c6da673cafcca839e5f48d9045c">frame_handler</a>-&gt;<a class="code hl_function" href="class_frame_handler.html#a3837bca5a13d8e1e4969edf0d831baf3">ReadNextFrame</a>();</div>
<div class="line"><span class="lineno">  532</span> </div>
<div class="line"><span class="lineno">  533</span>        <a class="code hl_variable" href="class_vibration_detector.html#a3c823c70560e24ce3e8484ae25440357">current_tracking_frame_</a> = <a class="code hl_variable" href="class_vibration_detector.html#a57b58c6da673cafcca839e5f48d9045c">frame_handler</a>-&gt;<a class="code hl_function" href="class_frame_handler.html#a26b5695df6161f00af36210e4d3d78ad">GetCurrentFrame</a>();</div>
<div class="line"><span class="lineno">  534</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="class_vibration_detector.html#a901927a4199f5bf914675f19cae9a651">warping_figure_</a>.empty())</div>
<div class="line"><span class="lineno">  535</span>        {</div>
<div class="line"><span class="lineno">  536</span>            <a class="code hl_variable" href="class_vibration_detector.html#a3c823c70560e24ce3e8484ae25440357">current_tracking_frame_</a> = <a class="code hl_function" href="class_vibration_detector.html#ae2fadec69d259a03125901ad988e7137">MakeWarpedFrame</a>(<a class="code hl_variable" href="class_vibration_detector.html#a3c823c70560e24ce3e8484ae25440357">current_tracking_frame_</a>, <a class="code hl_variable" href="class_vibration_detector.html#a901927a4199f5bf914675f19cae9a651">warping_figure_</a>);</div>
<div class="line"><span class="lineno">  537</span>        }</div>
<div class="line"><span class="lineno">  538</span> </div>
<div class="line"><span class="lineno">  539</span>        <a class="code hl_variable" href="class_vibration_detector.html#a016d906a3746e6d61b9468c7127a717f">next_img_gray_</a> = <a class="code hl_variable" href="class_vibration_detector.html#a57b58c6da673cafcca839e5f48d9045c">frame_handler</a>-&gt;<a class="code hl_function" href="class_frame_handler.html#a4bd1108adbbd4c21c4c3233efa8c8d1e">MakeGrayFrame</a>(<a class="code hl_variable" href="class_vibration_detector.html#a3c823c70560e24ce3e8484ae25440357">current_tracking_frame_</a>);</div>
<div class="line"><span class="lineno">  540</span> </div>
<div class="line"><span class="lineno">  541</span>        <span class="comment">// Трекинг и вычисление частоты вибрации</span></div>
<div class="line"><span class="lineno">  542</span>        <a class="code hl_variable" href="class_vibration_detector.html#a4cf6c4a052388d4fb17ec01815bc0bbe">frame_time_</a> = <a class="code hl_variable" href="class_vibration_detector.html#a57b58c6da673cafcca839e5f48d9045c">frame_handler</a>-&gt;<a class="code hl_function" href="class_frame_handler.html#a61109313b6d4a9a21783a9c7b66dea68">GetCurrentTimeOfFrame</a>();</div>
<div class="line"><span class="lineno">  543</span> </div>
<div class="line"><span class="lineno">  544</span>        <a class="code hl_function" href="class_vibration_detector.html#a81f38d7f3d0599b01186a122d68d09ee">TrackAndCalc</a>();</div>
<div class="line"><span class="lineno">  545</span> </div>
<div class="line"><span class="lineno">  546</span>        <span class="comment">// Рисование точек, треков и данных (вибрации, амплитуды и т.п.)</span></div>
<div class="line"><span class="lineno">  547</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_variable" href="class_vibration_detector.html#a5085a389a0ff26924331ab5022eea1af">vec_lonely_point_handlers_</a>.size(); i++)</div>
<div class="line"><span class="lineno">  548</span>        {</div>
<div class="line"><span class="lineno">  549</span>            <a class="code hl_variable" href="class_vibration_detector.html#a5085a389a0ff26924331ab5022eea1af">vec_lonely_point_handlers_</a>[i]-&gt;VibratingPoint::IsInteracted(<a class="code hl_variable" href="class_vibration_detector.html#a69f64f7b483a4295abd6e5a48ab161ff">last_mouse_position_</a>);</div>
<div class="line"><span class="lineno">  550</span>            <a class="code hl_variable" href="class_vibration_detector.html#a5085a389a0ff26924331ab5022eea1af">vec_lonely_point_handlers_</a>[i]-&gt;Draw(<a class="code hl_variable" href="class_vibration_detector.html#a3c823c70560e24ce3e8484ae25440357">current_tracking_frame_</a>);</div>
<div class="line"><span class="lineno">  551</span>        }</div>
<div class="line"><span class="lineno">  552</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_variable" href="class_vibration_detector.html#add86750dfd1683f09410d3fe3822a950">vec_colored_point_handlers_</a>.size(); i++)</div>
<div class="line"><span class="lineno">  553</span>        {</div>
<div class="line"><span class="lineno">  554</span>            <span class="comment">// Обновляем максимальную амплитуду</span></div>
<div class="line"><span class="lineno">  555</span>            <a class="code hl_variable" href="class_vibration_detector.html#add86750dfd1683f09410d3fe3822a950">vec_colored_point_handlers_</a>[i]-&gt;VibratingPoint::IsInteracted(<a class="code hl_variable" href="class_vibration_detector.html#a69f64f7b483a4295abd6e5a48ab161ff">last_mouse_position_</a>);</div>
<div class="line"><span class="lineno">  556</span>            <a class="code hl_variable" href="class_vibration_detector.html#add86750dfd1683f09410d3fe3822a950">vec_colored_point_handlers_</a>[i]-&gt;SetColoringMode(<a class="code hl_variable" href="class_vibration_detector.html#af75ebe29dd6955ae7a249c4c854c2657">colored_point_mode_</a>);</div>
<div class="line"><span class="lineno">  557</span>            <a class="code hl_variable" href="class_vibration_detector.html#add86750dfd1683f09410d3fe3822a950">vec_colored_point_handlers_</a>[i]-&gt;Draw(<a class="code hl_variable" href="class_vibration_detector.html#a3c823c70560e24ce3e8484ae25440357">current_tracking_frame_</a>);</div>
<div class="line"><span class="lineno">  558</span>        }</div>
<div class="line"><span class="lineno">  559</span> </div>
<div class="line"><span class="lineno">  560</span>        <span class="comment">// обслуживаем и очищаем очереди на создание и удаление точек</span></div>
<div class="line"><span class="lineno">  561</span>        <a class="code hl_function" href="class_vibration_detector.html#af1da28823c948acc115fc862378b62d8">ServeTheQueues</a>();</div>
<div class="line"><span class="lineno">  562</span> </div>
<div class="line"><span class="lineno">  563</span>        <a class="code hl_function" href="class_vibration_detector.html#ad8741b76c24a08ec2ce54ff9d934ce76">DrawAndOutput</a>(<a class="code hl_variable" href="class_vibration_detector.html#a3c823c70560e24ce3e8484ae25440357">current_tracking_frame_</a>);</div>
<div class="line"><span class="lineno">  564</span> </div>
<div class="line"><span class="lineno">  565</span>        <span class="comment">// Записываем изначальный кадр</span></div>
<div class="line"><span class="lineno">  566</span>        <a class="code hl_variable" href="class_vibration_detector.html#a57b58c6da673cafcca839e5f48d9045c">frame_handler</a>-&gt;<a class="code hl_function" href="class_frame_handler.html#a43fe77a59e8e5d99f7bb0ad3499591ef">WriteFrame</a>(<a class="code hl_variable" href="class_vibration_detector.html#a3c823c70560e24ce3e8484ae25440357">current_tracking_frame_</a>);</div>
<div class="line"><span class="lineno">  567</span> </div>
<div class="line"><span class="lineno">  568</span>        <span class="comment">// Обновляем предыдущий кадр</span></div>
<div class="line"><span class="lineno">  569</span>        <a class="code hl_variable" href="class_vibration_detector.html#a3c524b0b7ab0348fe4fb6018f64b4dcf">prev_img_gray_</a> = <a class="code hl_variable" href="class_vibration_detector.html#a016d906a3746e6d61b9468c7127a717f">next_img_gray_</a>;</div>
<div class="line"><span class="lineno">  570</span> </div>
<div class="line"><span class="lineno">  571</span>        <span class="comment">// 20 - задержка в мс</span></div>
<div class="line"><span class="lineno">  572</span>        <span class="keywordtype">int</span> code = waitKey(20);</div>
<div class="line"><span class="lineno">  573</span>        <span class="keywordflow">switch</span> (code)</div>
<div class="line"><span class="lineno">  574</span>        {</div>
<div class="line"><span class="lineno">  575</span>        <span class="comment">// Пауза</span></div>
<div class="line"><span class="lineno">  576</span>        <span class="comment">// Клавиши - пробел (ASCII code)</span></div>
<div class="line"><span class="lineno">  577</span>        <span class="keywordflow">case</span> 32:</div>
<div class="line"><span class="lineno">  578</span>        {</div>
<div class="line"><span class="lineno">  579</span>            <a class="code hl_variable" href="class_vibration_detector.html#ad3748489d876505deab724e16cf1e767">current_mode_</a> = PAUSE;</div>
<div class="line"><span class="lineno">  580</span>            </div>
<div class="line"><span class="lineno">  581</span>            <a class="code hl_function" href="class_vibration_detector.html#ad8741b76c24a08ec2ce54ff9d934ce76">DrawAndOutput</a>(<a class="code hl_variable" href="class_vibration_detector.html#a3c823c70560e24ce3e8484ae25440357">current_tracking_frame_</a>);</div>
<div class="line"><span class="lineno">  582</span> </div>
<div class="line"><span class="lineno">  583</span>            waitKey(0);</div>
<div class="line"><span class="lineno">  584</span>            <a class="code hl_variable" href="class_vibration_detector.html#ad3748489d876505deab724e16cf1e767">current_mode_</a> = DEFAULT;</div>
<div class="line"><span class="lineno">  585</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  586</span>        }</div>
<div class="line"><span class="lineno">  587</span>        <span class="keywordflow">case</span> <span class="charliteral">&#39;c&#39;</span>:</div>
<div class="line"><span class="lineno">  588</span>        {</div>
<div class="line"><span class="lineno">  589</span>            Mat unchanged_frame = <a class="code hl_variable" href="class_vibration_detector.html#a3c823c70560e24ce3e8484ae25440357">current_tracking_frame_</a>;</div>
<div class="line"><span class="lineno">  590</span>            <a class="code hl_variable" href="class_vibration_detector.html#a57b58c6da673cafcca839e5f48d9045c">frame_handler</a>-&gt;<a class="code hl_function" href="class_frame_handler.html#a194e20bc41e1d8bb849dc6666f182202">ShowFrame</a>(<a class="code hl_variable" href="class_vibration_detector.html#a3c823c70560e24ce3e8484ae25440357">current_tracking_frame_</a>, <a class="code hl_variable" href="class_vibration_detector.html#a49b64f3fe433f06af9444e8059d0cbc6">fullscreen_</a>);</div>
<div class="line"><span class="lineno">  591</span>            </div>
<div class="line"><span class="lineno">  592</span>            <a class="code hl_variable" href="class_vibration_detector.html#a901927a4199f5bf914675f19cae9a651">warping_figure_</a>.clear();</div>
<div class="line"><span class="lineno">  593</span>            <a class="code hl_variable" href="class_vibration_detector.html#a3b8ea35de43e2702a889f8def948ece4">warping_figure_selecting_</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  594</span> </div>
<div class="line"><span class="lineno">  595</span>            <span class="keywordflow">while</span> (<a class="code hl_variable" href="class_vibration_detector.html#a3b8ea35de43e2702a889f8def948ece4">warping_figure_selecting_</a>)</div>
<div class="line"><span class="lineno">  596</span>            {       </div>
<div class="line"><span class="lineno">  597</span>                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_variable" href="class_vibration_detector.html#a901927a4199f5bf914675f19cae9a651">warping_figure_</a>.size(); i++)</div>
<div class="line"><span class="lineno">  598</span>                {</div>
<div class="line"><span class="lineno">  599</span>                    circle(unchanged_frame, <a class="code hl_variable" href="class_vibration_detector.html#a901927a4199f5bf914675f19cae9a651">warping_figure_</a>[i], 10, Scalar(255, 207, 64), 2);</div>
<div class="line"><span class="lineno">  600</span>                }</div>
<div class="line"><span class="lineno">  601</span>        </div>
<div class="line"><span class="lineno">  602</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_vibration_detector.html#a901927a4199f5bf914675f19cae9a651">warping_figure_</a>.size() == 4)</div>
<div class="line"><span class="lineno">  603</span>                    <a class="code hl_variable" href="class_vibration_detector.html#a3b8ea35de43e2702a889f8def948ece4">warping_figure_selecting_</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  604</span>        </div>
<div class="line"><span class="lineno">  605</span>                <a class="code hl_variable" href="class_vibration_detector.html#a57b58c6da673cafcca839e5f48d9045c">frame_handler</a>-&gt;<a class="code hl_function" href="class_frame_handler.html#a194e20bc41e1d8bb849dc6666f182202">ShowFrame</a>(unchanged_frame, <a class="code hl_variable" href="class_vibration_detector.html#a49b64f3fe433f06af9444e8059d0cbc6">fullscreen_</a>);</div>
<div class="line"><span class="lineno">  606</span>                waitKey(20);</div>
<div class="line"><span class="lineno">  607</span>            }</div>
<div class="line"><span class="lineno">  608</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  609</span>        }</div>
<div class="line"><span class="lineno">  610</span>        <span class="comment">// Изменение чувствительности (VibratingPoint::sensivity_ -&gt; влияет на VibratingPoint::confidence_level_)</span></div>
<div class="line"><span class="lineno">  611</span>        <span class="comment">// Клавиши - &quot;A&quot; или &quot;a&quot; (ASCII code)</span></div>
<div class="line"><span class="lineno">  612</span>        <span class="comment">// A - for adjust</span></div>
<div class="line"><span class="lineno">  613</span>        <span class="keywordflow">case</span> 65:</div>
<div class="line"><span class="lineno">  614</span>        <span class="keywordflow">case</span> 97:</div>
<div class="line"><span class="lineno">  615</span>        {</div>
<div class="line"><span class="lineno">  616</span>            <a class="code hl_variable" href="class_vibration_detector.html#ad3748489d876505deab724e16cf1e767">current_mode_</a> = PAUSE;</div>
<div class="line"><span class="lineno">  617</span> </div>
<div class="line"><span class="lineno">  618</span>            <a class="code hl_function" href="class_vibration_detector.html#ad8741b76c24a08ec2ce54ff9d934ce76">DrawAndOutput</a>(<a class="code hl_variable" href="class_vibration_detector.html#a3c823c70560e24ce3e8484ae25440357">current_tracking_frame_</a>);</div>
<div class="line"><span class="lineno">  619</span> </div>
<div class="line"><span class="lineno">  620</span>            namedWindow(<span class="stringliteral">&quot;Sensivity Window&quot;</span>, WINDOW_FULLSCREEN);</div>
<div class="line"><span class="lineno">  621</span>            createTrackbar(<span class="stringliteral">&quot;Sensivity&quot;</span>, <span class="stringliteral">&quot;Sensivity Window&quot;</span>, &amp;<a class="code hl_variable" href="class_vibration_detector.html#a418071707b1348281ef2a434c42de26e">sensivity_in_percents_</a>, 100, NULL);</div>
<div class="line"><span class="lineno">  622</span> </div>
<div class="line"><span class="lineno">  623</span>            waitKey(0);</div>
<div class="line"><span class="lineno">  624</span> </div>
<div class="line"><span class="lineno">  625</span>            destroyWindow(<span class="stringliteral">&quot;Sensivity Window&quot;</span>);</div>
<div class="line"><span class="lineno">  626</span> </div>
<div class="line"><span class="lineno">  627</span>            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_variable" href="class_vibration_detector.html#a5085a389a0ff26924331ab5022eea1af">vec_lonely_point_handlers_</a>.size(); i++)</div>
<div class="line"><span class="lineno">  628</span>            {</div>
<div class="line"><span class="lineno">  629</span>                <a class="code hl_variable" href="class_vibration_detector.html#a5085a389a0ff26924331ab5022eea1af">vec_lonely_point_handlers_</a>[i]-&gt;SetSensivity(2.0 / <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(10 * <a class="code hl_variable" href="class_vibration_detector.html#a418071707b1348281ef2a434c42de26e">sensivity_in_percents_</a>));\</div>
<div class="line"><span class="lineno">  630</span>            }</div>
<div class="line"><span class="lineno">  631</span>            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_variable" href="class_vibration_detector.html#add86750dfd1683f09410d3fe3822a950">vec_colored_point_handlers_</a>.size(); i++)</div>
<div class="line"><span class="lineno">  632</span>            {</div>
<div class="line"><span class="lineno">  633</span>                <a class="code hl_variable" href="class_vibration_detector.html#add86750dfd1683f09410d3fe3822a950">vec_colored_point_handlers_</a>[i]-&gt;SetSensivity(2.0 / <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(10 * <a class="code hl_variable" href="class_vibration_detector.html#a418071707b1348281ef2a434c42de26e">sensivity_in_percents_</a>));</div>
<div class="line"><span class="lineno">  634</span>            }</div>
<div class="line"><span class="lineno">  635</span> </div>
<div class="line"><span class="lineno">  636</span>            <a class="code hl_variable" href="class_vibration_detector.html#ad3748489d876505deab724e16cf1e767">current_mode_</a> = DEFAULT;</div>
<div class="line"><span class="lineno">  637</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  638</span>        }</div>
<div class="line"><span class="lineno">  639</span>        <span class="comment">// Фуллскрин. </span></div>
<div class="line"><span class="lineno">  640</span>        <span class="comment">// Клавиши - &quot;F&quot; или &quot;f&quot; (ASCII code)</span></div>
<div class="line"><span class="lineno">  641</span>        <span class="keywordflow">case</span> 102:</div>
<div class="line"><span class="lineno">  642</span>        <span class="keywordflow">case</span> 70:</div>
<div class="line"><span class="lineno">  643</span>        {</div>
<div class="line"><span class="lineno">  644</span>            <span class="comment">// Проверка на флаг полноэкранного режима. Если он изначально был false, меняем на true, и наоборот в противном случае</span></div>
<div class="line"><span class="lineno">  645</span>            <span class="keywordflow">if</span> (!<a class="code hl_variable" href="class_vibration_detector.html#a49b64f3fe433f06af9444e8059d0cbc6">fullscreen_</a>)</div>
<div class="line"><span class="lineno">  646</span>            {</div>
<div class="line"><span class="lineno">  647</span>                <a class="code hl_variable" href="class_vibration_detector.html#a49b64f3fe433f06af9444e8059d0cbc6">fullscreen_</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  648</span>            }</div>
<div class="line"><span class="lineno">  649</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  650</span>            {</div>
<div class="line"><span class="lineno">  651</span>                <a class="code hl_variable" href="class_vibration_detector.html#a49b64f3fe433f06af9444e8059d0cbc6">fullscreen_</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  652</span>            }</div>
<div class="line"><span class="lineno">  653</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  654</span>        }</div>
<div class="line"><span class="lineno">  655</span>        <span class="comment">// Изменение режима подсветки точек при активном регионе интереса (ROI)</span></div>
<div class="line"><span class="lineno">  656</span>        <span class="comment">// Клавиши - &quot;M&quot; или &quot;m&quot; (ASCII code)</span></div>
<div class="line"><span class="lineno">  657</span>        <span class="keywordflow">case</span> 77:</div>
<div class="line"><span class="lineno">  658</span>        <span class="keywordflow">case</span> 109:</div>
<div class="line"><span class="lineno">  659</span>        {</div>
<div class="line"><span class="lineno">  660</span>            <span class="comment">// Перебираем режимы по порядку</span></div>
<div class="line"><span class="lineno">  661</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_vibration_detector.html#af75ebe29dd6955ae7a249c4c854c2657">colored_point_mode_</a> == 2)</div>
<div class="line"><span class="lineno">  662</span>                <a class="code hl_variable" href="class_vibration_detector.html#af75ebe29dd6955ae7a249c4c854c2657">colored_point_mode_</a> = 0;</div>
<div class="line"><span class="lineno">  663</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  664</span>                <a class="code hl_variable" href="class_vibration_detector.html#af75ebe29dd6955ae7a249c4c854c2657">colored_point_mode_</a>++;</div>
<div class="line"><span class="lineno">  665</span> </div>
<div class="line"><span class="lineno">  666</span>            <a class="code hl_variable" href="class_vibration_detector.html#a41634272ca48ff33bf21b39d11559eaa">grad_scale_</a> = <a class="code hl_variable" href="class_vibration_detector.html#a57b58c6da673cafcca839e5f48d9045c">frame_handler</a>-&gt;<a class="code hl_function" href="class_frame_handler.html#ac586501514225a9e054845c69fe9ccc7">GenerateGradScale</a>(0, <a class="code hl_variable" href="class_vibration_detector.html#a779ca47185d36d5fe0cf216c1cb9f48e">fps_</a> / 2, <a class="code hl_variable" href="class_vibration_detector.html#af75ebe29dd6955ae7a249c4c854c2657">colored_point_mode_</a>);</div>
<div class="line"><span class="lineno">  667</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  668</span>        }</div>
<div class="line"><span class="lineno">  669</span>        <span class="comment">// Выделение региона интереса (ROI)</span></div>
<div class="line"><span class="lineno">  670</span>        <span class="comment">// Клавиши - &quot;R&quot; или &quot;r&quot; (ASCII code)</span></div>
<div class="line"><span class="lineno">  671</span>        <span class="keywordflow">case</span> 82:</div>
<div class="line"><span class="lineno">  672</span>        <span class="keywordflow">case</span> 114:</div>
<div class="line"><span class="lineno">  673</span>        {</div>
<div class="line"><span class="lineno">  674</span>            <span class="comment">// Обновляем текущий режим</span></div>
<div class="line"><span class="lineno">  675</span>            <a class="code hl_variable" href="class_vibration_detector.html#ad3748489d876505deab724e16cf1e767">current_mode_</a> = SELECTINGROI;</div>
<div class="line"><span class="lineno">  676</span>            <span class="comment">// Регион интереса</span></div>
<div class="line"><span class="lineno">  677</span>            Rect roi;</div>
<div class="line"><span class="lineno">  678</span>            <span class="comment">// Сбрасываеи флаг выделенного региона интереса</span></div>
<div class="line"><span class="lineno">  679</span>            <a class="code hl_variable" href="class_vibration_detector.html#afd9f8f38bcde73bb14c9cf643f270d36">roi_selected_</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  680</span>            <span class="comment">// Флаг выхода из режима</span></div>
<div class="line"><span class="lineno">  681</span>            <span class="keywordtype">bool</span> wanna_quit = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  682</span> </div>
<div class="line"><span class="lineno">  683</span>            <span class="keywordflow">while</span> (!<a class="code hl_variable" href="class_vibration_detector.html#afd9f8f38bcde73bb14c9cf643f270d36">roi_selected_</a> &amp;&amp; !wanna_quit)</div>
<div class="line"><span class="lineno">  684</span>            {</div>
<div class="line"><span class="lineno">  685</span>                <span class="comment">// создаю копию current_tracking_frame_</span></div>
<div class="line"><span class="lineno">  686</span>                Mat frame = <a class="code hl_variable" href="class_vibration_detector.html#a3c823c70560e24ce3e8484ae25440357">current_tracking_frame_</a>.clone();</div>
<div class="line"><span class="lineno">  687</span>                </div>
<div class="line"><span class="lineno">  688</span>                <span class="comment">// Пока происходит выделение региона интереса (в нашем случае пока не была отпущена ЛКМ), отрисовываем прямоугольник</span></div>
<div class="line"><span class="lineno">  689</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_vibration_detector.html#aacb53723f4a18df998738d0d54c5290b">roi_selecting_</a>)</div>
<div class="line"><span class="lineno">  690</span>                {</div>
<div class="line"><span class="lineno">  691</span>                    roi = Rect(<a class="code hl_variable" href="class_vibration_detector.html#aef49bdadca0536214393e22addf4ce04">tl_click_coords_</a>, <a class="code hl_variable" href="class_vibration_detector.html#a69f64f7b483a4295abd6e5a48ab161ff">last_mouse_position_</a>);</div>
<div class="line"><span class="lineno">  692</span>                    rectangle(frame, roi, Scalar(0, 255, 0), 1 * (1 / <a class="code hl_variable" href="class_vibration_detector.html#a5c0d42618889da70c073056ba3e4065c">res_mp_</a>));</div>
<div class="line"><span class="lineno">  693</span>                }</div>
<div class="line"><span class="lineno">  694</span> </div>
<div class="line"><span class="lineno">  695</span>                <a class="code hl_function" href="class_vibration_detector.html#ad8741b76c24a08ec2ce54ff9d934ce76">DrawAndOutput</a>(frame);</div>
<div class="line"><span class="lineno">  696</span> </div>
<div class="line"><span class="lineno">  697</span>                <span class="keywordflow">switch</span> (waitKey(20))</div>
<div class="line"><span class="lineno">  698</span>                {</div>
<div class="line"><span class="lineno">  699</span>                <span class="comment">// R for reset</span></div>
<div class="line"><span class="lineno">  700</span>                <span class="keywordflow">case</span> <span class="charliteral">&#39;r&#39;</span>:</div>
<div class="line"><span class="lineno">  701</span>                {</div>
<div class="line"><span class="lineno">  702</span>                    wanna_quit = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  703</span>                    <span class="comment">// Удаляем старые &quot;цветные&quot; точки</span></div>
<div class="line"><span class="lineno">  704</span>                    <a class="code hl_function" href="class_vibration_detector.html#ab0f3c59d611f15ff9505429bcf2e45b7">DeleteColoredPoints</a>();</div>
<div class="line"><span class="lineno">  705</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  706</span>                }</div>
<div class="line"><span class="lineno">  707</span>                <span class="comment">// Esc</span></div>
<div class="line"><span class="lineno">  708</span>                <span class="keywordflow">case</span> 27:</div>
<div class="line"><span class="lineno">  709</span>                {</div>
<div class="line"><span class="lineno">  710</span>                    wanna_quit = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  711</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  712</span>                }</div>
<div class="line"><span class="lineno">  713</span>                }</div>
<div class="line"><span class="lineno">  714</span>            }</div>
<div class="line"><span class="lineno">  715</span>            <span class="comment">// ROI может быть пустым после выхода из цикла выше кейсом в свитче</span></div>
<div class="line"><span class="lineno">  716</span>            <span class="keywordflow">if</span> (!roi.empty())</div>
<div class="line"><span class="lineno">  717</span>                <a class="code hl_variable" href="class_vibration_detector.html#a48e1f58a28d451445a23ea6575ef9b38">c_point_queue_</a> = <a class="code hl_function" href="class_vibration_detector.html#a58f70fe74fee9f702773a0d2ab18643a">FindGoodFeatures</a>(<a class="code hl_variable" href="class_vibration_detector.html#a3c823c70560e24ce3e8484ae25440357">current_tracking_frame_</a>, roi);</div>
<div class="line"><span class="lineno">  718</span> </div>
<div class="line"><span class="lineno">  719</span>            <a class="code hl_variable" href="class_vibration_detector.html#ad3748489d876505deab724e16cf1e767">current_mode_</a> = DEFAULT;</div>
<div class="line"><span class="lineno">  720</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  721</span>        }</div>
<div class="line"><span class="lineno">  722</span>        <span class="keywordflow">case</span> <span class="charliteral">&#39;q&#39;</span>:</div>
<div class="line"><span class="lineno">  723</span>        {</div>
<div class="line"><span class="lineno">  724</span>            <a class="code hl_variable" href="class_vibration_detector.html#ab0fa5fb784f1db6bdb7a9d9e5d608bb3">running_</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  725</span>            std::cout &lt;&lt; <a class="code hl_variable" href="class_vibration_detector.html#a57b58c6da673cafcca839e5f48d9045c">frame_handler</a>-&gt;<a class="code hl_function" href="class_frame_handler.html#a18519accbae4e5e7a043e81bd6a9d2c6">GetInputCapStatus</a>() &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  726</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  727</span>        }</div>
<div class="line"><span class="lineno">  728</span>        }</div>
<div class="line"><span class="lineno">  729</span>    }</div>
<div class="line"><span class="lineno">  730</span>}</div>
<div class="ttc" id="aclass_frame_handler_html_a0a926273fbb3a3901c9a5a75e3380e16"><div class="ttname"><a href="class_frame_handler.html#a0a926273fbb3a3901c9a5a75e3380e16">FrameHandler::GetAmountOfFrames</a></div><div class="ttdeci">int GetAmountOfFrames()</div><div class="ttdoc">Возвращает общее количество кадров</div><div class="ttdef"><b>Definition:</b> <a href="frame__handler_8cpp_source.html#l00176">frame_handler.cpp:176</a></div></div>
<div class="ttc" id="aclass_frame_handler_html_a115a1da50a8bc1b00d703b6f8c44222b"><div class="ttname"><a href="class_frame_handler.html#a115a1da50a8bc1b00d703b6f8c44222b">FrameHandler::GetMainWindowName</a></div><div class="ttdeci">String GetMainWindowName()</div><div class="ttdoc">Возвращает название главного окна, в которое выводятся кадры</div><div class="ttdef"><b>Definition:</b> <a href="frame__handler_8cpp_source.html#l00161">frame_handler.cpp:161</a></div></div>
<div class="ttc" id="aclass_frame_handler_html_a18519accbae4e5e7a043e81bd6a9d2c6"><div class="ttname"><a href="class_frame_handler.html#a18519accbae4e5e7a043e81bd6a9d2c6">FrameHandler::GetInputCapStatus</a></div><div class="ttdeci">bool GetInputCapStatus()</div><div class="ttdoc">Возвращает текущий статус input_cap.</div><div class="ttdef"><b>Definition:</b> <a href="frame__handler_8cpp_source.html#l00151">frame_handler.cpp:151</a></div></div>
<div class="ttc" id="aclass_frame_handler_html_a26b5695df6161f00af36210e4d3d78ad"><div class="ttname"><a href="class_frame_handler.html#a26b5695df6161f00af36210e4d3d78ad">FrameHandler::GetCurrentFrame</a></div><div class="ttdeci">Mat GetCurrentFrame()</div><div class="ttdoc">Возвращает последний прочитанный на данный момент кадр</div><div class="ttdef"><b>Definition:</b> <a href="frame__handler_8cpp_source.html#l00156">frame_handler.cpp:156</a></div></div>
<div class="ttc" id="aclass_frame_handler_html_a3837bca5a13d8e1e4969edf0d831baf3"><div class="ttname"><a href="class_frame_handler.html#a3837bca5a13d8e1e4969edf0d831baf3">FrameHandler::ReadNextFrame</a></div><div class="ttdeci">void ReadNextFrame()</div><div class="ttdoc">Считывает следующий кадр видео</div><div class="ttdef"><b>Definition:</b> <a href="frame__handler_8cpp_source.html#l00039">frame_handler.cpp:39</a></div></div>
<div class="ttc" id="aclass_frame_handler_html_a43fe77a59e8e5d99f7bb0ad3499591ef"><div class="ttname"><a href="class_frame_handler.html#a43fe77a59e8e5d99f7bb0ad3499591ef">FrameHandler::WriteFrame</a></div><div class="ttdeci">void WriteFrame(Mat frame)</div><div class="ttdoc">Записывает кадр с помощью output_cap.</div><div class="ttdef"><b>Definition:</b> <a href="frame__handler_8cpp_source.html#l00062">frame_handler.cpp:62</a></div></div>
<div class="ttc" id="aclass_frame_handler_html_a4bd1108adbbd4c21c4c3233efa8c8d1e"><div class="ttname"><a href="class_frame_handler.html#a4bd1108adbbd4c21c4c3233efa8c8d1e">FrameHandler::MakeGrayFrame</a></div><div class="ttdeci">Mat MakeGrayFrame(Mat frame_to_be_grayed)</div><div class="ttdoc">Возвращает серый кадр с блюром</div><div class="ttdef"><b>Definition:</b> <a href="frame__handler_8cpp_source.html#l00137">frame_handler.cpp:137</a></div></div>
<div class="ttc" id="aclass_frame_handler_html_a61109313b6d4a9a21783a9c7b66dea68"><div class="ttname"><a href="class_frame_handler.html#a61109313b6d4a9a21783a9c7b66dea68">FrameHandler::GetCurrentTimeOfFrame</a></div><div class="ttdeci">double GetCurrentTimeOfFrame()</div><div class="ttdoc">Возвращает текущее время кадра (таймкод в мс)</div><div class="ttdef"><b>Definition:</b> <a href="frame__handler_8cpp_source.html#l00166">frame_handler.cpp:166</a></div></div>
<div class="ttc" id="aclass_frame_handler_html_a7871807bfd918b88272a175aa33ea165"><div class="ttname"><a href="class_frame_handler.html#a7871807bfd918b88272a175aa33ea165">FrameHandler::GetInputFps</a></div><div class="ttdeci">int GetInputFps()</div><div class="ttdoc">Возвращает FPS считываемого видео</div><div class="ttdef"><b>Definition:</b> <a href="frame__handler_8cpp_source.html#l00181">frame_handler.cpp:181</a></div></div>
<div class="ttc" id="aclass_frame_handler_html_a79ab90b6a2ce7ea8fef695a11bef514c"><div class="ttname"><a href="class_frame_handler.html#a79ab90b6a2ce7ea8fef695a11bef514c">FrameHandler::GetCurrentPosOfFrame</a></div><div class="ttdeci">int GetCurrentPosOfFrame()</div><div class="ttdoc">Возвращает текущее положение кадра относительно первого</div><div class="ttdef"><b>Definition:</b> <a href="frame__handler_8cpp_source.html#l00171">frame_handler.cpp:171</a></div></div>
<div class="ttc" id="aclass_frame_handler_html_ac586501514225a9e054845c69fe9ccc7"><div class="ttname"><a href="class_frame_handler.html#ac586501514225a9e054845c69fe9ccc7">FrameHandler::GenerateGradScale</a></div><div class="ttdeci">Mat GenerateGradScale(int left_limit, int right_limit, int colored_point_mode)</div><div class="ttdoc">Генерирует шкалу с градиентом и подписями. Ширина шкалы - ширина исходного видео. Высота регулируется...</div><div class="ttdef"><b>Definition:</b> <a href="frame__handler_8cpp_source.html#l00258">frame_handler.cpp:258</a></div></div>
<div class="ttc" id="aclass_vibration_detector_html_a016d906a3746e6d61b9468c7127a717f"><div class="ttname"><a href="class_vibration_detector.html#a016d906a3746e6d61b9468c7127a717f">VibrationDetector::next_img_gray_</a></div><div class="ttdeci">Mat next_img_gray_</div><div class="ttdoc">Следующий (или текущий после &quot;предыдущего&quot; - смотря как удобнее для понимания) кадр видео в грейскейл...</div><div class="ttdef"><b>Definition:</b> <a href="vibration__detector_8h_source.html#l00266">vibration_detector.h:266</a></div></div>
<div class="ttc" id="aclass_vibration_detector_html_a3596d10b3b4e68b7c4151631fbb7aeb1"><div class="ttname"><a href="class_vibration_detector.html#a3596d10b3b4e68b7c4151631fbb7aeb1">VibrationDetector::OnMouse</a></div><div class="ttdeci">static void OnMouse(int event, int x, int y, int flags, void *userdata)</div><div class="ttdoc">callback functions for detecting the click</div><div class="ttdef"><b>Definition:</b> <a href="vibration__detector_8cpp_source.html#l00217">vibration_detector.cpp:217</a></div></div>
<div class="ttc" id="aclass_vibration_detector_html_a3c524b0b7ab0348fe4fb6018f64b4dcf"><div class="ttname"><a href="class_vibration_detector.html#a3c524b0b7ab0348fe4fb6018f64b4dcf">VibrationDetector::prev_img_gray_</a></div><div class="ttdeci">Mat prev_img_gray_</div><div class="ttdoc">Предыдущий кадр видео в грейскейл и с небольшим блюром (FrameHandler::MakeGrayFrame())</div><div class="ttdef"><b>Definition:</b> <a href="vibration__detector_8h_source.html#l00262">vibration_detector.h:262</a></div></div>
<div class="ttc" id="aclass_vibration_detector_html_a3c823c70560e24ce3e8484ae25440357"><div class="ttname"><a href="class_vibration_detector.html#a3c823c70560e24ce3e8484ae25440357">VibrationDetector::current_tracking_frame_</a></div><div class="ttdeci">Mat current_tracking_frame_</div><div class="ttdoc">Текущий Mat-instance только что найденного кадра из видео</div><div class="ttdef"><b>Definition:</b> <a href="vibration__detector_8h_source.html#l00199">vibration_detector.h:199</a></div></div>
<div class="ttc" id="aclass_vibration_detector_html_a48e1f58a28d451445a23ea6575ef9b38"><div class="ttname"><a href="class_vibration_detector.html#a48e1f58a28d451445a23ea6575ef9b38">VibrationDetector::c_point_queue_</a></div><div class="ttdeci">std::vector&lt; Point2f &gt; c_point_queue_</div><div class="ttdoc">Очередь на создание &quot;цветных&quot; точек</div><div class="ttdef"><b>Definition:</b> <a href="vibration__detector_8h_source.html#l00166">vibration_detector.h:166</a></div></div>
<div class="ttc" id="aclass_vibration_detector_html_a4cf6c4a052388d4fb17ec01815bc0bbe"><div class="ttname"><a href="class_vibration_detector.html#a4cf6c4a052388d4fb17ec01815bc0bbe">VibrationDetector::frame_time_</a></div><div class="ttdeci">double frame_time_</div><div class="ttdoc">Текущее время кадра в мс (таймкод)</div><div class="ttdef"><b>Definition:</b> <a href="vibration__detector_8h_source.html#l00285">vibration_detector.h:285</a></div></div>
<div class="ttc" id="aclass_vibration_detector_html_a58f70fe74fee9f702773a0d2ab18643a"><div class="ttname"><a href="class_vibration_detector.html#a58f70fe74fee9f702773a0d2ab18643a">VibrationDetector::FindGoodFeatures</a></div><div class="ttdeci">std::vector&lt; Point2f &gt; FindGoodFeatures(Mat frame, Rect roi)</div><div class="ttdoc">Находит подходящие для трекинга точки на изображении</div><div class="ttdef"><b>Definition:</b> <a href="vibration__detector_8cpp_source.html#l00432">vibration_detector.cpp:432</a></div></div>
<div class="ttc" id="aclass_vibration_detector_html_a81f38d7f3d0599b01186a122d68d09ee"><div class="ttname"><a href="class_vibration_detector.html#a81f38d7f3d0599b01186a122d68d09ee">VibrationDetector::TrackAndCalc</a></div><div class="ttdeci">void TrackAndCalc()</div><div class="ttdoc">Трекает точки алгоритмом Лукаса-Канаде и вызывает БПФ</div><div class="ttdef"><b>Definition:</b> <a href="vibration__detector_8cpp_source.html#l00342">vibration_detector.cpp:342</a></div></div>
<div class="ttc" id="aclass_vibration_detector_html_a901927a4199f5bf914675f19cae9a651"><div class="ttname"><a href="class_vibration_detector.html#a901927a4199f5bf914675f19cae9a651">VibrationDetector::warping_figure_</a></div><div class="ttdeci">std::vector&lt; Point &gt; warping_figure_</div><div class="ttdoc">Координаты фигуры для исправления перспективы</div><div class="ttdef"><b>Definition:</b> <a href="vibration__detector_8h_source.html#l00257">vibration_detector.h:257</a></div></div>
<div class="ttc" id="aclass_vibration_detector_html_ab0fa5fb784f1db6bdb7a9d9e5d608bb3"><div class="ttname"><a href="class_vibration_detector.html#ab0fa5fb784f1db6bdb7a9d9e5d608bb3">VibrationDetector::running_</a></div><div class="ttdeci">bool running_</div><div class="ttdoc">Флаг запущенного основного алгоритма</div><div class="ttdef"><b>Definition:</b> <a href="vibration__detector_8h_source.html#l00134">vibration_detector.h:134</a></div></div>
<div class="ttc" id="aclass_vibration_detector_html_ad8741b76c24a08ec2ce54ff9d934ce76"><div class="ttname"><a href="class_vibration_detector.html#ad8741b76c24a08ec2ce54ff9d934ce76">VibrationDetector::DrawAndOutput</a></div><div class="ttdeci">void DrawAndOutput(Mat &amp;frame)</div><div class="ttdoc">Масштабирует, рисует и выводит на экран обработанный кадр с точками</div><div class="ttdef"><b>Definition:</b> <a href="vibration__detector_8cpp_source.html#l00465">vibration_detector.cpp:465</a></div></div>
<div class="ttc" id="aclass_vibration_detector_html_ae2fadec69d259a03125901ad988e7137"><div class="ttname"><a href="class_vibration_detector.html#ae2fadec69d259a03125901ad988e7137">VibrationDetector::MakeWarpedFrame</a></div><div class="ttdeci">Mat MakeWarpedFrame(Mat frame, std::vector&lt; Point2i &gt; warping_figure)</div><div class="ttdoc">Удаляет перспективные искажения</div><div class="ttdef"><b>Definition:</b> <a href="vibration__detector_8cpp_source.html#l00310">vibration_detector.cpp:310</a></div></div>
<div class="ttc" id="aclass_vibration_detector_html_aef49bdadca0536214393e22addf4ce04"><div class="ttname"><a href="class_vibration_detector.html#aef49bdadca0536214393e22addf4ce04">VibrationDetector::tl_click_coords_</a></div><div class="ttdeci">Point2i tl_click_coords_</div><div class="ttdoc">Координаты первой точки прямоугольник (top left, bottom left, top right, bottom right - смотря &quot;в как...</div><div class="ttdef"><b>Definition:</b> <a href="vibration__detector_8h_source.html#l00230">vibration_detector.h:230</a></div></div>
<div class="ttc" id="aclass_vibration_detector_html_af1da28823c948acc115fc862378b62d8"><div class="ttname"><a href="class_vibration_detector.html#af1da28823c948acc115fc862378b62d8">VibrationDetector::ServeTheQueues</a></div><div class="ttdeci">void ServeTheQueues()</div><div class="ttdoc">Обслуживает очереди на удаление и создание. Необходимо для того, чтобы не нарушить нумерацию точек во...</div><div class="ttdef"><b>Definition:</b> <a href="vibration__detector_8cpp_source.html#l00038">vibration_detector.cpp:38</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aba1212595904b3a3d4f1ef8ebef89d87" name="aba1212595904b3a3d4f1ef8ebef89d87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba1212595904b3a3d4f1ef8ebef89d87">&#9670;&#160;</a></span>FindAndDeleteUncofidentPoints()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void VibrationDetector::FindAndDeleteUncofidentPoints </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Удаляет "цветные" и "обычные" точки, если уровень доверия к нми слишком низкий </p>

<p class="definition">См. определение в файле <a class="el" href="vibration__detector_8cpp_source.html">vibration_detector.cpp</a> строка <a class="el" href="vibration__detector_8cpp_source.html#l00194">194</a></p>
<div class="fragment"><div class="line"><span class="lineno">  195</span>{</div>
<div class="line"><span class="lineno">  196</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_variable" href="class_vibration_detector.html#a5085a389a0ff26924331ab5022eea1af">vec_lonely_point_handlers_</a>.size(); i++)</div>
<div class="line"><span class="lineno">  197</span>    {</div>
<div class="line"><span class="lineno">  198</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_vibration_detector.html#a5085a389a0ff26924331ab5022eea1af">vec_lonely_point_handlers_</a>[i]-&gt;GetCurrentConfidenceLevel() &lt; 0.0)</div>
<div class="line"><span class="lineno">  199</span>        {</div>
<div class="line"><span class="lineno">  200</span>            <span class="keyword">delete</span>(*(std::begin(<a class="code hl_variable" href="class_vibration_detector.html#a5085a389a0ff26924331ab5022eea1af">vec_lonely_point_handlers_</a>) + i));</div>
<div class="line"><span class="lineno">  201</span>            <span class="comment">// удаляем первую точку (первую в векторе и по сути первую по номеру)</span></div>
<div class="line"><span class="lineno">  202</span>            <a class="code hl_variable" href="class_vibration_detector.html#a5085a389a0ff26924331ab5022eea1af">vec_lonely_point_handlers_</a>.erase(std::begin(<a class="code hl_variable" href="class_vibration_detector.html#a5085a389a0ff26924331ab5022eea1af">vec_lonely_point_handlers_</a>) + i);</div>
<div class="line"><span class="lineno">  203</span>        }</div>
<div class="line"><span class="lineno">  204</span>    }</div>
<div class="line"><span class="lineno">  205</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_variable" href="class_vibration_detector.html#add86750dfd1683f09410d3fe3822a950">vec_colored_point_handlers_</a>.size(); i++)</div>
<div class="line"><span class="lineno">  206</span>    {</div>
<div class="line"><span class="lineno">  207</span>        <span class="keywordflow">if</span> ((<a class="code hl_variable" href="class_vibration_detector.html#add86750dfd1683f09410d3fe3822a950">vec_colored_point_handlers_</a>[i]-&gt;GetCurrentConfidenceLevel() &lt; 0.0))</div>
<div class="line"><span class="lineno">  208</span>        {</div>
<div class="line"><span class="lineno">  209</span>            <span class="keyword">delete</span>(*(std::begin(<a class="code hl_variable" href="class_vibration_detector.html#add86750dfd1683f09410d3fe3822a950">vec_colored_point_handlers_</a>) + i));</div>
<div class="line"><span class="lineno">  210</span>            <span class="comment">// удаляем первую точку (первую в векторе и по сути первую по номеру)</span></div>
<div class="line"><span class="lineno">  211</span>            <a class="code hl_variable" href="class_vibration_detector.html#add86750dfd1683f09410d3fe3822a950">vec_colored_point_handlers_</a>.erase(std::begin(<a class="code hl_variable" href="class_vibration_detector.html#add86750dfd1683f09410d3fe3822a950">vec_colored_point_handlers_</a>) + i);</div>
<div class="line"><span class="lineno">  212</span>        }</div>
<div class="line"><span class="lineno">  213</span>    }</div>
<div class="line"><span class="lineno">  214</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a58f70fe74fee9f702773a0d2ab18643a" name="a58f70fe74fee9f702773a0d2ab18643a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58f70fe74fee9f702773a0d2ab18643a">&#9670;&#160;</a></span>FindGoodFeatures()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; Point2f &gt; VibrationDetector::FindGoodFeatures </td>
          <td>(</td>
          <td class="paramtype">Mat&#160;</td>
          <td class="paramname"><em>frame</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Rect&#160;</td>
          <td class="paramname"><em>roi</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Находит подходящие для трекинга точки на изображении </p>

<p class="definition">См. определение в файле <a class="el" href="vibration__detector_8cpp_source.html">vibration_detector.cpp</a> строка <a class="el" href="vibration__detector_8cpp_source.html#l00432">432</a></p>
<div class="fragment"><div class="line"><span class="lineno">  433</span>{</div>
<div class="line"><span class="lineno">  434</span>    std::vector&lt;Point2f&gt; good_features;</div>
<div class="line"><span class="lineno">  435</span>    <span class="comment">// Если изображение не черно-белое</span></div>
<div class="line"><span class="lineno">  436</span>    <span class="keywordflow">if</span> (frame.channels() &gt; 2)</div>
<div class="line"><span class="lineno">  437</span>        cvtColor(frame, frame, COLOR_BGR2GRAY);</div>
<div class="line"><span class="lineno">  438</span> </div>
<div class="line"><span class="lineno">  439</span>    <span class="comment">// Устанавливаем ROI на нашем изображении</span></div>
<div class="line"><span class="lineno">  440</span>    Mat frame_with_roi = frame(roi);</div>
<div class="line"><span class="lineno">  441</span>    goodFeaturesToTrack(frame_with_roi, good_features, 1000, 0.1, 20, noArray(), 3);</div>
<div class="line"><span class="lineno">  442</span> </div>
<div class="line"><span class="lineno">  443</span>    <span class="comment">// Перевод в координаты изначального изображения</span></div>
<div class="line"><span class="lineno">  444</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; good_features.size(); i++)</div>
<div class="line"><span class="lineno">  445</span>    {</div>
<div class="line"><span class="lineno">  446</span>        good_features[i].x = good_features[i].x + roi.tl().x;</div>
<div class="line"><span class="lineno">  447</span>        good_features[i].y = good_features[i].y + roi.tl().y;</div>
<div class="line"><span class="lineno">  448</span>    }</div>
<div class="line"><span class="lineno">  449</span> </div>
<div class="line"><span class="lineno">  450</span>    <a class="code hl_class" href="class_contour_handler.html">ContourHandler</a> contour_handler(frame, &amp;roi);</div>
<div class="line"><span class="lineno">  451</span>    std::vector&lt;Point2f&gt; features_to_be_append = contour_handler.GetContinousContours();</div>
<div class="line"><span class="lineno">  452</span> </div>
<div class="line"><span class="lineno">  453</span>    <span class="keyword">auto</span> itt = features_to_be_append.begin();</div>
<div class="line"><span class="lineno">  454</span>    <span class="keywordtype">int</span> count = 0;</div>
<div class="line"><span class="lineno">  455</span>    <span class="keywordflow">while</span> (itt != features_to_be_append.end())</div>
<div class="line"><span class="lineno">  456</span>    {</div>
<div class="line"><span class="lineno">  457</span>        good_features.push_back(*itt);</div>
<div class="line"><span class="lineno">  458</span>        itt++;</div>
<div class="line"><span class="lineno">  459</span>        count++;</div>
<div class="line"><span class="lineno">  460</span>    }</div>
<div class="line"><span class="lineno">  461</span> </div>
<div class="line"><span class="lineno">  462</span>    <span class="keywordflow">return</span> good_features;</div>
<div class="line"><span class="lineno">  463</span>}</div>
<div class="ttc" id="aclass_contour_handler_html"><div class="ttname"><a href="class_contour_handler.html">ContourHandler</a></div><div class="ttdoc">Класс для создания объектов-обработчиков контуров.</div><div class="ttdef"><b>Definition:</b> <a href="contour__handler_8h_source.html#l00022">contour_handler.h:23</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa43b85f7a90ea3021b63608b378a81f4" name="aa43b85f7a90ea3021b63608b378a81f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa43b85f7a90ea3021b63608b378a81f4">&#9670;&#160;</a></span>LeftClickHandler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void VibrationDetector::LeftClickHandler </td>
          <td>(</td>
          <td class="paramtype">Point2f&#160;</td>
          <td class="paramname"><em>mouse_coordinates</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Обработчик левых кликов </p>

<p class="definition">См. определение в файле <a class="el" href="vibration__detector_8cpp_source.html">vibration_detector.cpp</a> строка <a class="el" href="vibration__detector_8cpp_source.html#l00063">63</a></p>
<div class="fragment"><div class="line"><span class="lineno">   64</span>{</div>
<div class="line"><span class="lineno">   65</span>    <span class="comment">// если вектор пустой - просто добавляем новую точку</span></div>
<div class="line"><span class="lineno">   66</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_vibration_detector.html#a5085a389a0ff26924331ab5022eea1af">vec_lonely_point_handlers_</a>.empty())</div>
<div class="line"><span class="lineno">   67</span>    {</div>
<div class="line"><span class="lineno">   68</span>        <span class="keywordtype">bool</span> flag_colored_interacted_ = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">   69</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_variable" href="class_vibration_detector.html#add86750dfd1683f09410d3fe3822a950">vec_colored_point_handlers_</a>.size(); i++)</div>
<div class="line"><span class="lineno">   70</span>        {</div>
<div class="line"><span class="lineno">   71</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_vibration_detector.html#add86750dfd1683f09410d3fe3822a950">vec_colored_point_handlers_</a>[i]-&gt;<a class="code hl_function" href="class_vibrating_point.html#a342c75a6ac0f9ab85de1a0dd663eab03">VibratingPoint::IsInteracted</a>(mouse_coordinates))</div>
<div class="line"><span class="lineno">   72</span>            {</div>
<div class="line"><span class="lineno">   73</span>                <a class="code hl_variable" href="class_vibration_detector.html#add86750dfd1683f09410d3fe3822a950">vec_colored_point_handlers_</a>[i]-&gt;SetHistogramFlag(<span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">   74</span>                flag_colored_interacted_ = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">   75</span>            }</div>
<div class="line"><span class="lineno">   76</span>        }</div>
<div class="line"><span class="lineno">   77</span>        <span class="keywordflow">if</span> (flag_colored_interacted_ == <span class="keyword">false</span>)</div>
<div class="line"><span class="lineno">   78</span>            <a class="code hl_function" href="class_vibration_detector.html#a176e5b0d0ca409c6cfcacdeca13240de">CreateNewPoint</a>(mouse_coordinates);</div>
<div class="line"><span class="lineno">   79</span>    }</div>
<div class="line"><span class="lineno">   80</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">   81</span>    {</div>
<div class="line"><span class="lineno">   82</span>        <span class="comment">// проходим по всему вектору точек</span></div>
<div class="line"><span class="lineno">   83</span>        <span class="keywordtype">bool</span> flag_lonely_interacted_ = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">   84</span>        <span class="keywordtype">bool</span> flag_colored_interacted_ = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">   85</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_variable" href="class_vibration_detector.html#a5085a389a0ff26924331ab5022eea1af">vec_lonely_point_handlers_</a>.size(); i++)</div>
<div class="line"><span class="lineno">   86</span>        {</div>
<div class="line"><span class="lineno">   87</span>            <span class="comment">// если произошло пересечение с мышкой, то новую точку не добавляем</span></div>
<div class="line"><span class="lineno">   88</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_vibration_detector.html#a5085a389a0ff26924331ab5022eea1af">vec_lonely_point_handlers_</a>[i]-&gt;<a class="code hl_function" href="class_vibrating_point.html#a342c75a6ac0f9ab85de1a0dd663eab03">VibratingPoint::IsInteracted</a>(mouse_coordinates))</div>
<div class="line"><span class="lineno">   89</span>            {</div>
<div class="line"><span class="lineno">   90</span>                <a class="code hl_variable" href="class_vibration_detector.html#a5085a389a0ff26924331ab5022eea1af">vec_lonely_point_handlers_</a>[i]-&gt;SetHistogramFlag(<span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">   91</span>                <span class="comment">//vec_lonely_point_handlers_[i]-&gt;SetHistogramWindowProperty(WND_PROP_TOPMOST, true);</span></div>
<div class="line"><span class="lineno">   92</span>                flag_lonely_interacted_ = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">   93</span>            }</div>
<div class="line"><span class="lineno">   94</span>        }</div>
<div class="line"><span class="lineno">   95</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_variable" href="class_vibration_detector.html#add86750dfd1683f09410d3fe3822a950">vec_colored_point_handlers_</a>.size(); i++)</div>
<div class="line"><span class="lineno">   96</span>        {</div>
<div class="line"><span class="lineno">   97</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_vibration_detector.html#add86750dfd1683f09410d3fe3822a950">vec_colored_point_handlers_</a>[i]-&gt;<a class="code hl_function" href="class_vibrating_point.html#a342c75a6ac0f9ab85de1a0dd663eab03">VibratingPoint::IsInteracted</a>(mouse_coordinates))</div>
<div class="line"><span class="lineno">   98</span>            {</div>
<div class="line"><span class="lineno">   99</span>                <a class="code hl_variable" href="class_vibration_detector.html#add86750dfd1683f09410d3fe3822a950">vec_colored_point_handlers_</a>[i]-&gt;SetHistogramFlag(<span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  100</span>                flag_colored_interacted_ = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  101</span>            }</div>
<div class="line"><span class="lineno">  102</span>        }</div>
<div class="line"><span class="lineno">  103</span>        <span class="keywordflow">if</span> (flag_lonely_interacted_ == <span class="keyword">false</span> &amp;&amp; flag_colored_interacted_ == <span class="keyword">false</span>)</div>
<div class="line"><span class="lineno">  104</span>            <a class="code hl_function" href="class_vibration_detector.html#a176e5b0d0ca409c6cfcacdeca13240de">CreateNewPoint</a>(mouse_coordinates);</div>
<div class="line"><span class="lineno">  105</span>    }</div>
<div class="line"><span class="lineno">  106</span>}</div>
<div class="ttc" id="aclass_vibration_detector_html_a176e5b0d0ca409c6cfcacdeca13240de"><div class="ttname"><a href="class_vibration_detector.html#a176e5b0d0ca409c6cfcacdeca13240de">VibrationDetector::CreateNewPoint</a></div><div class="ttdeci">void CreateNewPoint(Point2f mouse_coordinates)</div><div class="ttdoc">Создаем &quot;обычную&quot; точку</div><div class="ttdef"><b>Definition:</b> <a href="vibration__detector_8cpp_source.html#l00057">vibration_detector.cpp:57</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae2fadec69d259a03125901ad988e7137" name="ae2fadec69d259a03125901ad988e7137"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2fadec69d259a03125901ad988e7137">&#9670;&#160;</a></span>MakeWarpedFrame()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Mat VibrationDetector::MakeWarpedFrame </td>
          <td>(</td>
          <td class="paramtype">Mat&#160;</td>
          <td class="paramname"><em>frame</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; Point2i &gt;&#160;</td>
          <td class="paramname"><em>warping_figure</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Удаляет перспективные искажения </p>

<p class="definition">См. определение в файле <a class="el" href="vibration__detector_8cpp_source.html">vibration_detector.cpp</a> строка <a class="el" href="vibration__detector_8cpp_source.html#l00310">310</a></p>
<div class="fragment"><div class="line"><span class="lineno">  311</span>{</div>
<div class="line"><span class="lineno">  312</span>    <span class="keywordtype">int</span> coeff = 1;</div>
<div class="line"><span class="lineno">  313</span> </div>
<div class="line"><span class="lineno">  314</span>    Point2f src[4] = { warping_figure[0], warping_figure[1], warping_figure[2], warping_figure[3] };</div>
<div class="line"><span class="lineno">  315</span> </div>
<div class="line"><span class="lineno">  316</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 4; i++)</div>
<div class="line"><span class="lineno">  317</span>    {</div>
<div class="line"><span class="lineno">  318</span>        src[i].x = src[i].x * coeff;</div>
<div class="line"><span class="lineno">  319</span>        src[i].y = src[i].y * coeff;</div>
<div class="line"><span class="lineno">  320</span>        warping_figure[i].x = warping_figure[i].x * coeff;</div>
<div class="line"><span class="lineno">  321</span>        warping_figure[i].y = warping_figure[i].y * coeff;</div>
<div class="line"><span class="lineno">  322</span>    }</div>
<div class="line"><span class="lineno">  323</span> </div>
<div class="line"><span class="lineno">  324</span>    <span class="comment">/*float w =</span></div>
<div class="line"><span class="lineno">  325</span><span class="comment">        sqrt((warping_figure[2].x - warping_figure[3].x) * (warping_figure[2].x - warping_figure[3].x)</span></div>
<div class="line"><span class="lineno">  326</span><span class="comment">        +</span></div>
<div class="line"><span class="lineno">  327</span><span class="comment">        (warping_figure[2].y - warping_figure[3].y) * (warping_figure[2].y - warping_figure[3].y)) * 2 / 3;*/</span></div>
<div class="line"><span class="lineno">  328</span>    <span class="keywordtype">float</span> h =</div>
<div class="line"><span class="lineno">  329</span>        sqrt((warping_figure[1].x - warping_figure[3].x) * (warping_figure[1].x - warping_figure[3].x)</div>
<div class="line"><span class="lineno">  330</span>        +</div>
<div class="line"><span class="lineno">  331</span>        (warping_figure[1].y - warping_figure[3].y) * (warping_figure[1].y - warping_figure[3].y));</div>
<div class="line"><span class="lineno">  332</span>    <span class="keywordtype">float</span> w = h * 2 / 3;</div>
<div class="line"><span class="lineno">  333</span> </div>
<div class="line"><span class="lineno">  334</span>    Point2f dst[4] = { {0.0f,0.0f},{w,0.0f},{0.0f,h},{w,h} };</div>
<div class="line"><span class="lineno">  335</span> </div>
<div class="line"><span class="lineno">  336</span>    Mat matrix = getPerspectiveTransform(src, dst);</div>
<div class="line"><span class="lineno">  337</span>    warpPerspective(frame, frame, matrix, Point(w, h));</div>
<div class="line"><span class="lineno">  338</span> </div>
<div class="line"><span class="lineno">  339</span>    <span class="keywordflow">return</span> frame;</div>
<div class="line"><span class="lineno">  340</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a3596d10b3b4e68b7c4151631fbb7aeb1" name="a3596d10b3b4e68b7c4151631fbb7aeb1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3596d10b3b4e68b7c4151631fbb7aeb1">&#9670;&#160;</a></span>OnMouse()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void VibrationDetector::OnMouse </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>userdata</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>callback functions for detecting the click </p>

<p class="definition">См. определение в файле <a class="el" href="vibration__detector_8cpp_source.html">vibration_detector.cpp</a> строка <a class="el" href="vibration__detector_8cpp_source.html#l00217">217</a></p>
<div class="fragment"><div class="line"><span class="lineno">  218</span>{</div>
<div class="line"><span class="lineno">  219</span>    <a class="code hl_class" href="class_vibration_detector.html">VibrationDetector</a>* d = <span class="keyword">static_cast&lt;</span><a class="code hl_class" href="class_vibration_detector.html">VibrationDetector</a>*<span class="keyword">&gt;</span>(userdata);</div>
<div class="line"><span class="lineno">  220</span>    d-&gt;<a class="code hl_function" href="class_vibration_detector.html#a7b586f40cc32c90aef3467d2c906758a">DetectEvent</a>(event, x, y, flags);</div>
<div class="line"><span class="lineno">  221</span>}</div>
<div class="ttc" id="aclass_vibration_detector_html"><div class="ttname"><a href="class_vibration_detector.html">VibrationDetector</a></div><div class="ttdoc">Класс для создания объектов-детекторов вибрации</div><div class="ttdef"><b>Definition:</b> <a href="vibration__detector_8h_source.html#l00027">vibration_detector.h:28</a></div></div>
<div class="ttc" id="aclass_vibration_detector_html_a7b586f40cc32c90aef3467d2c906758a"><div class="ttname"><a href="class_vibration_detector.html#a7b586f40cc32c90aef3467d2c906758a">VibrationDetector::DetectEvent</a></div><div class="ttdeci">void DetectEvent(int event, int x, int y, int flags)</div><div class="ttdoc">callback functions for detecting the click</div><div class="ttdef"><b>Definition:</b> <a href="vibration__detector_8cpp_source.html#l00224">vibration_detector.cpp:224</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a30c131133b8faa624d16839036c2a046" name="a30c131133b8faa624d16839036c2a046"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a30c131133b8faa624d16839036c2a046">&#9670;&#160;</a></span>RoiSelectionModeHandler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void VibrationDetector::RoiSelectionModeHandler </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>y</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Режим выделения региона интереса </p>

<p class="definition">См. определение в файле <a class="el" href="vibration__detector_8cpp_source.html">vibration_detector.cpp</a> строка <a class="el" href="vibration__detector_8cpp_source.html#l00272">272</a></p>
<div class="fragment"><div class="line"><span class="lineno">  273</span>{</div>
<div class="line"><span class="lineno">  274</span>    <span class="keywordflow">switch</span> (event)</div>
<div class="line"><span class="lineno">  275</span>    {</div>
<div class="line"><span class="lineno">  276</span>    <span class="keywordflow">case</span> EVENT_LBUTTONDOWN:</div>
<div class="line"><span class="lineno">  277</span>    {</div>
<div class="line"><span class="lineno">  278</span>        <span class="comment">// Удаляем старые &quot;цветные&quot; точки</span></div>
<div class="line"><span class="lineno">  279</span>        <a class="code hl_function" href="class_vibration_detector.html#ab0f3c59d611f15ff9505429bcf2e45b7">DeleteColoredPoints</a>();</div>
<div class="line"><span class="lineno">  280</span>        <span class="comment">// Делаем флаг для выделения ROI активным</span></div>
<div class="line"><span class="lineno">  281</span>        <a class="code hl_variable" href="class_vibration_detector.html#aacb53723f4a18df998738d0d54c5290b">roi_selecting_</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  282</span>        <span class="comment">// Сохраняем координаты клика как одну из границ ROI</span></div>
<div class="line"><span class="lineno">  283</span>        <a class="code hl_variable" href="class_vibration_detector.html#aef49bdadca0536214393e22addf4ce04">tl_click_coords_</a>.x = x;</div>
<div class="line"><span class="lineno">  284</span>        <a class="code hl_variable" href="class_vibration_detector.html#aef49bdadca0536214393e22addf4ce04">tl_click_coords_</a>.y = y;</div>
<div class="line"><span class="lineno">  285</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  286</span>    }</div>
<div class="line"><span class="lineno">  287</span>    <span class="keywordflow">case</span> EVENT_LBUTTONUP:</div>
<div class="line"><span class="lineno">  288</span>    {</div>
<div class="line"><span class="lineno">  289</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_vibration_detector.html#aacb53723f4a18df998738d0d54c5290b">roi_selecting_</a>)</div>
<div class="line"><span class="lineno">  290</span>        {</div>
<div class="line"><span class="lineno">  291</span>            <span class="comment">// Отключаем флаг для выделения ROI</span></div>
<div class="line"><span class="lineno">  292</span>            <a class="code hl_variable" href="class_vibration_detector.html#aacb53723f4a18df998738d0d54c5290b">roi_selecting_</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  293</span>            <a class="code hl_variable" href="class_vibration_detector.html#afd9f8f38bcde73bb14c9cf643f270d36">roi_selected_</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  294</span>            <span class="comment">// Сохраняем последние позиции</span></div>
<div class="line"><span class="lineno">  295</span>            <a class="code hl_variable" href="class_vibration_detector.html#a69f64f7b483a4295abd6e5a48ab161ff">last_mouse_position_</a>.x = x;</div>
<div class="line"><span class="lineno">  296</span>            <a class="code hl_variable" href="class_vibration_detector.html#a69f64f7b483a4295abd6e5a48ab161ff">last_mouse_position_</a>.y = y;</div>
<div class="line"><span class="lineno">  297</span>        }</div>
<div class="line"><span class="lineno">  298</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  299</span>    }</div>
<div class="line"><span class="lineno">  300</span>    <span class="keywordflow">case</span> EVENT_MOUSEMOVE:</div>
<div class="line"><span class="lineno">  301</span>    {</div>
<div class="line"><span class="lineno">  302</span>        <span class="comment">// Координаты последнего перемещения мыши</span></div>
<div class="line"><span class="lineno">  303</span>        <a class="code hl_variable" href="class_vibration_detector.html#a69f64f7b483a4295abd6e5a48ab161ff">last_mouse_position_</a>.x = x;</div>
<div class="line"><span class="lineno">  304</span>        <a class="code hl_variable" href="class_vibration_detector.html#a69f64f7b483a4295abd6e5a48ab161ff">last_mouse_position_</a>.y = y;</div>
<div class="line"><span class="lineno">  305</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  306</span>    }</div>
<div class="line"><span class="lineno">  307</span>    }</div>
<div class="line"><span class="lineno">  308</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="af1da28823c948acc115fc862378b62d8" name="af1da28823c948acc115fc862378b62d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1da28823c948acc115fc862378b62d8">&#9670;&#160;</a></span>ServeTheQueues()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void VibrationDetector::ServeTheQueues </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Обслуживает очереди на удаление и создание. Необходимо для того, чтобы не нарушить нумерацию точек во время выполнения основного цикла </p>

<p class="definition">См. определение в файле <a class="el" href="vibration__detector_8cpp_source.html">vibration_detector.cpp</a> строка <a class="el" href="vibration__detector_8cpp_source.html#l00038">38</a></p>
<div class="fragment"><div class="line"><span class="lineno">   39</span>{</div>
<div class="line"><span class="lineno">   40</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_variable" href="class_vibration_detector.html#a51842be0abc4ac57d3e07bbb7ff33d8e">l_click_queue_</a>.size(); i++)</div>
<div class="line"><span class="lineno">   41</span>    {</div>
<div class="line"><span class="lineno">   42</span>        <a class="code hl_function" href="class_vibration_detector.html#aa43b85f7a90ea3021b63608b378a81f4">LeftClickHandler</a>(<a class="code hl_variable" href="class_vibration_detector.html#a51842be0abc4ac57d3e07bbb7ff33d8e">l_click_queue_</a>[i]);</div>
<div class="line"><span class="lineno">   43</span>    }</div>
<div class="line"><span class="lineno">   44</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_variable" href="class_vibration_detector.html#a48e1f58a28d451445a23ea6575ef9b38">c_point_queue_</a>.size(); i++)</div>
<div class="line"><span class="lineno">   45</span>    {</div>
<div class="line"><span class="lineno">   46</span>        <a class="code hl_function" href="class_vibration_detector.html#a725d87ae6c09ef9f18c95f8490086478">CreateNewColoredPoint</a>(<a class="code hl_variable" href="class_vibration_detector.html#a48e1f58a28d451445a23ea6575ef9b38">c_point_queue_</a>[i]);</div>
<div class="line"><span class="lineno">   47</span>    }</div>
<div class="line"><span class="lineno">   48</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_variable" href="class_vibration_detector.html#a290fb09835aef1220fc44485e0f391de">delete_queue_</a>.size(); i++)</div>
<div class="line"><span class="lineno">   49</span>    {</div>
<div class="line"><span class="lineno">   50</span>        <a class="code hl_function" href="class_vibration_detector.html#a6c1ef9b4b8a5a8f2159398a05571c410">DeletePoints</a>(<a class="code hl_variable" href="class_vibration_detector.html#a290fb09835aef1220fc44485e0f391de">delete_queue_</a>[i]);</div>
<div class="line"><span class="lineno">   51</span>    }</div>
<div class="line"><span class="lineno">   52</span>    <a class="code hl_variable" href="class_vibration_detector.html#a51842be0abc4ac57d3e07bbb7ff33d8e">l_click_queue_</a>.clear();</div>
<div class="line"><span class="lineno">   53</span>    <a class="code hl_variable" href="class_vibration_detector.html#a48e1f58a28d451445a23ea6575ef9b38">c_point_queue_</a>.clear();</div>
<div class="line"><span class="lineno">   54</span>    <a class="code hl_variable" href="class_vibration_detector.html#a290fb09835aef1220fc44485e0f391de">delete_queue_</a>.clear();</div>
<div class="line"><span class="lineno">   55</span>}</div>
<div class="ttc" id="aclass_vibration_detector_html_a6c1ef9b4b8a5a8f2159398a05571c410"><div class="ttname"><a href="class_vibration_detector.html#a6c1ef9b4b8a5a8f2159398a05571c410">VibrationDetector::DeletePoints</a></div><div class="ttdeci">void DeletePoints(Point2i mouse_coordinates)</div><div class="ttdoc">Удаляем объект &quot;обычную&quot; точку</div><div class="ttdef"><b>Definition:</b> <a href="vibration__detector_8cpp_source.html#l00114">vibration_detector.cpp:114</a></div></div>
<div class="ttc" id="aclass_vibration_detector_html_a725d87ae6c09ef9f18c95f8490086478"><div class="ttname"><a href="class_vibration_detector.html#a725d87ae6c09ef9f18c95f8490086478">VibrationDetector::CreateNewColoredPoint</a></div><div class="ttdeci">void CreateNewColoredPoint(Point2f mouse_coordinates)</div><div class="ttdoc">Обработчик &quot;цветных&quot; точек</div><div class="ttdef"><b>Definition:</b> <a href="vibration__detector_8cpp_source.html#l00108">vibration_detector.cpp:108</a></div></div>
<div class="ttc" id="aclass_vibration_detector_html_aa43b85f7a90ea3021b63608b378a81f4"><div class="ttname"><a href="class_vibration_detector.html#aa43b85f7a90ea3021b63608b378a81f4">VibrationDetector::LeftClickHandler</a></div><div class="ttdeci">void LeftClickHandler(Point2f mouse_coordinates)</div><div class="ttdoc">Обработчик левых кликов</div><div class="ttdef"><b>Definition:</b> <a href="vibration__detector_8cpp_source.html#l00063">vibration_detector.cpp:63</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a81f38d7f3d0599b01186a122d68d09ee" name="a81f38d7f3d0599b01186a122d68d09ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81f38d7f3d0599b01186a122d68d09ee">&#9670;&#160;</a></span>TrackAndCalc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void VibrationDetector::TrackAndCalc </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Трекает точки алгоритмом Лукаса-Канаде и вызывает БПФ </p>

<p class="definition">См. определение в файле <a class="el" href="vibration__detector_8cpp_source.html">vibration_detector.cpp</a> строка <a class="el" href="vibration__detector_8cpp_source.html#l00342">342</a></p>
<div class="fragment"><div class="line"><span class="lineno">  343</span>{</div>
<div class="line"><span class="lineno">  344</span>    <span class="comment">// Находим и удаляем точки с низким параметром confidence</span></div>
<div class="line"><span class="lineno">  345</span>    <a class="code hl_function" href="class_vibration_detector.html#aba1212595904b3a3d4f1ef8ebef89d87">FindAndDeleteUncofidentPoints</a>();</div>
<div class="line"><span class="lineno">  346</span> </div>
<div class="line"><span class="lineno">  347</span>    std::vector&lt;Point2f&gt; PrevPts;</div>
<div class="line"><span class="lineno">  348</span>    std::vector&lt;Point2f&gt; NextPts;</div>
<div class="line"><span class="lineno">  349</span>    std::vector&lt;uchar&gt; status;</div>
<div class="line"><span class="lineno">  350</span>    std::vector&lt;float&gt; error;</div>
<div class="line"><span class="lineno">  351</span> </div>
<div class="line"><span class="lineno">  352</span>    <span class="comment">// &quot;Достаем&quot; из lonely point handler&#39;ов последние найденные точки, чтобы использовать их в качестве &quot;начальных&quot; значений для calcOpticalFlowPyrLK()</span></div>
<div class="line"><span class="lineno">  353</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_variable" href="class_vibration_detector.html#a5085a389a0ff26924331ab5022eea1af">vec_lonely_point_handlers_</a>.size(); i++)</div>
<div class="line"><span class="lineno">  354</span>    {</div>
<div class="line"><span class="lineno">  355</span>        PrevPts.push_back(<a class="code hl_variable" href="class_vibration_detector.html#a5085a389a0ff26924331ab5022eea1af">vec_lonely_point_handlers_</a>[i]-&gt;GetLastFoundCoordinates());</div>
<div class="line"><span class="lineno">  356</span>    }</div>
<div class="line"><span class="lineno">  357</span>    <span class="comment">// &quot;Достаем&quot; из colored point handler&#39;ов последние найденные точки, чтобы использовать их в качестве &quot;начальных&quot; значений для calcOpticalFlowPyrLK()</span></div>
<div class="line"><span class="lineno">  358</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_variable" href="class_vibration_detector.html#add86750dfd1683f09410d3fe3822a950">vec_colored_point_handlers_</a>.size(); i++)</div>
<div class="line"><span class="lineno">  359</span>    {</div>
<div class="line"><span class="lineno">  360</span> </div>
<div class="line"><span class="lineno">  361</span>        PrevPts.push_back(<a class="code hl_variable" href="class_vibration_detector.html#add86750dfd1683f09410d3fe3822a950">vec_colored_point_handlers_</a>[i]-&gt;GetLastFoundCoordinates());</div>
<div class="line"><span class="lineno">  362</span>    }</div>
<div class="line"><span class="lineno">  363</span> </div>
<div class="line"><span class="lineno">  364</span>    <span class="keywordflow">if</span> ((!<a class="code hl_variable" href="class_vibration_detector.html#a5085a389a0ff26924331ab5022eea1af">vec_lonely_point_handlers_</a>.empty()) || (!<a class="code hl_variable" href="class_vibration_detector.html#add86750dfd1683f09410d3fe3822a950">vec_colored_point_handlers_</a>.empty()))</div>
<div class="line"><span class="lineno">  365</span>        <span class="comment">// вызов Lucas-Kanade алгоритма</span></div>
<div class="line"><span class="lineno">  366</span>        calcOpticalFlowPyrLK(</div>
<div class="line"><span class="lineno">  367</span>            <a class="code hl_variable" href="class_vibration_detector.html#a3c524b0b7ab0348fe4fb6018f64b4dcf">prev_img_gray_</a>,</div>
<div class="line"><span class="lineno">  368</span>            <a class="code hl_variable" href="class_vibration_detector.html#a016d906a3746e6d61b9468c7127a717f">next_img_gray_</a>,</div>
<div class="line"><span class="lineno">  369</span>            PrevPts,</div>
<div class="line"><span class="lineno">  370</span>            NextPts,</div>
<div class="line"><span class="lineno">  371</span>            status,</div>
<div class="line"><span class="lineno">  372</span>            error,</div>
<div class="line"><span class="lineno">  373</span>            Size(<a class="code hl_variable" href="class_vibration_detector.html#abc8267e01dbf92e742db792c530e490a">lk_win_size_</a>, <a class="code hl_variable" href="class_vibration_detector.html#abc8267e01dbf92e742db792c530e490a">lk_win_size_</a>),</div>
<div class="line"><span class="lineno">  374</span>            <a class="code hl_variable" href="class_vibration_detector.html#a2a3692c7dd7a78cbc9af4d070d71264a">level_amount_</a>,</div>
<div class="line"><span class="lineno">  375</span>            TermCriteria(</div>
<div class="line"><span class="lineno">  376</span>                TermCriteria::MAX_ITER | TermCriteria::EPS,</div>
<div class="line"><span class="lineno">  377</span>                500,</div>
<div class="line"><span class="lineno">  378</span>                0.001</div>
<div class="line"><span class="lineno">  379</span>            ),</div>
<div class="line"><span class="lineno">  380</span>            OPTFLOW_LK_GET_MIN_EIGENVALS</div>
<div class="line"><span class="lineno">  381</span>        );</div>
<div class="line"><span class="lineno">  382</span> </div>
<div class="line"><span class="lineno">  383</span>    <span class="comment">// проверяем равны ли размеры векторов хэндлеров точек и найденных точек на картинке</span></div>
<div class="line"><span class="lineno">  384</span>    <span class="keywordflow">if</span> (NextPts.size() != (<a class="code hl_variable" href="class_vibration_detector.html#a5085a389a0ff26924331ab5022eea1af">vec_lonely_point_handlers_</a>.size() + <a class="code hl_variable" href="class_vibration_detector.html#add86750dfd1683f09410d3fe3822a950">vec_colored_point_handlers_</a>.size()))</div>
<div class="line"><span class="lineno">  385</span>    {</div>
<div class="line"><span class="lineno">  386</span>        std::cout &lt;&lt; <span class="stringliteral">&quot;DEBUG: ERROR - NextPts size doesnt match vec_point_handlers_ size&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  387</span>    }</div>
<div class="line"><span class="lineno">  388</span> </div>
<div class="line"><span class="lineno">  389</span>    std::vector&lt;double&gt; point_amplitudes;</div>
<div class="line"><span class="lineno">  390</span> </div>
<div class="line"><span class="lineno">  391</span>    <span class="comment">// Закидываем найденные значения обратно в point handler&#39;ы</span></div>
<div class="line"><span class="lineno">  392</span>    <span class="comment">// Сначала проходимся по lonely хэндлерам</span></div>
<div class="line"><span class="lineno">  393</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_variable" href="class_vibration_detector.html#a5085a389a0ff26924331ab5022eea1af">vec_lonely_point_handlers_</a>.size(); i++)</div>
<div class="line"><span class="lineno">  394</span>    {</div>
<div class="line"><span class="lineno">  395</span>        <a class="code hl_variable" href="class_vibration_detector.html#a5085a389a0ff26924331ab5022eea1af">vec_lonely_point_handlers_</a>[i]-&gt;AddNewPointPosition(NextPts[i]);</div>
<div class="line"><span class="lineno">  396</span>        <a class="code hl_variable" href="class_vibration_detector.html#a5085a389a0ff26924331ab5022eea1af">vec_lonely_point_handlers_</a>[i]-&gt;AddNewPointTime(<a class="code hl_variable" href="class_vibration_detector.html#a4cf6c4a052388d4fb17ec01815bc0bbe">frame_time_</a>);</div>
<div class="line"><span class="lineno">  397</span>        <span class="comment">// Вызов БПФ (FFT)</span></div>
<div class="line"><span class="lineno">  398</span>        <a class="code hl_variable" href="class_vibration_detector.html#a5085a389a0ff26924331ab5022eea1af">vec_lonely_point_handlers_</a>[i]-&gt;ExecuteFFT();</div>
<div class="line"><span class="lineno">  399</span>        <span class="comment">// Вычисляем амплитуду</span></div>
<div class="line"><span class="lineno">  400</span>        <a class="code hl_variable" href="class_vibration_detector.html#a5085a389a0ff26924331ab5022eea1af">vec_lonely_point_handlers_</a>[i]-&gt;CalculateAmplitude();</div>
<div class="line"><span class="lineno">  401</span>        <span class="keywordtype">double</span> ampl_x = <a class="code hl_variable" href="class_vibration_detector.html#a5085a389a0ff26924331ab5022eea1af">vec_lonely_point_handlers_</a>[i]-&gt;GetCurrentAmplitude().x, ampl_y = <a class="code hl_variable" href="class_vibration_detector.html#a5085a389a0ff26924331ab5022eea1af">vec_lonely_point_handlers_</a>[i]-&gt;GetCurrentAmplitude().y;</div>
<div class="line"><span class="lineno">  402</span>        point_amplitudes.push_back(sqrt(ampl_x * ampl_x + ampl_y * ampl_y));</div>
<div class="line"><span class="lineno">  403</span>    }</div>
<div class="line"><span class="lineno">  404</span>    <span class="comment">// После проходимся по colored хэндлерам</span></div>
<div class="line"><span class="lineno">  405</span>    <span class="comment">// </span></div>
<div class="line"><span class="lineno">  406</span>    <span class="comment">// Небольшое пояснение:</span></div>
<div class="line"><span class="lineno">  407</span>    <span class="comment">// В контейнере NextPts содержатся одновременно lonely и colored точки (причём именно в таком порядке). По сути они делят NextPts на две части - левую (lonely) и правую (colored)</span></div>
<div class="line"><span class="lineno">  408</span>    <span class="comment">// Поэтому, добавляя в хэндлер цветных точек новые координаты, надо идти по NextPts, учитывая возможное (если таковые были добавлены) наличие lonely точек в левой части</span></div>
<div class="line"><span class="lineno">  409</span>    <span class="comment">// Для этого индекс у NextPts = индекс вектора с хэндлерами colored точек + размер вектора с хэндлерами lonely точек (i + vec_lonely_point_handlers_.size())</span></div>
<div class="line"><span class="lineno">  410</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_variable" href="class_vibration_detector.html#add86750dfd1683f09410d3fe3822a950">vec_colored_point_handlers_</a>.size(); i++)</div>
<div class="line"><span class="lineno">  411</span>    {</div>
<div class="line"><span class="lineno">  412</span>        <a class="code hl_variable" href="class_vibration_detector.html#add86750dfd1683f09410d3fe3822a950">vec_colored_point_handlers_</a>[i]-&gt;AddNewPointPosition(NextPts[i + <a class="code hl_variable" href="class_vibration_detector.html#a5085a389a0ff26924331ab5022eea1af">vec_lonely_point_handlers_</a>.size()]);</div>
<div class="line"><span class="lineno">  413</span>        <a class="code hl_variable" href="class_vibration_detector.html#add86750dfd1683f09410d3fe3822a950">vec_colored_point_handlers_</a>[i]-&gt;AddNewPointTime(<a class="code hl_variable" href="class_vibration_detector.html#a4cf6c4a052388d4fb17ec01815bc0bbe">frame_time_</a>);</div>
<div class="line"><span class="lineno">  414</span>        <span class="comment">// Вызов БПФ (FFT)</span></div>
<div class="line"><span class="lineno">  415</span>        <a class="code hl_variable" href="class_vibration_detector.html#add86750dfd1683f09410d3fe3822a950">vec_colored_point_handlers_</a>[i]-&gt;ExecuteFFT();</div>
<div class="line"><span class="lineno">  416</span>        <span class="comment">// Вычисляем амплитуду</span></div>
<div class="line"><span class="lineno">  417</span>        <a class="code hl_variable" href="class_vibration_detector.html#add86750dfd1683f09410d3fe3822a950">vec_colored_point_handlers_</a>[i]-&gt;CalculateAmplitude();</div>
<div class="line"><span class="lineno">  418</span>        <span class="keywordtype">double</span> ampl_x = <a class="code hl_variable" href="class_vibration_detector.html#add86750dfd1683f09410d3fe3822a950">vec_colored_point_handlers_</a>[i]-&gt;GetCurrentAmplitude().x, ampl_y = <a class="code hl_variable" href="class_vibration_detector.html#add86750dfd1683f09410d3fe3822a950">vec_colored_point_handlers_</a>[i]-&gt;GetCurrentAmplitude().y;</div>
<div class="line"><span class="lineno">  419</span>        point_amplitudes.push_back(sqrt(ampl_x * ampl_x + ampl_y * ampl_y));</div>
<div class="line"><span class="lineno">  420</span>    }</div>
<div class="line"><span class="lineno">  421</span> </div>
<div class="line"><span class="lineno">  422</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="class_vibration_detector.html#add86750dfd1683f09410d3fe3822a950">vec_colored_point_handlers_</a>.empty() || !<a class="code hl_variable" href="class_vibration_detector.html#a5085a389a0ff26924331ab5022eea1af">vec_lonely_point_handlers_</a>.empty())</div>
<div class="line"><span class="lineno">  423</span>    {</div>
<div class="line"><span class="lineno">  424</span>        <span class="keywordtype">int</span> max_idx = <a class="code hl_function" href="group___helper_functions.html#gacc82d70b750eb60ad49c7a36e5c7f0ca">HelperFunctions::FindGlobalMaxIdx</a>(point_amplitudes);</div>
<div class="line"><span class="lineno">  425</span>        <span class="keywordtype">int</span> min_idx = <a class="code hl_function" href="group___helper_functions.html#gabe168b250f6a7c6c89fe5b685c3898a0">HelperFunctions::FindGlobalMinIdx</a>(point_amplitudes);</div>
<div class="line"><span class="lineno">  426</span> </div>
<div class="line"><span class="lineno">  427</span>        <a class="code hl_variable" href="class_vibrating_point.html#afdefa096df21cf891ae6835a6df4ffc9">VibratingPoint::extremum_amplitude_</a>.first = point_amplitudes[max_idx];</div>
<div class="line"><span class="lineno">  428</span>        <a class="code hl_variable" href="class_vibrating_point.html#afdefa096df21cf891ae6835a6df4ffc9">VibratingPoint::extremum_amplitude_</a>.second = *(std::min_element(point_amplitudes.begin(), point_amplitudes.end()));</div>
<div class="line"><span class="lineno">  429</span>    }</div>
<div class="line"><span class="lineno">  430</span>}</div>
<div class="ttc" id="aclass_vibration_detector_html_aba1212595904b3a3d4f1ef8ebef89d87"><div class="ttname"><a href="class_vibration_detector.html#aba1212595904b3a3d4f1ef8ebef89d87">VibrationDetector::FindAndDeleteUncofidentPoints</a></div><div class="ttdeci">void FindAndDeleteUncofidentPoints()</div><div class="ttdoc">Удаляет &quot;цветные&quot; и &quot;обычные&quot; точки, если уровень доверия к нми слишком низкий</div><div class="ttdef"><b>Definition:</b> <a href="vibration__detector_8cpp_source.html#l00194">vibration_detector.cpp:194</a></div></div>
<div class="ttc" id="agroup___helper_functions_html_gabe168b250f6a7c6c89fe5b685c3898a0"><div class="ttname"><a href="group___helper_functions.html#gabe168b250f6a7c6c89fe5b685c3898a0">HelperFunctions::FindGlobalMinIdx</a></div><div class="ttdeci">int FindGlobalMinIdx(std::vector&lt; T &gt; src)</div><div class="ttdoc">Возвращает индекс самого маленького элемента вектора src.</div><div class="ttdef"><b>Definition:</b> <a href="helper_8h_source.html#l00149">helper.h:149</a></div></div>
<div class="ttc" id="agroup___helper_functions_html_gacc82d70b750eb60ad49c7a36e5c7f0ca"><div class="ttname"><a href="group___helper_functions.html#gacc82d70b750eb60ad49c7a36e5c7f0ca">HelperFunctions::FindGlobalMaxIdx</a></div><div class="ttdeci">int FindGlobalMaxIdx(std::vector&lt; T &gt; src)</div><div class="ttdoc">Возвращает индекс самого большого элемента вектора src.</div><div class="ttdef"><b>Definition:</b> <a href="helper_8h_source.html#l00127">helper.h:127</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Данные класса</h2>
<a id="a48e1f58a28d451445a23ea6575ef9b38" name="a48e1f58a28d451445a23ea6575ef9b38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48e1f58a28d451445a23ea6575ef9b38">&#9670;&#160;</a></span>c_point_queue_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;Point2f&gt; VibrationDetector::c_point_queue_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Очередь на создание "цветных" точек </p>

<p class="definition">См. определение в файле <a class="el" href="vibration__detector_8h_source.html">vibration_detector.h</a> строка <a class="el" href="vibration__detector_8h_source.html#l00166">166</a></p>

</div>
</div>
<a id="af75ebe29dd6955ae7a249c4c854c2657" name="af75ebe29dd6955ae7a249c4c854c2657"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af75ebe29dd6955ae7a249c4c854c2657">&#9670;&#160;</a></span>colored_point_mode_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int VibrationDetector::colored_point_mode_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Текущий режим подсветки точек при выбранном регионе интереса (по амплитуде/по частоте) </p>

<p class="definition">См. определение в файле <a class="el" href="vibration__detector_8h_source.html">vibration_detector.h</a> строка <a class="el" href="vibration__detector_8h_source.html#l00213">213</a></p>

</div>
</div>
<a id="ad3748489d876505deab724e16cf1e767" name="ad3748489d876505deab724e16cf1e767"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad3748489d876505deab724e16cf1e767">&#9670;&#160;</a></span>current_mode_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int VibrationDetector::current_mode_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Основной режим работы (enum main_mode) </p>

<p class="definition">См. определение в файле <a class="el" href="vibration__detector_8h_source.html">vibration_detector.h</a> строка <a class="el" href="vibration__detector_8h_source.html#l00150">150</a></p>

</div>
</div>
<a id="a3c823c70560e24ce3e8484ae25440357" name="a3c823c70560e24ce3e8484ae25440357"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c823c70560e24ce3e8484ae25440357">&#9670;&#160;</a></span>current_tracking_frame_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Mat VibrationDetector::current_tracking_frame_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Текущий Mat-instance только что найденного кадра из видео </p>

<p class="definition">См. определение в файле <a class="el" href="vibration__detector_8h_source.html">vibration_detector.h</a> строка <a class="el" href="vibration__detector_8h_source.html#l00199">199</a></p>

</div>
</div>
<a id="a290fb09835aef1220fc44485e0f391de" name="a290fb09835aef1220fc44485e0f391de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a290fb09835aef1220fc44485e0f391de">&#9670;&#160;</a></span>delete_queue_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;Point2i&gt; VibrationDetector::delete_queue_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Очередь на удаление точек </p>

<p class="definition">См. определение в файле <a class="el" href="vibration__detector_8h_source.html">vibration_detector.h</a> строка <a class="el" href="vibration__detector_8h_source.html#l00170">170</a></p>

</div>
</div>
<a id="a779ca47185d36d5fe0cf216c1cb9f48e" name="a779ca47185d36d5fe0cf216c1cb9f48e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a779ca47185d36d5fe0cf216c1cb9f48e">&#9670;&#160;</a></span>fps_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int VibrationDetector::fps_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>ФПС входного видео (две ширины полосы частот вибрации, которые можно отследить) </p>

<p class="definition">См. определение в файле <a class="el" href="vibration__detector_8h_source.html">vibration_detector.h</a> строка <a class="el" href="vibration__detector_8h_source.html#l00281">281</a></p>

</div>
</div>
<a id="a57b58c6da673cafcca839e5f48d9045c" name="a57b58c6da673cafcca839e5f48d9045c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57b58c6da673cafcca839e5f48d9045c">&#9670;&#160;</a></span>frame_handler</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_frame_handler.html">FrameHandler</a>* VibrationDetector::frame_handler</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Фреймпроцессор </p>

<p class="definition">См. определение в файле <a class="el" href="vibration__detector_8h_source.html">vibration_detector.h</a> строка <a class="el" href="vibration__detector_8h_source.html#l00129">129</a></p>

</div>
</div>
<a id="a4cf6c4a052388d4fb17ec01815bc0bbe" name="a4cf6c4a052388d4fb17ec01815bc0bbe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4cf6c4a052388d4fb17ec01815bc0bbe">&#9670;&#160;</a></span>frame_time_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double VibrationDetector::frame_time_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Текущее время кадра в мс (таймкод) </p>

<p class="definition">См. определение в файле <a class="el" href="vibration__detector_8h_source.html">vibration_detector.h</a> строка <a class="el" href="vibration__detector_8h_source.html#l00285">285</a></p>

</div>
</div>
<a id="ace1d4e3045fea22507c11b44cc6fb920" name="ace1d4e3045fea22507c11b44cc6fb920"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace1d4e3045fea22507c11b44cc6fb920">&#9670;&#160;</a></span>frame_to_be_shown_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Mat VibrationDetector::frame_to_be_shown_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Mat-instance, который будет показан в окне </p>
<dl class="section see"><dt>См. также</dt><dd><a class="el" href="class_vibration_detector.html#ad8741b76c24a08ec2ce54ff9d934ce76" title="Масштабирует, рисует и выводит на экран обработанный кадр с точками">DrawAndOutput()</a> </dd></dl>

<p class="definition">См. определение в файле <a class="el" href="vibration__detector_8h_source.html">vibration_detector.h</a> строка <a class="el" href="vibration__detector_8h_source.html#l00204">204</a></p>

</div>
</div>
<a id="a49b64f3fe433f06af9444e8059d0cbc6" name="a49b64f3fe433f06af9444e8059d0cbc6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a49b64f3fe433f06af9444e8059d0cbc6">&#9670;&#160;</a></span>fullscreen_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool VibrationDetector::fullscreen_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Флаг для полноэкранного режима </p>

<p class="definition">См. определение в файле <a class="el" href="vibration__detector_8h_source.html">vibration_detector.h</a> строка <a class="el" href="vibration__detector_8h_source.html#l00154">154</a></p>

</div>
</div>
<a id="a41634272ca48ff33bf21b39d11559eaa" name="a41634272ca48ff33bf21b39d11559eaa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a41634272ca48ff33bf21b39d11559eaa">&#9670;&#160;</a></span>grad_scale_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Mat VibrationDetector::grad_scale_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Изображение цветной шкалы внизу экрана </p>
<dl class="section see"><dt>См. также</dt><dd><a class="el" href="class_frame_handler.html#ac586501514225a9e054845c69fe9ccc7" title="Генерирует шкалу с градиентом и подписями. Ширина шкалы - ширина исходного видео. Высота регулируется...">FrameHandler::GenerateGradScale()</a> и <a class="el" href="class_vibration_detector.html#ad8741b76c24a08ec2ce54ff9d934ce76" title="Масштабирует, рисует и выводит на экран обработанный кадр с точками">DrawAndOutput()</a> </dd></dl>

<p class="definition">См. определение в файле <a class="el" href="vibration__detector_8h_source.html">vibration_detector.h</a> строка <a class="el" href="vibration__detector_8h_source.html#l00209">209</a></p>

</div>
</div>
<a id="a0cdb940eece1b90795717d39cbac187d" name="a0cdb940eece1b90795717d39cbac187d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0cdb940eece1b90795717d39cbac187d">&#9670;&#160;</a></span>histograms_queue_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;Point2i&gt; VibrationDetector::histograms_queue_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Очередь на отрисовку гистограм </p>

<p class="definition">См. определение в файле <a class="el" href="vibration__detector_8h_source.html">vibration_detector.h</a> строка <a class="el" href="vibration__detector_8h_source.html#l00174">174</a></p>

</div>
</div>
<a id="a5f9772794a4f76bb0503a9f046d65b72" name="a5f9772794a4f76bb0503a9f046d65b72"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f9772794a4f76bb0503a9f046d65b72">&#9670;&#160;</a></span>input_file_name_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string VibrationDetector::input_file_name_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Имя (путь) входного видео </p>

<p class="definition">См. определение в файле <a class="el" href="vibration__detector_8h_source.html">vibration_detector.h</a> строка <a class="el" href="vibration__detector_8h_source.html#l00235">235</a></p>

</div>
</div>
<a id="a51842be0abc4ac57d3e07bbb7ff33d8e" name="a51842be0abc4ac57d3e07bbb7ff33d8e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51842be0abc4ac57d3e07bbb7ff33d8e">&#9670;&#160;</a></span>l_click_queue_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;Point2i&gt; VibrationDetector::l_click_queue_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Очередь на создание "обычных" точек </p>

<p class="definition">См. определение в файле <a class="el" href="vibration__detector_8h_source.html">vibration_detector.h</a> строка <a class="el" href="vibration__detector_8h_source.html#l00162">162</a></p>

</div>
</div>
<a id="a69f64f7b483a4295abd6e5a48ab161ff" name="a69f64f7b483a4295abd6e5a48ab161ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a69f64f7b483a4295abd6e5a48ab161ff">&#9670;&#160;</a></span>last_mouse_position_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Point VibrationDetector::last_mouse_position_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Последняя позиция курсора в главном окне </p>

<p class="definition">См. определение в файле <a class="el" href="vibration__detector_8h_source.html">vibration_detector.h</a> строка <a class="el" href="vibration__detector_8h_source.html#l00146">146</a></p>

</div>
</div>
<a id="a2a3692c7dd7a78cbc9af4d070d71264a" name="a2a3692c7dd7a78cbc9af4d070d71264a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a3692c7dd7a78cbc9af4d070d71264a">&#9670;&#160;</a></span>level_amount_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int VibrationDetector::level_amount_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Количество слоев пирамиды изображений в алгоритме Л-К </p>

<p class="definition">См. определение в файле <a class="el" href="vibration__detector_8h_source.html">vibration_detector.h</a> строка <a class="el" href="vibration__detector_8h_source.html#l00274">274</a></p>

</div>
</div>
<a id="abc8267e01dbf92e742db792c530e490a" name="abc8267e01dbf92e742db792c530e490a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc8267e01dbf92e742db792c530e490a">&#9670;&#160;</a></span>lk_win_size_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int VibrationDetector::lk_win_size_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Размер окна для алгоритма Лукаса-Канаде </p>

<p class="definition">См. определение в файле <a class="el" href="vibration__detector_8h_source.html">vibration_detector.h</a> строка <a class="el" href="vibration__detector_8h_source.html#l00270">270</a></p>

</div>
</div>
<a id="a016d906a3746e6d61b9468c7127a717f" name="a016d906a3746e6d61b9468c7127a717f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a016d906a3746e6d61b9468c7127a717f">&#9670;&#160;</a></span>next_img_gray_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Mat VibrationDetector::next_img_gray_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Следующий (или текущий после "предыдущего" - смотря как удобнее для понимания) кадр видео в грейскейл и с небольшим блюром (<a class="el" href="class_frame_handler.html#a4bd1108adbbd4c21c4c3233efa8c8d1e" title="Возвращает серый кадр с блюром">FrameHandler::MakeGrayFrame()</a>) </p>

<p class="definition">См. определение в файле <a class="el" href="vibration__detector_8h_source.html">vibration_detector.h</a> строка <a class="el" href="vibration__detector_8h_source.html#l00266">266</a></p>

</div>
</div>
<a id="adda01acf92ced4b8bfa5880bb475ce55" name="adda01acf92ced4b8bfa5880bb475ce55"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adda01acf92ced4b8bfa5880bb475ce55">&#9670;&#160;</a></span>output_csv_file_name_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string VibrationDetector::output_csv_file_name_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Имя (путь) файла для хранения метаданных </p>
<dl class="section see"><dt>См. также</dt><dd><a class="el" href="class_output_to_csv.html" title="Класс для сохранения метаданных (временных и пространственных координат, ID точки)">OutputToCsv</a> </dd></dl>

<p class="definition">См. определение в файле <a class="el" href="vibration__detector_8h_source.html">vibration_detector.h</a> строка <a class="el" href="vibration__detector_8h_source.html#l00244">244</a></p>

</div>
</div>
<a id="a7e4bada48fc235b2c02ad07fcec6fdd1" name="a7e4bada48fc235b2c02ad07fcec6fdd1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e4bada48fc235b2c02ad07fcec6fdd1">&#9670;&#160;</a></span>output_file_name_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string VibrationDetector::output_file_name_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Имя (путь) видео, в котором будет результат детектинга </p>

<p class="definition">См. определение в файле <a class="el" href="vibration__detector_8h_source.html">vibration_detector.h</a> строка <a class="el" href="vibration__detector_8h_source.html#l00239">239</a></p>

</div>
</div>
<a id="af7093e56d2391aceaeb9d9cbd389eaaf" name="af7093e56d2391aceaeb9d9cbd389eaaf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7093e56d2391aceaeb9d9cbd389eaaf">&#9670;&#160;</a></span>point_id_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int VibrationDetector::point_id_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Псевдо-id (порядковывй номер точки) </p>

<p class="definition">См. определение в файле <a class="el" href="vibration__detector_8h_source.html">vibration_detector.h</a> строка <a class="el" href="vibration__detector_8h_source.html#l00142">142</a></p>

</div>
</div>
<a id="a3c524b0b7ab0348fe4fb6018f64b4dcf" name="a3c524b0b7ab0348fe4fb6018f64b4dcf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c524b0b7ab0348fe4fb6018f64b4dcf">&#9670;&#160;</a></span>prev_img_gray_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Mat VibrationDetector::prev_img_gray_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Предыдущий кадр видео в грейскейл и с небольшим блюром (<a class="el" href="class_frame_handler.html#a4bd1108adbbd4c21c4c3233efa8c8d1e" title="Возвращает серый кадр с блюром">FrameHandler::MakeGrayFrame()</a>) </p>

<p class="definition">См. определение в файле <a class="el" href="vibration__detector_8h_source.html">vibration_detector.h</a> строка <a class="el" href="vibration__detector_8h_source.html#l00262">262</a></p>

</div>
</div>
<a id="a5c0d42618889da70c073056ba3e4065c" name="a5c0d42618889da70c073056ba3e4065c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c0d42618889da70c073056ba3e4065c">&#9670;&#160;</a></span>res_mp_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float VibrationDetector::res_mp_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Коэффициент автоскейла размеров окна в зависимости от разрешения исходного видео </p>

<p class="definition">См. определение в файле <a class="el" href="vibration__detector_8h_source.html">vibration_detector.h</a> строка <a class="el" href="vibration__detector_8h_source.html#l00138">138</a></p>

</div>
</div>
<a id="afd9f8f38bcde73bb14c9cf643f270d36" name="afd9f8f38bcde73bb14c9cf643f270d36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd9f8f38bcde73bb14c9cf643f270d36">&#9670;&#160;</a></span>roi_selected_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool VibrationDetector::roi_selected_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Флаг, показывающий был ли выделен ROI или нет </p>

<p class="definition">См. определение в файле <a class="el" href="vibration__detector_8h_source.html">vibration_detector.h</a> строка <a class="el" href="vibration__detector_8h_source.html#l00226">226</a></p>

</div>
</div>
<a id="aacb53723f4a18df998738d0d54c5290b" name="aacb53723f4a18df998738d0d54c5290b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aacb53723f4a18df998738d0d54c5290b">&#9670;&#160;</a></span>roi_selecting_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool VibrationDetector::roi_selecting_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Флаг, показывающий происходит ли в данный момент выделение ROI. </p>

<p class="definition">См. определение в файле <a class="el" href="vibration__detector_8h_source.html">vibration_detector.h</a> строка <a class="el" href="vibration__detector_8h_source.html#l00222">222</a></p>

</div>
</div>
<a id="ab0fa5fb784f1db6bdb7a9d9e5d608bb3" name="ab0fa5fb784f1db6bdb7a9d9e5d608bb3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0fa5fb784f1db6bdb7a9d9e5d608bb3">&#9670;&#160;</a></span>running_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool VibrationDetector::running_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Флаг запущенного основного алгоритма </p>
<dl class="section see"><dt>См. также</dt><dd><a class="el" href="class_vibration_detector.html#ae93a14aa147af694a90c012f16efc924" title="Выполняет детекцию вибрации">ExecuteVibrationDetection()</a> </dd></dl>

<p class="definition">См. определение в файле <a class="el" href="vibration__detector_8h_source.html">vibration_detector.h</a> строка <a class="el" href="vibration__detector_8h_source.html#l00134">134</a></p>

</div>
</div>
<a id="a418071707b1348281ef2a434c42de26e" name="a418071707b1348281ef2a434c42de26e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a418071707b1348281ef2a434c42de26e">&#9670;&#160;</a></span>sensivity_in_percents_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int VibrationDetector::sensivity_in_percents_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Чувствительность при трекинге вибрации </p>
<p >Окно для изменения чувствительности вызывается кнопкой "A" при работающей проге</p>
<p >Чем выше значение - тем больше шумов будет поймано, но и тем меньше по амплитуде вибрации можно будет задетектить </p>

<p class="definition">См. определение в файле <a class="el" href="vibration__detector_8h_source.html">vibration_detector.h</a> строка <a class="el" href="vibration__detector_8h_source.html#l00194">194</a></p>

</div>
</div>
<a id="aef49bdadca0536214393e22addf4ce04" name="aef49bdadca0536214393e22addf4ce04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef49bdadca0536214393e22addf4ce04">&#9670;&#160;</a></span>tl_click_coords_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Point2i VibrationDetector::tl_click_coords_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Координаты первой точки прямоугольник (top left, bottom left, top right, bottom right - смотря "в какую сторону" выделять ROI с помощью мыши (курсора)) </p>

<p class="definition">См. определение в файле <a class="el" href="vibration__detector_8h_source.html">vibration_detector.h</a> строка <a class="el" href="vibration__detector_8h_source.html#l00230">230</a></p>

</div>
</div>
<a id="add86750dfd1683f09410d3fe3822a950" name="add86750dfd1683f09410d3fe3822a950"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add86750dfd1683f09410d3fe3822a950">&#9670;&#160;</a></span>vec_colored_point_handlers_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="class_colored_point_handler.html">ColoredPointHandler</a>*&gt; VibrationDetector::vec_colored_point_handlers_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Вектор обработчиков "цветных" точек </p>

<p class="definition">См. определение в файле <a class="el" href="vibration__detector_8h_source.html">vibration_detector.h</a> строка <a class="el" href="vibration__detector_8h_source.html#l00182">182</a></p>

</div>
</div>
<a id="a5085a389a0ff26924331ab5022eea1af" name="a5085a389a0ff26924331ab5022eea1af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5085a389a0ff26924331ab5022eea1af">&#9670;&#160;</a></span>vec_lonely_point_handlers_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="class_lonely_point_handler.html">LonelyPointHandler</a>*&gt; VibrationDetector::vec_lonely_point_handlers_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Вектор обработчиков "одиноких" точек </p>

<p class="definition">См. определение в файле <a class="el" href="vibration__detector_8h_source.html">vibration_detector.h</a> строка <a class="el" href="vibration__detector_8h_source.html#l00178">178</a></p>

</div>
</div>
<a id="a901927a4199f5bf914675f19cae9a651" name="a901927a4199f5bf914675f19cae9a651"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a901927a4199f5bf914675f19cae9a651">&#9670;&#160;</a></span>warping_figure_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;Point&gt; VibrationDetector::warping_figure_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Координаты фигуры для исправления перспективы </p>

<p class="definition">См. определение в файле <a class="el" href="vibration__detector_8h_source.html">vibration_detector.h</a> строка <a class="el" href="vibration__detector_8h_source.html#l00257">257</a></p>

</div>
</div>
<a id="a3b8ea35de43e2702a889f8def948ece4" name="a3b8ea35de43e2702a889f8def948ece4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b8ea35de43e2702a889f8def948ece4">&#9670;&#160;</a></span>warping_figure_selecting_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool VibrationDetector::warping_figure_selecting_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Флаг, показывающий, происходит ли в данный момент выделение фигуры (эта возможность отключена временно) </p>

<p class="definition">См. определение в файле <a class="el" href="vibration__detector_8h_source.html">vibration_detector.h</a> строка <a class="el" href="vibration__detector_8h_source.html#l00253">253</a></p>

</div>
</div>
<a id="a1dddb74ae6ef1b1f5cb4b66e2a352509" name="a1dddb74ae6ef1b1f5cb4b66e2a352509"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1dddb74ae6ef1b1f5cb4b66e2a352509">&#9670;&#160;</a></span>window_name_</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string VibrationDetector::window_name_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Имя главного окна </p>

<p class="definition">См. определение в файле <a class="el" href="vibration__detector_8h_source.html">vibration_detector.h</a> строка <a class="el" href="vibration__detector_8h_source.html#l00248">248</a></p>

</div>
</div>
<hr/>Объявления и описания членов классов находятся в файлах:<ul>
<li>C:/Users/seeyo/source/repos/Visual-Vibration-Tracking-V2/include/VVT-V2/<a class="el" href="vibration__detector_8h_source.html">vibration_detector.h</a></li>
<li>C:/Users/seeyo/source/repos/Visual-Vibration-Tracking-V2/source/<a class="el" href="vibration__detector_8cpp_source.html">vibration_detector.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Создано системой&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
